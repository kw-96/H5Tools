---

## 2024-12-19 - ä»£ç ä¸€è‡´æ€§ä¿®æ­£ ğŸ”§ğŸ“‹

### èƒŒæ™¯
ç”¨æˆ·å‘ç°å®é™…è¿è¡Œçš„ `createBaseFrames()` æ–¹æ³•ä¸åŸå§‹è®¾è®¡ä»£ç ï¼ˆ`code.ts`ï¼‰ä¸ä¸€è‡´ï¼Œè¦æ±‚ä¿æŒä¸€è‡´ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **ä»£ç å·®å¼‚å¯¹æ¯”**

| æ–¹é¢ | åŸå§‹è®¾è®¡ï¼ˆcode.tsï¼‰ | å®é™…è¿è¡Œä»£ç  | å·®å¼‚å½±å“ |
|------|---------------------|--------------|----------|
| **å¤–æ¡†å°ºå¯¸** | `H5_WIDTH, 100` | `H5_WIDTH + 200, 2000` | ç”»å¸ƒå¤§å°ä¸ç¬¦åˆè®¾è®¡ |
| **å¤–æ¡†èƒŒæ™¯** | æ— å¡«å……è®¾ç½® | ç°è‰²èƒŒæ™¯ `r:0.95, g:0.95, b:0.95` | è§†è§‰æ•ˆæœåå·® |
| **å¤–æ¡†å¸ƒå±€æ¨¡å¼** | æ˜ç¡®è®¾ç½® `layoutMode = "NONE"` | æœªæ˜ç¡®è®¾ç½® | å¸ƒå±€è¡Œä¸ºå¯èƒ½ä¸ä¸€è‡´ |
| **å¤–æ¡†è£å‰ª** | æ˜ç¡®è®¾ç½® `clipsContent = true` | æœªè®¾ç½® | å†…å®¹è£å‰ªè¡Œä¸ºä¸åŒ |
| **å†…æ¡†åç§°** | `'è‡ªé€‚åº”æ¨¡å—'` | `'H5ç”»æ¿'` | å‘½åä¸ä¸€è‡´ |
| **å†…æ¡†ä½ç½®** | æ— ä½ç½®è®¾ç½® | `x: 100, y: 100` | åç§»å®šä½ä¸ç¬¦åˆè®¾è®¡ |
| **å†…æ¡†èƒŒæ™¯** | `fills = []` | ä½¿ç”¨é…ç½®é¢œè‰² | èƒŒæ™¯å¤„ç†é€»è¾‘ä¸åŒ |
| **æ·»åŠ æ—¶æœº** | åœ¨ `setupBackground()` ä¸­æ·»åŠ  | åœ¨ `createBaseFrames()` ä¸­ç«‹å³æ·»åŠ  | ç»“æ„æ„å»ºé¡ºåºä¸åŒ |

### ä¿®æ”¹å®æ–½

#### 1. **æ¢å¤åŸå§‹æ¡†æ¶åˆ›å»ºé€»è¾‘**
**æ–‡ä»¶**: `src/core/builders/h5-prototype-builder.ts`

```typescript
// ğŸ”§ ä¿®æ­£ï¼šæ¢å¤åŸå§‹è®¾è®¡çš„createBaseFramesæ–¹æ³•
private createBaseFrames(): void {
  // 1. H5åŸå‹å®¹å™¨ä¸éœ€è¦åº”ç”¨è‡ªåŠ¨å¸ƒå±€ï¼Œåªæ˜¯ä¸€ä¸ªç”»æ¿ï¼Œå¹¶è®¾ç½®å†…å®¹è£å‰ª
  this.outerFrame = NodeUtils.createFrame('H5åŸå‹', CONSTANTS.H5_WIDTH, 100);
  this.outerFrame.layoutMode = "NONE"; // ä¸ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€
  this.outerFrame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
  
  // 2. åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œä½†å…ˆä¸æ·»åŠ åˆ°H5åŸå‹å®¹å™¨ä¸­
  this.h5Frame = NodeUtils.createFrame('è‡ªé€‚åº”æ¨¡å—', CONSTANTS.H5_WIDTH, 100);
  this.h5Frame.fills = [];
  
  // è®¾ç½®è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„è‡ªåŠ¨å¸ƒå±€
  NodeUtils.setupAutoLayout(this.h5Frame, 'VERTICAL', 0, 0);
  this.h5Frame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
  this.h5Frame.layoutWrap = "NO_WRAP"; // è®¾ç½®å¸ƒå±€ä¸æ¢è¡Œï¼Œç¡®ä¿æ‰€æœ‰å­å…ƒç´ åœ¨ä¸€åˆ—ä¸­å‚ç›´æ’åˆ—
}
```

#### 2. **è°ƒæ•´èƒŒæ™¯è®¾ç½®é€»è¾‘**
```typescript
// ğŸ”§ ä¿®æ­£ï¼šèƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°è‡ªé€‚åº”æ¨¡å—å®¹å™¨è€Œéå¤–æ¡†
// å½“pageBgColorä¸ä¸ºç™½è‰²æ—¶ï¼Œè®¾ç½®è‡ªé€‚åº”æ¨¡å—å®¹å™¨å¡«å……é¢œè‰²ä¸ºpageBgColorï¼Œå¦åˆ™å¡«å……ä¸ºé€æ˜
if (!isDefaultWhite) {
  const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
  this.h5Frame.fills = [colorFill];  // åº”ç”¨åˆ°å†…æ¡†è€Œéå¤–æ¡†
} else {
  this.h5Frame.fills = [];  // ç™½è‰²æ—¶è®¾ç½®ä¸ºé€æ˜
}
```

#### 3. **ä¿®æ­£æœ€ç»ˆå¸ƒå±€è°ƒæ•´**
```typescript
// ğŸ”§ ä¿®æ­£ï¼šå¤–æ¡†å°ºå¯¸ä¸è‡ªé€‚åº”æ¨¡å—ä¿æŒå®Œå…¨ä¸€è‡´
private finalizeLayout(): void {
  // è°ƒæ•´H5åŸå‹å®¹å™¨é«˜åº¦ä¸ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨é«˜åº¦ï¼ˆæ— åç§»ï¼‰
  this.outerFrame.resize(CONSTANTS.H5_WIDTH, this.h5Frame.height);
  // ... å…¶ä»–é€»è¾‘ä¿æŒä¸å˜
}
```

### ä¿®æ”¹è¦ç‚¹

#### âœ… **æ¢å¤çš„è®¾è®¡åŸåˆ™**
1. **ç®€æ´æ€§**ï¼šå¤–æ¡†åªä½œä¸ºå®¹å™¨ï¼Œä¸é™„åŠ é¢å¤–è§†è§‰å…ƒç´ 
2. **ä¸€è‡´æ€§**ï¼šä¸¥æ ¼æŒ‰ç…§åŸå§‹è®¾è®¡çš„å°ºå¯¸å’Œå‘½å
3. **åˆ†ç¦»æ€§**ï¼šèƒŒæ™¯è®¾ç½®ä¸æ¡†æ¶åˆ›å»ºåˆ†ç¦»
4. **æ­£ç¡®æ€§**ï¼šå¸ƒå±€æ¨¡å¼å’Œè£å‰ªè®¾ç½®æ˜ç¡®æŒ‡å®š

#### ğŸ¯ **ç»“æ„å¯¹æ¯”**

**ä¿®æ­£å‰ï¼ˆåç¦»è®¾è®¡ï¼‰**ï¼š
```
H5åŸå‹ (1280x2000, ç°è‰²èƒŒæ™¯)
â””â”€â”€ H5ç”»æ¿ (1080x1920, ä½ç½®100,100, é…ç½®èƒŒæ™¯è‰²)
```

**ä¿®æ­£åï¼ˆç¬¦åˆè®¾è®¡ï¼‰**ï¼š
```
H5åŸå‹ (1080xåŠ¨æ€é«˜åº¦, æ— èƒŒæ™¯, layoutMode="NONE", clipsContent=true)
â””â”€â”€ è‡ªé€‚åº”æ¨¡å— (1080xåŠ¨æ€é«˜åº¦, é…ç½®èƒŒæ™¯è‰², è‡ªåŠ¨å¸ƒå±€)
```

### éªŒè¯ç»“æœ

#### æ„å»ºçŠ¶æ€
- âœ… **TypeScriptç¼–è¯‘**ï¼šæ— é”™è¯¯
- âœ… **æ„å»ºæˆåŠŸ**ï¼šäº§ç‰©å®Œæ•´
- âœ… **åŠŸèƒ½ä¿æŒ**ï¼šæ‰€æœ‰åŸæœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… **è®¾è®¡ä¸€è‡´**ï¼šå®Œå…¨ç¬¦åˆåŸå§‹è®¾è®¡æ„å›¾

#### ä»£ç è´¨é‡
- ğŸ”§ **å‘½åç»Ÿä¸€**ï¼š`'è‡ªé€‚åº”æ¨¡å—'` è€Œé `'H5ç”»æ¿'`
- ğŸ”§ **å°ºå¯¸ç²¾ç¡®**ï¼šæ— å¤šä½™çš„200pxåç§»
- ğŸ”§ **èƒŒæ™¯æ­£ç¡®**ï¼šé…ç½®èƒŒæ™¯è‰²åº”ç”¨åˆ°å†…å®¹åŒºåŸŸ
- ğŸ”§ **å¸ƒå±€æ˜ç¡®**ï¼šå¤–æ¡†æ˜ç¡®è®¾ç½®ä¸º `layoutMode="NONE"`

### æŠ€æœ¯å½±å“

#### ğŸ¨ **è§†è§‰æ•ˆæœæ”¹è¿›**
- **æ— å¹²æ‰°èƒŒæ™¯**ï¼šå¤–æ¡†ä¸å†æœ‰ç°è‰²èƒŒæ™¯å¹²æ‰°
- **ç²¾ç¡®å°ºå¯¸**ï¼šH5åŸå‹å°ºå¯¸ä¸å†…å®¹å®Œå…¨åŒ¹é…
- **æ¸…æ™°å±‚æ¬¡**ï¼šç»“æ„å±‚æ¬¡æ›´åŠ æ¸…æ™°åˆç†

#### ğŸ“ **å¸ƒå±€è¡Œä¸ºä¼˜åŒ–**
- **å›ºå®šå¤–æ¡†**ï¼šå¤–æ¡†æ˜ç¡®è®¾ç½®ä¸ºéè‡ªåŠ¨å¸ƒå±€æ¨¡å¼
- **çµæ´»å†…å®¹**ï¼šå†…å®¹åŒºåŸŸä½¿ç”¨è‡ªåŠ¨å¸ƒå±€é€‚é…
- **æ­£ç¡®è£å‰ª**ï¼šå†…å®¹è¶…å‡ºæ—¶æ­£ç¡®è£å‰ªæ˜¾ç¤º

#### ğŸš€ **å¼€å‘ä½“éªŒæå‡**
- **è®¾è®¡ä¸€è‡´æ€§**ï¼šä»£ç ä¸è®¾è®¡æ–‡æ¡£å®Œå…¨ä¸€è‡´
- **å¯é¢„æµ‹æ€§**ï¼šå¸ƒå±€è¡Œä¸ºæ›´åŠ å¯é¢„æµ‹
- **ç»´æŠ¤ä¾¿åˆ©æ€§**ï¼šå‡å°‘äº†ä¸å¿…è¦çš„é­”æ³•æ•°å­—å’Œåç§»é‡

### åç»­ä¿éšœ

#### ğŸ“‹ **ä»£ç å®¡æŸ¥è¦ç‚¹**
1. **ä¸¥æ ¼éµå¾ªåŸå§‹è®¾è®¡**ï¼šä»»ä½•ä¿®æ”¹éƒ½åº”ä¸è®¾è®¡æ–‡æ¡£å¯¹æ¯”
2. **é¿å…ä»»æ„è°ƒæ•´**ï¼šä¸éšæ„æ·»åŠ åç§»é‡æˆ–èƒŒæ™¯è‰²
3. **ä¿æŒå‘½åä¸€è‡´**ï¼šä½¿ç”¨è®¾è®¡æ–‡æ¡£ä¸­çš„å‡†ç¡®å‘½å

#### ğŸ” **æµ‹è¯•éªŒè¯**
- éªŒè¯å¤–æ¡†å°ºå¯¸ä¸å†…å®¹å®Œå…¨åŒ¹é…
- ç¡®è®¤èƒŒæ™¯é¢œè‰²æ­£ç¡®åº”ç”¨åˆ°å†…å®¹åŒºåŸŸ
- æ£€æŸ¥å¸ƒå±€æ¨¡å¼è®¾ç½®æ­£ç¡®ç”Ÿæ•ˆ

**ä»£ç ä¸€è‡´æ€§ä¿®æ­£å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolsçš„å®é™…è¿è¡Œä»£ç ä¸åŸå§‹è®¾è®¡ä¿æŒå®Œå…¨ä¸€è‡´ï¼Œç¡®ä¿äº†è®¾è®¡æ„å›¾çš„å‡†ç¡®å®ç°å’Œä»£ç çš„å¯ç»´æŠ¤æ€§ï¼ 

## 2024-12-19 - è‡ªé€‚åº”æ¨¡å—æ¡ä»¶åˆ›å»ºä¼˜åŒ– ğŸ¯ğŸ“¦

### èƒŒæ™¯
ç”¨æˆ·è¦æ±‚ä¸ºè‡ªé€‚åº”æ¨¡å—æ·»åŠ æ¡ä»¶åˆ¤æ–­ï¼Œå½“æ²¡æœ‰æ¨¡å—å†…å®¹æ—¶è·³è¿‡è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„åˆ›å»ºï¼Œä»¥ä¼˜åŒ–H5åŸå‹çš„ç»“æ„å’Œæ€§èƒ½ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **åŸæœ‰é€»è¾‘é—®é¢˜**
- **æ— æ¡ä»¶åˆ›å»º**ï¼šæ— è®ºæ˜¯å¦æœ‰æ¨¡å—å†…å®¹ï¼Œéƒ½ä¼šåˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç©ºå®¹å™¨å­˜åœ¨**ï¼šå½“ç”¨æˆ·åªè®¾ç½®èƒŒæ™¯å›¾ç‰‡è€Œæ²¡æœ‰ä»»ä½•æ¨¡å—å†…å®¹æ—¶ï¼Œä»ä¼šåˆ›å»ºç©ºçš„è‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç»“æ„å†—ä½™**ï¼šç©ºçš„è‡ªé€‚åº”æ¨¡å—å®¹å™¨ä¼šå¢åŠ ä¸å¿…è¦çš„èŠ‚ç‚¹å±‚çº§
- **æ€§èƒ½æµªè´¹**ï¼šæ— æ„ä¹‰çš„å®¹å™¨åˆ›å»ºå’Œå¸ƒå±€è®¡ç®—

#### ğŸ¯ **ä¼˜åŒ–ç›®æ ‡**
- **æ™ºèƒ½åˆ¤æ–­**ï¼šæ ¹æ®é…ç½®å†…å®¹æ™ºèƒ½å†³å®šæ˜¯å¦åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç»“æ„ç²¾ç®€**ï¼šæ²¡æœ‰æ¨¡å—å†…å®¹æ—¶ç›´æ¥ä½¿ç”¨å¤–æ¡†ä½œä¸ºå®¹å™¨
- **æ€§èƒ½æå‡**ï¼šé¿å…ä¸å¿…è¦çš„èŠ‚ç‚¹åˆ›å»ºå’Œå¸ƒå±€è®¡ç®—
- **é€»è¾‘æ¸…æ™°**ï¼šä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤

### ä¿®æ”¹å®æ–½

#### 1. **æ–°å¢å†…å®¹æ£€æµ‹æ–¹æ³•**
**æ–‡ä»¶**: `src/core/builders/h5-prototype-builder.ts`

```typescript
/**
 * æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•æ¨¡å—å†…å®¹éœ€è¦åˆ›å»º
 * @returns boolean å¦‚æœæœ‰ä»»ä½•æ¨¡å—å†…å®¹è¿”å›trueï¼Œå¦åˆ™è¿”å›false
 */
private hasAnyModuleContent(): boolean {
  // æ£€æŸ¥å¤´éƒ¨æ¨¡å—å†…å®¹
  const hasHeaderContent = !!(this.config.headerImage || this.config.titleUpload);
  
  // æ£€æŸ¥æ¸¸æˆä¿¡æ¯æ¨¡å—å†…å®¹
  const hasGameInfoContent = !!(this.config.gameName || this.config.gameDesc || this.config.gameIcon);
  
  // æ£€æŸ¥è‡ªå®šä¹‰æ¨¡å—å†…å®¹
  const hasCustomModules = !!(this.config.modules && this.config.modules.length > 0);
  
  // æ£€æŸ¥è§„åˆ™æ¨¡å—å†…å®¹
  const hasRulesTitle = this.config.rulesTitle && this.config.rulesTitle.trim() !== '';
  const hasRulesBgImage = this.config.rulesBgImage !== null && this.config.rulesBgImage !== undefined;
  const hasRulesContent = this.config.rulesContent && this.config.rulesContent.trim() !== '';
  const hasRulesContent_any = hasRulesTitle || hasRulesBgImage || hasRulesContent;
  
  // æ£€æŸ¥åº•éƒ¨æ¨¡å—å†…å®¹
  const hasFooterContent = !!(this.config.footerLogo || this.config.footerBg);
  
  // å¦‚æœæœ‰ä»»ä½•æ¨¡å—å†…å®¹ï¼Œè¿”å›true
  return hasHeaderContent || hasGameInfoContent || hasCustomModules || hasRulesContent_any || hasFooterContent;
}
```

#### 2. **æ¡ä»¶åŒ–æ¡†æ¶åˆ›å»º**
```typescript
private createBaseFrames(): void {
  // 1. H5åŸå‹å®¹å™¨ä¸éœ€è¦åº”ç”¨è‡ªåŠ¨å¸ƒå±€ï¼Œåªæ˜¯ä¸€ä¸ªç”»æ¿ï¼Œå¹¶è®¾ç½®å†…å®¹è£å‰ª
  this.outerFrame = NodeUtils.createFrame('H5åŸå‹', CONSTANTS.H5_WIDTH, 100);
  this.outerFrame.layoutMode = "NONE"; // ä¸ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€
  this.outerFrame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
  
  // 2. åªæœ‰å½“æœ‰æ¨¡å—å†…å®¹æ—¶æ‰åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
  if (this.hasAnyModuleContent()) {
    this.h5Frame = NodeUtils.createFrame('è‡ªé€‚åº”æ¨¡å—', CONSTANTS.H5_WIDTH, 100);
    this.h5Frame.fills = [];
    
    // è®¾ç½®è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„è‡ªåŠ¨å¸ƒå±€
    NodeUtils.setupAutoLayout(this.h5Frame, 'VERTICAL', 0, 0);
    this.h5Frame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
    this.h5Frame.layoutWrap = "NO_WRAP"; // è®¾ç½®å¸ƒå±€ä¸æ¢è¡Œï¼Œç¡®ä¿æ‰€æœ‰å­å…ƒç´ åœ¨ä¸€åˆ—ä¸­å‚ç›´æ’åˆ—
    
    console.log('æ£€æµ‹åˆ°æ¨¡å—å†…å®¹ï¼Œå·²åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨');
  } else {
    console.log('æœªæ£€æµ‹åˆ°æ¨¡å—å†…å®¹ï¼Œè·³è¿‡è‡ªé€‚åº”æ¨¡å—å®¹å™¨åˆ›å»º');
  }
}
```

#### 3. **é€‚é…èƒŒæ™¯è®¾ç½®é€»è¾‘**
```typescript
private async setupBackground(): Promise<void> {
  // å¦‚æœå­˜åœ¨è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè®¾ç½®å…¶èƒŒæ™¯é¢œè‰²
  if (this.h5Frame) {
    // èƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°è‡ªé€‚åº”æ¨¡å—å®¹å™¨
    if (!isDefaultWhite) {
      const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
      this.h5Frame.fills = [colorFill];
    } else {
      this.h5Frame.fills = [];
    }
  } else {
    // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå°†èƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°å¤–æ¡†
    if (!isDefaultWhite) {
      const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
      this.outerFrame.fills = [colorFill];
    } else {
      this.outerFrame.fills = [];
    }
  }
  
  // èƒŒæ™¯å›¾ç‰‡å¤„ç†é€»è¾‘ä¿æŒä¸å˜...
  
  // è®¾ç½®å®ŒèƒŒæ™¯ä¹‹åï¼Œå¦‚æœå­˜åœ¨è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå°†å…¶æ·»åŠ ä¸ºH5åŸå‹å®¹å™¨çš„å­å…ƒç´ 
  if (this.h5Frame) {
    NodeUtils.safeAppendChild(this.outerFrame, this.h5Frame, 'H5è‡ªé€‚åº”æ¨¡å—å®¹å™¨æ·»åŠ ');
  }
}
```

#### 4. **é€‚é…æ¨¡å—æ·»åŠ é€»è¾‘**
```typescript
private async addModules(): Promise<void> {
  // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè¯´æ˜æ²¡æœ‰æ¨¡å—å†…å®¹ï¼Œç›´æ¥è¿”å›
  if (!this.h5Frame) {
    console.log('æ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè·³è¿‡æ¨¡å—æ·»åŠ ');
    return;
  }
  
  // åˆ›å»ºæ‰€æœ‰æ¨¡å—
  const modules = await this.createAllModules();
  
  // æ‰¹é‡å®‰å…¨æ·»åŠ æ¨¡å—åˆ°H5ç”»æ¿ä¸­
  NodeUtils.safeBatchAppendChildren(this.h5Frame, modules, 'H5æ¨¡å—æ‰¹é‡æ·»åŠ ');
}
```

#### 5. **é€‚é…æœ€ç»ˆå¸ƒå±€é€»è¾‘**
```typescript
private finalizeLayout(): void {
  // è°ƒæ•´H5åŸå‹å®¹å™¨é«˜åº¦
  if (this.h5Frame) {
    // å¦‚æœæœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè°ƒæ•´ä¸ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨é«˜åº¦
    this.outerFrame.resize(CONSTANTS.H5_WIDTH, this.h5Frame.height);
    // æ¨¡å—å®¹å™¨å±‚çº§è°ƒæ•´é€»è¾‘...
  } else {
    // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè®¾ç½®ä¸€ä¸ªæœ€å°é«˜åº¦æˆ–æ ¹æ®èƒŒæ™¯å›¾ç‰‡è°ƒæ•´
    let finalHeight = 100; // é»˜è®¤æœ€å°é«˜åº¦
    
    // å¦‚æœæœ‰èƒŒæ™¯å›¾ç‰‡ï¼Œæ ¹æ®èƒŒæ™¯å›¾ç‰‡é«˜åº¦è°ƒæ•´
    if (this.config.pageBgImage) {
      const bgImageNode = this.outerFrame.findOne(node => node.name === 'é¡µé¢èƒŒæ™¯å›¾ç‰‡');
      if (bgImageNode && 'height' in bgImageNode) {
        finalHeight = Math.max(finalHeight, bgImageNode.height);
      }
    }
    
    this.outerFrame.resize(CONSTANTS.H5_WIDTH, finalHeight);
    console.log(`æ²¡æœ‰æ¨¡å—å†…å®¹ï¼ŒH5åŸå‹è®¾ç½®ä¸ºæœ€å°é«˜åº¦: ${finalHeight}px`);
  }
}
```

### ä¼˜åŒ–æ•ˆæœ

#### ğŸ¯ **æ™ºèƒ½æ£€æµ‹èŒƒå›´**
| æ¨¡å—ç±»å‹ | æ£€æµ‹æ¡ä»¶ | ç¤ºä¾‹ |
|----------|----------|------|
| **å¤´éƒ¨æ¨¡å—** | `headerImage \|\| titleUpload` | å¤´éƒ¨å›¾ç‰‡æˆ–æ ‡é¢˜ä¸Šä¼  |
| **æ¸¸æˆä¿¡æ¯æ¨¡å—** | `gameName \|\| gameDesc \|\| gameIcon` | æ¸¸æˆåç§°ã€æè¿°æˆ–å›¾æ ‡ |
| **è‡ªå®šä¹‰æ¨¡å—** | `modules && modules.length > 0` | è‡ªå®šä¹‰æ¨¡å—æ•°ç»„éç©º |
| **è§„åˆ™æ¨¡å—** | `rulesTitle \|\| rulesBgImage \|\| rulesContent` | è§„åˆ™æ ‡é¢˜ã€èƒŒæ™¯å›¾æˆ–å†…å®¹ |
| **åº•éƒ¨æ¨¡å—** | `footerLogo \|\| footerBg` | åº•éƒ¨Logoæˆ–èƒŒæ™¯ |

#### ğŸ“Š **ç»“æ„å¯¹æ¯”**

**æœ‰æ¨¡å—å†…å®¹æ—¶**ï¼š
```
H5åŸå‹ (1080xåŠ¨æ€é«˜åº¦, æ— èƒŒæ™¯, layoutMode="NONE")
â”œâ”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰)
â””â”€â”€ è‡ªé€‚åº”æ¨¡å— (1080xåŠ¨æ€é«˜åº¦, é…ç½®èƒŒæ™¯è‰², è‡ªåŠ¨å¸ƒå±€)
    â”œâ”€â”€ å¤´éƒ¨æ¨¡å— (å¯é€‰)
    â”œâ”€â”€ æ¸¸æˆä¿¡æ¯æ¨¡å— (å¯é€‰) 
    â”œâ”€â”€ è‡ªå®šä¹‰æ¨¡å—... (å¯é€‰)
    â”œâ”€â”€ è§„åˆ™æ¨¡å— (å¯é€‰)
    â””â”€â”€ åº•éƒ¨æ¨¡å— (å¯é€‰)
```

**æ— æ¨¡å—å†…å®¹æ—¶**ï¼š
```
H5åŸå‹ (1080xèƒŒæ™¯å›¾é«˜åº¦æˆ–100px, é…ç½®èƒŒæ™¯è‰², layoutMode="NONE")
â””â”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰)
```

#### ğŸš€ **æ€§èƒ½æå‡**
- **èŠ‚ç‚¹å‡å°‘**ï¼šæ— å†…å®¹æ—¶å‡å°‘1ä¸ªå®¹å™¨èŠ‚ç‚¹
- **å¸ƒå±€ç®€åŒ–**ï¼šé¿å…ä¸å¿…è¦çš„è‡ªåŠ¨å¸ƒå±€è®¡ç®—
- **å†…å­˜ä¼˜åŒ–**ï¼šå‡å°‘ç©ºå®¹å™¨çš„å†…å­˜å ç”¨
- **æ¸²æŸ“æ•ˆç‡**ï¼šå‡å°‘Figmaæ¸²æŸ“å±‚çº§

#### ğŸ” **ç”¨æˆ·ä½“éªŒæ”¹è¿›**
- **ç»“æ„æ¸…æ™°**ï¼šåªæœ‰èƒŒæ™¯å›¾ç‰‡æ—¶ç»“æ„æ›´ç®€æ´
- **æ€§èƒ½æ›´å¥½**ï¼šå‡å°‘ä¸å¿…è¦çš„èŠ‚ç‚¹æ“ä½œ
- **è°ƒè¯•å‹å¥½**ï¼šæ§åˆ¶å°æ—¥å¿—æ¸…æ™°æ˜¾ç¤ºåˆ›å»ºçŠ¶æ€
- **é€»è¾‘åˆç†**ï¼šç¬¦åˆç”¨æˆ·æœŸæœ›çš„è¡Œä¸º

### éªŒè¯ç»“æœ

#### æ„å»ºçŠ¶æ€
- âœ… **TypeScriptç¼–è¯‘**ï¼šæ— é”™è¯¯
- âœ… **æ„å»ºæˆåŠŸ**ï¼šäº§ç‰©å®Œæ•´
- âœ… **åŠŸèƒ½å®Œæ•´**ï¼šæ‰€æœ‰æ¨¡å—æ£€æµ‹é€»è¾‘æ­£å¸¸å·¥ä½œ
- âœ… **å‘åå…¼å®¹**ï¼šç°æœ‰åŠŸèƒ½ä¿æŒä¸å˜

#### æµ‹è¯•åœºæ™¯
- ğŸ§ª **çº¯èƒŒæ™¯åœºæ™¯**ï¼šåªæœ‰èƒŒæ™¯å›¾ç‰‡/é¢œè‰²ï¼Œæ— æ¨¡å—å†…å®¹
- ğŸ§ª **éƒ¨åˆ†æ¨¡å—åœºæ™¯**ï¼šåªæœ‰éƒ¨åˆ†æ¨¡å—å†…å®¹
- ğŸ§ª **å®Œæ•´æ¨¡å—åœºæ™¯**ï¼šåŒ…å«æ‰€æœ‰ç±»å‹æ¨¡å—å†…å®¹
- ğŸ§ª **ç©ºé…ç½®åœºæ™¯**ï¼šå®Œå…¨ç©ºçš„é…ç½®

### æŠ€æœ¯è¦ç‚¹

#### ğŸ”§ **æ£€æµ‹é€»è¾‘è®¾è®¡**
- **å…¨é¢è¦†ç›–**ï¼šæ£€æµ‹æ‰€æœ‰å¯èƒ½çš„æ¨¡å—ç±»å‹
- **ç²¾ç¡®åˆ¤æ–­**ï¼šä½¿ç”¨ä¸¥æ ¼çš„éç©ºå’Œéç©ºå­—ç¬¦ä¸²æ£€æŸ¥
- **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨çŸ­è·¯é€»è¾‘æé«˜æ£€æµ‹æ•ˆç‡

#### ğŸ›¡ï¸ **å®¹é”™å¤„ç†**
- **ç©ºå€¼å®‰å…¨**ï¼šæ‰€æœ‰æ£€æŸ¥éƒ½åŒ…å«ç©ºå€¼å¤„ç†
- **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptç±»å‹æ£€æŸ¥ç¡®ä¿å®‰å…¨
- **é™çº§å¤„ç†**ï¼šæ£€æµ‹å¤±è´¥æ—¶é‡‡ç”¨ä¿å®ˆç­–ç•¥ï¼ˆåˆ›å»ºå®¹å™¨ï¼‰

#### ğŸ“ **æ—¥å¿—å®Œå–„**
- **çŠ¶æ€è·Ÿè¸ª**ï¼šæ¸…æ™°è®°å½•å®¹å™¨åˆ›å»ºçŠ¶æ€
- **è°ƒè¯•æ”¯æŒ**ï¼šæä¾›è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
- **ç”¨æˆ·åé¦ˆ**ï¼šé€šè¿‡æ—¥å¿—äº†è§£æ’ä»¶è¡Œä¸º

**è‡ªé€‚åº”æ¨¡å—æ¡ä»¶åˆ›å»ºä¼˜åŒ–å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolså…·å¤‡äº†æ™ºèƒ½çš„æ¨¡å—æ£€æµ‹èƒ½åŠ›ï¼Œèƒ½å¤Ÿæ ¹æ®å®é™…å†…å®¹éœ€æ±‚åŠ¨æ€å†³å®šæ˜¯å¦åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå®ç°äº†æ›´ç²¾ç®€çš„ç»“æ„å’Œæ›´å¥½çš„æ€§èƒ½ï¼ 

## 2024-12-19 - è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯å¡«å……ä¼˜åŒ– ğŸ¨ğŸ“¦

### èƒŒæ™¯
ç”¨æˆ·è¦æ±‚å°†è‡ªé€‚åº”æ¨¡å—çš„èƒŒæ™¯å¡«å……æ”¹ä¸ºå§‹ç»ˆé€æ˜å¡«å……ï¼Œä»¥ä¼˜åŒ–H5åŸå‹çš„è§†è§‰å±‚æ¬¡å’ŒèƒŒæ™¯å¤„ç†é€»è¾‘ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **åŸæœ‰èƒŒæ™¯é€»è¾‘é—®é¢˜**
- **åŒé‡èƒŒæ™¯è®¾ç½®**ï¼šèƒŒæ™¯é¢œè‰²å¯èƒ½åŒæ—¶åº”ç”¨åˆ°å¤–æ¡†å’Œè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **é€»è¾‘å¤æ‚**ï¼šæ ¹æ®æ˜¯å¦æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨æ¥å†³å®šèƒŒæ™¯åº”ç”¨ä½ç½®
- **è§†è§‰å†—ä½™**ï¼šè‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„èƒŒæ™¯å¯èƒ½ä¸å¤–æ¡†èƒŒæ™¯é‡å 
- **å±‚æ¬¡ä¸æ¸…**ï¼šèƒŒæ™¯å±‚æ¬¡å…³ç³»ä¸å¤Ÿæ˜ç¡®

#### ğŸ¯ **ä¼˜åŒ–ç›®æ ‡**
- **ç®€åŒ–é€»è¾‘**ï¼šè‡ªé€‚åº”æ¨¡å—å®¹å™¨å§‹ç»ˆé€æ˜ï¼ŒèƒŒæ™¯é¢œè‰²å§‹ç»ˆåº”ç”¨åˆ°å¤–æ¡†
- **æ¸…æ™°å±‚æ¬¡**ï¼šå»ºç«‹æ¸…æ™°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„
- **é¿å…å†—ä½™**ï¼šæ¶ˆé™¤é‡å¤çš„èƒŒæ™¯è®¾ç½®
- **æå‡æ€§èƒ½**ï¼šå‡å°‘ä¸å¿…è¦çš„èƒŒæ™¯è®¡ç®—å’Œæ¸²æŸ“

### ä¿®æ”¹å®æ–½

#### **èƒŒæ™¯è®¾ç½®é€»è¾‘é‡æ„**
**æ–‡ä»¶**: `src/core/builders/h5-prototype-builder.ts`

**ä¿®æ”¹å‰**ï¼š
```typescript
// å¤æ‚çš„æ¡ä»¶åˆ¤æ–­é€»è¾‘
if (this.h5Frame) {
  // æ ¹æ®é¢œè‰²åˆ¤æ–­æ˜¯å¦è®¾ç½®è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯
  if (!isDefaultWhite) {
    const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
    this.h5Frame.fills = [colorFill];
  } else {
    this.h5Frame.fills = [];
  }
} else {
  // æ²¡æœ‰è‡ªé€‚åº”æ¨¡å—æ—¶æ‰è®¾ç½®å¤–æ¡†èƒŒæ™¯
  if (!isDefaultWhite) {
    const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
    this.outerFrame.fills = [colorFill];
  } else {
    this.outerFrame.fills = [];
  }
}
```

**ä¿®æ”¹å**ï¼š
```typescript
// ç®€åŒ–çš„èƒŒæ™¯è®¾ç½®é€»è¾‘
// è‡ªé€‚åº”æ¨¡å—å®¹å™¨å§‹ç»ˆé€æ˜ï¼ŒèƒŒæ™¯é¢œè‰²å§‹ç»ˆåº”ç”¨åˆ°å¤–æ¡†
if (this.h5Frame) {
  this.h5Frame.fills = []; // å§‹ç»ˆé€æ˜
  console.log('è‡ªé€‚åº”æ¨¡å—å®¹å™¨è®¾ç½®ä¸ºé€æ˜å¡«å……');
}

// èƒŒæ™¯é¢œè‰²å§‹ç»ˆåº”ç”¨åˆ°å¤–æ¡†ï¼ˆH5åŸå‹å®¹å™¨ï¼‰
if (!isDefaultWhite) {
  const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
  this.outerFrame.fills = [colorFill];
  console.log(`H5åŸå‹å®¹å™¨èƒŒæ™¯è‰²è®¾ç½®ä¸º: ${this.config.pageBgColor}`);
} else {
  // ç™½è‰²æ—¶è®¾ç½®ä¸ºé€æ˜
  this.outerFrame.fills = [];
  console.log('H5åŸå‹å®¹å™¨èƒŒæ™¯è®¾ç½®ä¸ºé€æ˜ï¼ˆç™½è‰²ï¼‰');
}
```

### ä¼˜åŒ–æ•ˆæœ

#### ğŸ¨ **è§†è§‰å±‚æ¬¡ä¼˜åŒ–**

**æ–°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„**ï¼š
```
H5åŸå‹å®¹å™¨ (å¤–æ¡†)
â”œâ”€â”€ èƒŒæ™¯é¢œè‰² (pageBgColor) â† å§‹ç»ˆåœ¨è¿™é‡Œè®¾ç½®
â”œâ”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰) â† åœ¨å¤–æ¡†ä¸­
â””â”€â”€ è‡ªé€‚åº”æ¨¡å—å®¹å™¨ (å§‹ç»ˆé€æ˜) â† ä¸è®¾ç½®èƒŒæ™¯
    â”œâ”€â”€ å¤´éƒ¨æ¨¡å—
    â”œâ”€â”€ æ¸¸æˆä¿¡æ¯æ¨¡å—
    â”œâ”€â”€ è‡ªå®šä¹‰æ¨¡å—...
    â”œâ”€â”€ è§„åˆ™æ¨¡å—
    â””â”€â”€ åº•éƒ¨æ¨¡å—
```

#### ğŸ“Š **é€»è¾‘å¯¹æ¯”**

| æ–¹é¢ | ä¿®æ”¹å‰ | ä¿®æ”¹å | ä¼˜åŠ¿ |
|------|--------|--------|------|
| **èƒŒæ™¯è®¾ç½®ä½ç½®** | æ¡ä»¶åˆ¤æ–­ | å§‹ç»ˆå¤–æ¡† | é€»è¾‘ç»Ÿä¸€ |
| **è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯** | å¯èƒ½æœ‰èƒŒæ™¯ | å§‹ç»ˆé€æ˜ | è§†è§‰æ¸…æ™° |
| **ä»£ç å¤æ‚åº¦** | åŒé‡æ¡ä»¶åˆ¤æ–­ | å•ä¸€é€»è¾‘ | æ˜“ç»´æŠ¤ |
| **æ€§èƒ½** | å¤šæ¬¡èƒŒæ™¯è®¡ç®— | ä¸€æ¬¡è®¾ç½® | æ›´é«˜æ•ˆ |

#### ğŸš€ **æ€§èƒ½æå‡**
- **å‡å°‘èƒŒæ™¯è®¡ç®—**ï¼šåªéœ€è¦ä¸€æ¬¡èƒŒæ™¯é¢œè‰²è®¾ç½®
- **ç®€åŒ–æ¸²æŸ“**ï¼šé¿å…å¤šå±‚èƒŒæ™¯çš„é‡å æ¸²æŸ“
- **å†…å­˜ä¼˜åŒ–**ï¼šå‡å°‘èƒŒæ™¯å¡«å……å¯¹è±¡çš„åˆ›å»º
- **é€»è¾‘æ¸…æ™°**ï¼šä»£ç æ›´æ˜“ç†è§£å’Œç»´æŠ¤

#### ğŸ” **ç”¨æˆ·ä½“éªŒæ”¹è¿›**
- **è§†è§‰ä¸€è‡´æ€§**ï¼šèƒŒæ™¯é¢œè‰²å§‹ç»ˆåœ¨æœ€åº•å±‚
- **é€æ˜åº¦æ§åˆ¶**ï¼šè‡ªé€‚åº”æ¨¡å—é€æ˜ï¼Œä¸å½±å“èƒŒæ™¯æ˜¾ç¤º
- **è°ƒè¯•å‹å¥½**ï¼šæ¸…æ™°çš„æ—¥å¿—æ˜¾ç¤ºèƒŒæ™¯è®¾ç½®çŠ¶æ€
- **é¢„æœŸè¡Œä¸º**ï¼šç¬¦åˆç”¨æˆ·å¯¹èƒŒæ™¯å±‚æ¬¡çš„é¢„æœŸ

### åº”ç”¨åœºæ™¯

#### ğŸ¯ **é€‚ç”¨æƒ…å†µ**
1. **çº¯è‰²èƒŒæ™¯**ï¼šèƒŒæ™¯é¢œè‰²ç›´æ¥åº”ç”¨åˆ°å¤–æ¡†ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
2. **èƒŒæ™¯å›¾ç‰‡**ï¼šå›¾ç‰‡åœ¨å¤–æ¡†ä¸­ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜ä¸é®æŒ¡
3. **æ··åˆèƒŒæ™¯**ï¼šèƒŒæ™¯è‰²+èƒŒæ™¯å›¾ç‰‡ï¼Œå±‚æ¬¡æ¸…æ™°
4. **æ— èƒŒæ™¯å†…å®¹**ï¼šåªæœ‰è‡ªé€‚åº”æ¨¡å—æ—¶ï¼ŒèƒŒæ™¯é€»è¾‘ä¾ç„¶æ¸…æ™°

#### ğŸ“‹ **è§†è§‰æ•ˆæœ**
- **æœ‰èƒŒæ™¯è‰²æ—¶**ï¼šå¤–æ¡†æ˜¾ç¤ºèƒŒæ™¯è‰²ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
- **æœ‰èƒŒæ™¯å›¾æ—¶**ï¼šå›¾ç‰‡åœ¨å¤–æ¡†ä¸­æ˜¾ç¤ºï¼Œè‡ªé€‚åº”æ¨¡å—ä¸é®æŒ¡
- **ç™½è‰²èƒŒæ™¯æ—¶**ï¼šå¤–æ¡†é€æ˜ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜ï¼Œæ•´ä½“é€æ˜
- **æ— æ¨¡å—å†…å®¹æ—¶**ï¼šåªæœ‰å¤–æ¡†ï¼ŒèƒŒæ™¯è®¾ç½®æ­£å¸¸

### éªŒè¯ç»“æœ

#### æ„å»ºçŠ¶æ€
- âœ… **TypeScriptç¼–è¯‘**ï¼šæ— é”™è¯¯
- âœ… **æ„å»ºæˆåŠŸ**ï¼šäº§ç‰©å®Œæ•´
- âœ… **é€»è¾‘ç®€åŒ–**ï¼šèƒŒæ™¯è®¾ç½®é€»è¾‘æ›´æ¸…æ™°
- âœ… **å‘åå…¼å®¹**ï¼šè§†è§‰æ•ˆæœä¿æŒä¸€è‡´

#### æµ‹è¯•åœºæ™¯
- ğŸ§ª **çº¯è‰²èƒŒæ™¯**ï¼šå¤–æ¡†èƒŒæ™¯è‰²ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
- ğŸ§ª **èƒŒæ™¯å›¾ç‰‡**ï¼šå›¾ç‰‡æ˜¾ç¤ºæ­£å¸¸ï¼Œæ¨¡å—ä¸é®æŒ¡
- ğŸ§ª **ç™½è‰²èƒŒæ™¯**ï¼šæ•´ä½“é€æ˜ï¼Œæ— å¤šä½™èƒŒæ™¯
- ğŸ§ª **æ··åˆèƒŒæ™¯**ï¼šè‰²å½©+å›¾ç‰‡å±‚æ¬¡æ¸…æ™°

### æŠ€æœ¯è¦ç‚¹

#### ğŸ”§ **è®¾è®¡åŸåˆ™**
- **å•ä¸€èŒè´£**ï¼šå¤–æ¡†è´Ÿè´£èƒŒæ™¯ï¼Œè‡ªé€‚åº”æ¨¡å—è´Ÿè´£å†…å®¹å¸ƒå±€
- **å±‚æ¬¡åˆ†ç¦»**ï¼šèƒŒæ™¯å±‚ä¸å†…å®¹å±‚æ˜ç¡®åˆ†ç¦»
- **é€»è¾‘ç»Ÿä¸€**ï¼šæ— è®ºä½•ç§æƒ…å†µï¼ŒèƒŒæ™¯é€»è¾‘ä¿æŒä¸€è‡´

#### ğŸ›¡ï¸ **å®¹é”™å¤„ç†**
- **ç©ºå€¼å®‰å…¨**ï¼šèƒŒæ™¯é¢œè‰²è®¾ç½®åŒ…å«é»˜è®¤å€¼å¤„ç†
- **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptç¡®ä¿ç±»å‹æ­£ç¡®
- **æ—¥å¿—å®Œå–„**ï¼šè¯¦ç»†è®°å½•èƒŒæ™¯è®¾ç½®çŠ¶æ€

#### ğŸ“ **æ—¥å¿—ä¼˜åŒ–**
- **çŠ¶æ€è·Ÿè¸ª**ï¼šæ¸…æ™°è®°å½•èƒŒæ™¯è®¾ç½®è¿‡ç¨‹
- **è°ƒè¯•æ”¯æŒ**ï¼šæä¾›è¯¦ç»†çš„èƒŒæ™¯è®¾ç½®ä¿¡æ¯
- **ç”¨æˆ·åé¦ˆ**ï¼šé€šè¿‡æ—¥å¿—äº†è§£èƒŒæ™¯å¤„ç†çŠ¶æ€

**è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯å¡«å……ä¼˜åŒ–å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolså…·å¤‡äº†æ›´æ¸…æ™°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„ï¼Œè‡ªé€‚åº”æ¨¡å—å§‹ç»ˆé€æ˜ï¼ŒèƒŒæ™¯é¢œè‰²ç»Ÿä¸€åº”ç”¨åˆ°å¤–æ¡†ï¼Œå®ç°äº†æ›´ç®€æ´çš„é€»è¾‘å’Œæ›´å¥½çš„è§†è§‰æ•ˆæœï¼ 

## 2024-12-19 - ç¾½åŒ–è’™ç‰ˆç»„åæ ‡ç³»ç»Ÿé—®é¢˜æ ¹æœ¬ä¿®å¤ ğŸ¯ğŸ”§

### é—®é¢˜èƒŒæ™¯
ç”¨æˆ·åé¦ˆç¾½åŒ–è’™ç‰ˆç»„ä¾ç„¶æ²¡æœ‰æ­£ç¡®å±…ä¸­ï¼Œé€šè¿‡MCPå·¥å…·æŸ¥è¯¢Figma Plugin APIæ–‡æ¡£å‘ç°äº†åæ ‡ç³»ç»Ÿçš„æ ¹æœ¬é—®é¢˜ã€‚

### ğŸ” æ ¹æœ¬åŸå› å‘ç°
é€šè¿‡æŸ¥è¯¢Figma Plugin APIå®˜æ–¹æ–‡æ¡£ï¼Œå‘ç°äº†**Container Parentï¼ˆå®¹å™¨çˆ¶çº§ï¼‰**çš„é‡è¦æ¦‚å¿µï¼š

> **Container parent**: The relative transform of a node is shown relative to its container parent, which includes canvas nodes, frame nodes, component nodes, and instance nodes. Just like in the properties panel, it is **not** relative to its direct parent if the parent is a group or a boolean operation.

**å…³é”®å‘ç°**ï¼š
- **ç»„ï¼ˆGroupï¼‰ä¸æ˜¯å®¹å™¨çˆ¶çº§**ï¼šç»„å†…å­å…ƒç´ çš„åæ ‡ä¸æ˜¯ç›¸å¯¹äºç»„ï¼Œè€Œæ˜¯ç›¸å¯¹äºåŒ…å«è¯¥ç»„çš„å®¹å™¨çˆ¶çº§
- **å¤´å›¾ç»„æ˜¯Groupç±»å‹**ï¼šæ‰€ä»¥ç¾½åŒ–è’™ç‰ˆç»„çš„åæ ‡å®é™…ä¸Šæ˜¯ç›¸å¯¹äºåŒ…å«å¤´å›¾ç»„çš„å®¹å™¨
- **ä¹‹å‰çš„å±…ä¸­è®¡ç®—å®Œå…¨é”™è¯¯**ï¼šæˆ‘ä»¬æŒ‰ç…§ç›¸å¯¹äºå¤´å›¾ç»„çš„é€»è¾‘æ¥è®¡ç®—ï¼Œä½†åæ ‡ç³»ç»Ÿæ ¹æœ¬ä¸æ˜¯è¿™æ ·å·¥ä½œçš„

### ğŸš¨ é—®é¢˜åˆ†æ
```
é”™è¯¯ç†è§£çš„åæ ‡ç³»ç»Ÿï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (Group, x: 0)
   â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (x: -120.5) â† ä»¥ä¸ºæ˜¯ç›¸å¯¹äºå¤´å›¾ç»„
   â””â”€ å¤´å›¾èŠ‚ç‚¹ (x: 0) â† ä»¥ä¸ºæ˜¯ç›¸å¯¹äºå¤´å›¾ç»„

å®é™…çš„åæ ‡ç³»ç»Ÿï¼š
é¡µé¢ (Container Parent)
â”œâ”€ å¤´å›¾ç»„ (Group, x: 0) â† ä¸æ˜¯å®¹å™¨çˆ¶çº§
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (x: -120.5) â† å®é™…ç›¸å¯¹äºé¡µé¢ï¼
â””â”€ å¤´å›¾èŠ‚ç‚¹ (x: 0) â† å®é™…ç›¸å¯¹äºé¡µé¢ï¼
```

### âœ… ä¿®å¤æ–¹æ¡ˆ
**ä¿®æ”¹æ–‡ä»¶**ï¼š`src/core/builders/module-builders.ts`

**ä¿®å¤é€»è¾‘**ï¼š
```typescript
// ğŸš¨ é‡è¦ä¿®æ­£ï¼šæ ¹æ®Figma APIæ–‡æ¡£ï¼Œç»„ï¼ˆGroupï¼‰ä¸æ˜¯"å®¹å™¨çˆ¶çº§"
// ç»„å†…å…ƒç´ çš„åæ ‡æ˜¯ç›¸å¯¹äºåŒ…å«è¯¥ç»„çš„å®¹å™¨çˆ¶çº§ï¼Œè€Œä¸æ˜¯ç›¸å¯¹äºç»„æœ¬èº«

// ç¾½åŒ–è’™ç‰ˆç»„çš„ç»å¯¹ä½ç½®åº”è¯¥æ˜¯ï¼šå¤´å›¾ç»„ä½ç½® + ç»„å†…å±…ä¸­åç§»
const headerGroupX = originalX; // å¤´å›¾ç»„åœ¨å®¹å™¨ä¸­çš„Xä½ç½®
const centerOffset = (originalWidth - rectWidth) / 2; // å±…ä¸­åç§»é‡

// ç¾½åŒ–è’™ç‰ˆç»„çš„æœ€ç»ˆä½ç½®
featherMaskGroup.x = headerGroupX + centerOffset; // ç»å¯¹ä½ç½®ï¼šç»„ä½ç½® + å±…ä¸­åç§»
featherMaskGroup.y = originalY - blurRadius; // ç»å¯¹ä½ç½®ï¼šç»„ä½ç½® + Yåç§»

// å¤´å›¾èŠ‚ç‚¹åœ¨å¤´å›¾ç»„å†…çš„ä½ç½®ï¼ˆç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›¸å¯¹äºç»„ï¼‰
headerNode.x = originalX; // ä¿æŒåŸå§‹Xä½ç½®
headerNode.y = originalY; // ä¿æŒåŸå§‹Yä½ç½®
```

### ğŸ“Š ä¿®å¤æ•ˆæœå¯¹æ¯”
```
ä¿®å¤å‰ï¼ˆé”™è¯¯åæ ‡ç³»ç»Ÿï¼‰ï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (1080px, x: 0)
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (1321px, x: -120.5) â† ç›¸å¯¹äºé¡µé¢ï¼Œå¯¼è‡´åç§»
â””â”€ å¤´å›¾èŠ‚ç‚¹ (1080px, x: 0)

ä¿®å¤åï¼ˆæ­£ç¡®åæ ‡ç³»ç»Ÿï¼‰ï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (1080px, x: 0)
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (1321px, x: 0 + (-120.5) = -120.5) â† æ­£ç¡®çš„ç»å¯¹ä½ç½®
â””â”€ å¤´å›¾èŠ‚ç‚¹ (1080px, x: 0)
```

### ğŸ¯ æŠ€æœ¯å­¦ä¹ 
**Figmaåæ ‡ç³»ç»Ÿçš„é‡è¦æ¦‚å¿µ**ï¼š
1. **å®¹å™¨çˆ¶çº§**ï¼šåªæœ‰Canvasã€Frameã€Componentã€Instanceæ˜¯å®¹å™¨çˆ¶çº§
2. **ç»„å’Œå¸ƒå°”è¿ç®—**ï¼šä¸æ˜¯å®¹å™¨çˆ¶çº§ï¼Œå…¶å­å…ƒç´ åæ ‡ç›¸å¯¹äºæ›´ä¸Šå±‚çš„å®¹å™¨
3. **ç›¸å¯¹å˜æ¢**ï¼š`relativeTransform`æ€»æ˜¯ç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›´æ¥çˆ¶çº§
4. **ç»„çš„ç‰¹æ®Šæ€§**ï¼šç»„ä¼šè‡ªåŠ¨è°ƒæ•´å¤§å°ä»¥é€‚åº”å…¶å†…å®¹ï¼Œä½ç½®ç”±å­å…ƒç´ å†³å®š

### ğŸ“š å‚è€ƒæ–‡æ¡£
- **Figma Plugin API - relativeTransform**: https://www.figma.com/plugin-docs/api/properties/nodes-relativetransform/
- **Figma Plugin API - GroupNode**: https://www.figma.com/plugin-docs/api/GroupNode/
- **Container Parentæ¦‚å¿µ**ï¼šç»„å’Œå¸ƒå°”è¿ç®—ä¸æ˜¯å®¹å™¨çˆ¶çº§çš„é‡è¦è¯´æ˜

### ğŸ”§ æ„å»ºéªŒè¯

è¿è¡Œ `npm run build` éªŒè¯ä¿®å¤æ•ˆæœï¼š

**æ„å»ºç»“æœ**ï¼š
- âœ… **TypeScriptç¼–è¯‘**ï¼šæˆåŠŸç¼–è¯‘ï¼Œæœ‰ä¸€äº›é¢„æœŸçš„è­¦å‘Šï¼ˆlocalStorageã€windowç­‰åœ¨æ’ä»¶ç¯å¢ƒä¸­çš„ç±»å‹é—®é¢˜ï¼‰
- âœ… **æ’ä»¶æ„å»º**ï¼š`dist/plugin/code-standalone.js` ç”ŸæˆæˆåŠŸ
- âœ… **UIæ„å»º**ï¼š`dist/ui.html` (192.9KB) ç”ŸæˆæˆåŠŸï¼ŒCSSå’ŒJSå®Œå…¨å†…è”
- âœ… **æ ¸å¿ƒåº“æ„å»º**ï¼šæ¨¡å—åŒ–æ„å»ºå®Œæˆ
- âœ… **æ²™ç›’é€‚é…**ï¼šç¬¦åˆFigmaæ’ä»¶å®‰å…¨ç­–ç•¥

**æ„å»ºäº§ç‰©**ï¼š
```
dist/
â”œâ”€â”€ core/ (æ ¸å¿ƒåº“æ¨¡å—)
â”œâ”€â”€ plugin/ (æ’ä»¶ä¸»ç¨‹åº)
â””â”€â”€ ui.html (192.9KB, å®Œå…¨å†…è”ç‰ˆæœ¬)
```

### ğŸ¯ ä¿®å¤æ€»ç»“

**å…³é”®å‘ç°**ï¼š
- **Container Parentæ¦‚å¿µ**ï¼šFigmaåæ ‡ç³»ç»Ÿçš„æ ¸å¿ƒåŸç†
- **ç»„ä¸æ˜¯å®¹å™¨çˆ¶çº§**ï¼šGroupã€BooleanOperationçš„å­å…ƒç´ åæ ‡ç›¸å¯¹äºæ›´ä¸Šå±‚çš„å®¹å™¨
- **ç›¸å¯¹å˜æ¢**ï¼š`relativeTransform`æ€»æ˜¯ç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›´æ¥çˆ¶çº§

**ä¿®å¤æ•ˆæœ**ï¼š
- âœ… **åæ ‡è®¡ç®—æ­£ç¡®**ï¼šç¾½åŒ–è’™ç‰ˆç»„ä½ç½®åŸºäºæ­£ç¡®çš„åæ ‡ç³»ç»Ÿ
- âœ… **è§„èŒƒæ›´æ–°**ï¼šå°†é‡è¦è§„åˆ™æ·»åŠ åˆ°é¡¹ç›®å¼€å‘è§„èŒƒä¸­
- âœ… **æ–‡æ¡£å®Œå–„**ï¼šè¯¦ç»†è®°å½•é—®é¢˜å‘ç°å’Œè§£å†³è¿‡ç¨‹
- âœ… **çŸ¥è¯†ç§¯ç´¯**ï¼šä¸ºå›¢é˜Ÿæä¾›å®è´µçš„Figma APIä½¿ç”¨ç»éªŒ

**è§„èŒƒæ›´æ–°**ï¼š
- ğŸ“š **Figmaå¼€å‘è§„èŒƒ**ï¼šæ·»åŠ åæ ‡ç³»ç»Ÿå’ŒContainer Parentè§„åˆ™
- ğŸ“‹ **å¼€å‘æ£€æŸ¥æ¸…å•**ï¼šå¢åŠ åæ ‡è®¡ç®—éªŒè¯é¡¹
- ğŸ”— **å®˜æ–¹æ–‡æ¡£å¼•ç”¨**ï¼šæä¾›æƒå¨å‚è€ƒé“¾æ¥

**ç¾½åŒ–è’™ç‰ˆç»„åæ ‡ç³»ç»Ÿé—®é¢˜æ ¹æœ¬ä¿®å¤å®Œæˆï¼** ğŸ‰

è¿™æ¬¡ä¿®å¤ä¸ä»…è§£å†³äº†å…·ä½“çš„ä½ç½®é—®é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯ï¼š
- ğŸ§  **æ·±å…¥ç†è§£**ï¼šæŒæ¡äº†Figmaåæ ‡ç³»ç»Ÿçš„æ ¸å¿ƒæ¦‚å¿µ
- ğŸ“– **æ–‡æ¡£ç ”ç©¶**ï¼šé€šè¿‡MCPå·¥å…·æŸ¥è¯¢å®˜æ–¹APIæ–‡æ¡£æ‰¾åˆ°æ ¹æœ¬åŸå› 
- ğŸ›¡ï¸ **è§„èŒƒå»ºç«‹**ï¼šå°†é‡è¦è§„åˆ™çº³å…¥é¡¹ç›®å¼€å‘è§„èŒƒ
- ğŸ”„ **çŸ¥è¯†ä¼ æ‰¿**ï¼šä¸ºæœªæ¥çš„å¼€å‘å·¥ä½œæä¾›æŒ‡å¯¼

ç°åœ¨H5Toolsé¡¹ç›®å…·å¤‡äº†æ›´ä¸“ä¸šçš„Figmaæ’ä»¶å¼€å‘èƒ½åŠ›ï¼

**ä»£ç ä¸€è‡´æ€§ä¿®æ­£å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolsçš„å®é™…è¿è¡Œä»£ç ä¸åŸå§‹è®¾è®¡ä¿æŒå®Œå…¨ä¸€è‡´ï¼Œç¡®ä¿äº†è®¾è®¡æ„å›¾çš„å‡†ç¡®å®ç°å’Œä»£ç çš„å¯ç»´æŠ¤æ€§ï¼ 

## 2024-12-19 - è‡ªé€‚åº”æ¨¡å—æ¡ä»¶åˆ›å»ºä¼˜åŒ– ğŸ¯ğŸ“¦

### èƒŒæ™¯
ç”¨æˆ·è¦æ±‚ä¸ºè‡ªé€‚åº”æ¨¡å—æ·»åŠ æ¡ä»¶åˆ¤æ–­ï¼Œå½“æ²¡æœ‰æ¨¡å—å†…å®¹æ—¶è·³è¿‡è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„åˆ›å»ºï¼Œä»¥ä¼˜åŒ–H5åŸå‹çš„ç»“æ„å’Œæ€§èƒ½ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **åŸæœ‰é€»è¾‘é—®é¢˜**
- **æ— æ¡ä»¶åˆ›å»º**ï¼šæ— è®ºæ˜¯å¦æœ‰æ¨¡å—å†…å®¹ï¼Œéƒ½ä¼šåˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç©ºå®¹å™¨å­˜åœ¨**ï¼šå½“ç”¨æˆ·åªè®¾ç½®èƒŒæ™¯å›¾ç‰‡è€Œæ²¡æœ‰ä»»ä½•æ¨¡å—å†…å®¹æ—¶ï¼Œä»ä¼šåˆ›å»ºç©ºçš„è‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç»“æ„å†—ä½™**ï¼šç©ºçš„è‡ªé€‚åº”æ¨¡å—å®¹å™¨ä¼šå¢åŠ ä¸å¿…è¦çš„èŠ‚ç‚¹å±‚çº§
- **æ€§èƒ½æµªè´¹**ï¼šæ— æ„ä¹‰çš„å®¹å™¨åˆ›å»ºå’Œå¸ƒå±€è®¡ç®—

#### ğŸ¯ **ä¼˜åŒ–ç›®æ ‡**
- **æ™ºèƒ½åˆ¤æ–­**ï¼šæ ¹æ®é…ç½®å†…å®¹æ™ºèƒ½å†³å®šæ˜¯å¦åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç»“æ„ç²¾ç®€**ï¼šæ²¡æœ‰æ¨¡å—å†…å®¹æ—¶ç›´æ¥ä½¿ç”¨å¤–æ¡†ä½œä¸ºå®¹å™¨
- **æ€§èƒ½æå‡**ï¼šé¿å…ä¸å¿…è¦çš„èŠ‚ç‚¹åˆ›å»ºå’Œå¸ƒå±€è®¡ç®—
- **é€»è¾‘æ¸…æ™°**ï¼šä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤

### ä¿®æ”¹å®æ–½

#### 1. **æ–°å¢å†…å®¹æ£€æµ‹æ–¹æ³•**
**æ–‡ä»¶**: `src/core/builders/h5-prototype-builder.ts`

```typescript
/**
 * æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•æ¨¡å—å†…å®¹éœ€è¦åˆ›å»º
 * @returns boolean å¦‚æœæœ‰ä»»ä½•æ¨¡å—å†…å®¹è¿”å›trueï¼Œå¦åˆ™è¿”å›false
 */
private hasAnyModuleContent(): boolean {
  // æ£€æŸ¥å¤´éƒ¨æ¨¡å—å†…å®¹
  const hasHeaderContent = !!(this.config.headerImage || this.config.titleUpload);
  
  // æ£€æŸ¥æ¸¸æˆä¿¡æ¯æ¨¡å—å†…å®¹
  const hasGameInfoContent = !!(this.config.gameName || this.config.gameDesc || this.config.gameIcon);
  
  // æ£€æŸ¥è‡ªå®šä¹‰æ¨¡å—å†…å®¹
  const hasCustomModules = !!(this.config.modules && this.config.modules.length > 0);
  
  // æ£€æŸ¥è§„åˆ™æ¨¡å—å†…å®¹
  const hasRulesTitle = this.config.rulesTitle && this.config.rulesTitle.trim() !== '';
  const hasRulesBgImage = this.config.rulesBgImage !== null && this.config.rulesBgImage !== undefined;
  const hasRulesContent = this.config.rulesContent && this.config.rulesContent.trim() !== '';
  const hasRulesContent_any = hasRulesTitle || hasRulesBgImage || hasRulesContent;
  
  // æ£€æŸ¥åº•éƒ¨æ¨¡å—å†…å®¹
  const hasFooterContent = !!(this.config.footerLogo || this.config.footerBg);
  
  // å¦‚æœæœ‰ä»»ä½•æ¨¡å—å†…å®¹ï¼Œè¿”å›true
  return hasHeaderContent || hasGameInfoContent || hasCustomModules || hasRulesContent_any || hasFooterContent;
}
```

#### 2. **æ¡ä»¶åŒ–æ¡†æ¶åˆ›å»º**
```typescript
private createBaseFrames(): void {
  // 1. H5åŸå‹å®¹å™¨ä¸éœ€è¦åº”ç”¨è‡ªåŠ¨å¸ƒå±€ï¼Œåªæ˜¯ä¸€ä¸ªç”»æ¿ï¼Œå¹¶è®¾ç½®å†…å®¹è£å‰ª
  this.outerFrame = NodeUtils.createFrame('H5åŸå‹', CONSTANTS.H5_WIDTH, 100);
  this.outerFrame.layoutMode = "NONE"; // ä¸ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€
  this.outerFrame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
  
  // 2. åªæœ‰å½“æœ‰æ¨¡å—å†…å®¹æ—¶æ‰åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
  if (this.hasAnyModuleContent()) {
    this.h5Frame = NodeUtils.createFrame('è‡ªé€‚åº”æ¨¡å—', CONSTANTS.H5_WIDTH, 100);
    this.h5Frame.fills = [];
    
    // è®¾ç½®è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„è‡ªåŠ¨å¸ƒå±€
    NodeUtils.setupAutoLayout(this.h5Frame, 'VERTICAL', 0, 0);
    this.h5Frame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
    this.h5Frame.layoutWrap = "NO_WRAP"; // è®¾ç½®å¸ƒå±€ä¸æ¢è¡Œï¼Œç¡®ä¿æ‰€æœ‰å­å…ƒç´ åœ¨ä¸€åˆ—ä¸­å‚ç›´æ’åˆ—
    
    console.log('æ£€æµ‹åˆ°æ¨¡å—å†…å®¹ï¼Œå·²åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨');
  } else {
    console.log('æœªæ£€æµ‹åˆ°æ¨¡å—å†…å®¹ï¼Œè·³è¿‡è‡ªé€‚åº”æ¨¡å—å®¹å™¨åˆ›å»º');
  }
}
```

#### 3. **é€‚é…èƒŒæ™¯è®¾ç½®é€»è¾‘**
```typescript
private async setupBackground(): Promise<void> {
  // å¦‚æœå­˜åœ¨è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè®¾ç½®å…¶èƒŒæ™¯é¢œè‰²
  if (this.h5Frame) {
    // èƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°è‡ªé€‚åº”æ¨¡å—å®¹å™¨
    if (!isDefaultWhite) {
      const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
      this.h5Frame.fills = [colorFill];
    } else {
      this.h5Frame.fills = [];
    }
  } else {
    // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå°†èƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°å¤–æ¡†
    if (!isDefaultWhite) {
      const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
      this.outerFrame.fills = [colorFill];
    } else {
      this.outerFrame.fills = [];
    }
  }
  
  // èƒŒæ™¯å›¾ç‰‡å¤„ç†é€»è¾‘ä¿æŒä¸å˜...
  
  // è®¾ç½®å®ŒèƒŒæ™¯ä¹‹åï¼Œå¦‚æœå­˜åœ¨è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå°†å…¶æ·»åŠ ä¸ºH5åŸå‹å®¹å™¨çš„å­å…ƒç´ 
  if (this.h5Frame) {
    NodeUtils.safeAppendChild(this.outerFrame, this.h5Frame, 'H5è‡ªé€‚åº”æ¨¡å—å®¹å™¨æ·»åŠ ');
  }
}
```

#### 4. **é€‚é…æ¨¡å—æ·»åŠ é€»è¾‘**
```typescript
private async addModules(): Promise<void> {
  // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè¯´æ˜æ²¡æœ‰æ¨¡å—å†…å®¹ï¼Œç›´æ¥è¿”å›
  if (!this.h5Frame) {
    console.log('æ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè·³è¿‡æ¨¡å—æ·»åŠ ');
    return;
  }
  
  // åˆ›å»ºæ‰€æœ‰æ¨¡å—
  const modules = await this.createAllModules();
  
  // æ‰¹é‡å®‰å…¨æ·»åŠ æ¨¡å—åˆ°H5ç”»æ¿ä¸­
  NodeUtils.safeBatchAppendChildren(this.h5Frame, modules, 'H5æ¨¡å—æ‰¹é‡æ·»åŠ ');
}
```

#### 5. **é€‚é…æœ€ç»ˆå¸ƒå±€é€»è¾‘**
```typescript
private finalizeLayout(): void {
  // è°ƒæ•´H5åŸå‹å®¹å™¨é«˜åº¦
  if (this.h5Frame) {
    // å¦‚æœæœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè°ƒæ•´ä¸ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨é«˜åº¦
    this.outerFrame.resize(CONSTANTS.H5_WIDTH, this.h5Frame.height);
    // æ¨¡å—å®¹å™¨å±‚çº§è°ƒæ•´é€»è¾‘...
  } else {
    // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè®¾ç½®ä¸€ä¸ªæœ€å°é«˜åº¦æˆ–æ ¹æ®èƒŒæ™¯å›¾ç‰‡è°ƒæ•´
    let finalHeight = 100; // é»˜è®¤æœ€å°é«˜åº¦
    
    // å¦‚æœæœ‰èƒŒæ™¯å›¾ç‰‡ï¼Œæ ¹æ®èƒŒæ™¯å›¾ç‰‡é«˜åº¦è°ƒæ•´
    if (this.config.pageBgImage) {
      const bgImageNode = this.outerFrame.findOne(node => node.name === 'é¡µé¢èƒŒæ™¯å›¾ç‰‡');
      if (bgImageNode && 'height' in bgImageNode) {
        finalHeight = Math.max(finalHeight, bgImageNode.height);
      }
    }
    
    this.outerFrame.resize(CONSTANTS.H5_WIDTH, finalHeight);
    console.log(`æ²¡æœ‰æ¨¡å—å†…å®¹ï¼ŒH5åŸå‹è®¾ç½®ä¸ºæœ€å°é«˜åº¦: ${finalHeight}px`);
  }
}
```

### ä¼˜åŒ–æ•ˆæœ

#### ğŸ¯ **æ™ºèƒ½æ£€æµ‹èŒƒå›´**
| æ¨¡å—ç±»å‹ | æ£€æµ‹æ¡ä»¶ | ç¤ºä¾‹ |
|----------|----------|------|
| **å¤´éƒ¨æ¨¡å—** | `headerImage \|\| titleUpload` | å¤´éƒ¨å›¾ç‰‡æˆ–æ ‡é¢˜ä¸Šä¼  |
| **æ¸¸æˆä¿¡æ¯æ¨¡å—** | `gameName \|\| gameDesc \|\| gameIcon` | æ¸¸æˆåç§°ã€æè¿°æˆ–å›¾æ ‡ |
| **è‡ªå®šä¹‰æ¨¡å—** | `modules && modules.length > 0` | è‡ªå®šä¹‰æ¨¡å—æ•°ç»„éç©º |
| **è§„åˆ™æ¨¡å—** | `rulesTitle \|\| rulesBgImage \|\| rulesContent` | è§„åˆ™æ ‡é¢˜ã€èƒŒæ™¯å›¾æˆ–å†…å®¹ |
| **åº•éƒ¨æ¨¡å—** | `footerLogo \|\| footerBg` | åº•éƒ¨Logoæˆ–èƒŒæ™¯ |

#### ğŸ“Š **ç»“æ„å¯¹æ¯”**

**æœ‰æ¨¡å—å†…å®¹æ—¶**ï¼š
```
H5åŸå‹ (1080xåŠ¨æ€é«˜åº¦, æ— èƒŒæ™¯, layoutMode="NONE")
â”œâ”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰)
â””â”€â”€ è‡ªé€‚åº”æ¨¡å— (1080xåŠ¨æ€é«˜åº¦, é…ç½®èƒŒæ™¯è‰², è‡ªåŠ¨å¸ƒå±€)
    â”œâ”€â”€ å¤´éƒ¨æ¨¡å— (å¯é€‰)
    â”œâ”€â”€ æ¸¸æˆä¿¡æ¯æ¨¡å— (å¯é€‰) 
    â”œâ”€â”€ è‡ªå®šä¹‰æ¨¡å—... (å¯é€‰)
    â”œâ”€â”€ è§„åˆ™æ¨¡å— (å¯é€‰)
    â””â”€â”€ åº•éƒ¨æ¨¡å— (å¯é€‰)
```

**æ— æ¨¡å—å†…å®¹æ—¶**ï¼š
```
H5åŸå‹ (1080xèƒŒæ™¯å›¾é«˜åº¦æˆ–100px, é…ç½®èƒŒæ™¯è‰², layoutMode="NONE")
â””â”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰)
```

#### ğŸš€ **æ€§èƒ½æå‡**
- **èŠ‚ç‚¹å‡å°‘**ï¼šæ— å†…å®¹æ—¶å‡å°‘1ä¸ªå®¹å™¨èŠ‚ç‚¹
- **å¸ƒå±€ç®€åŒ–**ï¼šé¿å…ä¸å¿…è¦çš„è‡ªåŠ¨å¸ƒå±€è®¡ç®—
- **å†…å­˜ä¼˜åŒ–**ï¼šå‡å°‘ç©ºå®¹å™¨çš„å†…å­˜å ç”¨
- **æ¸²æŸ“æ•ˆç‡**ï¼šå‡å°‘Figmaæ¸²æŸ“å±‚çº§

#### ğŸ” **ç”¨æˆ·ä½“éªŒæ”¹è¿›**
- **ç»“æ„æ¸…æ™°**ï¼šåªæœ‰èƒŒæ™¯å›¾ç‰‡æ—¶ç»“æ„æ›´ç®€æ´
- **æ€§èƒ½æ›´å¥½**ï¼šå‡å°‘ä¸å¿…è¦çš„èŠ‚ç‚¹æ“ä½œ
- **è°ƒè¯•å‹å¥½**ï¼šæ§åˆ¶å°æ—¥å¿—æ¸…æ™°æ˜¾ç¤ºåˆ›å»ºçŠ¶æ€
- **é€»è¾‘åˆç†**ï¼šç¬¦åˆç”¨æˆ·æœŸæœ›çš„è¡Œä¸º

### éªŒè¯ç»“æœ

#### æ„å»ºçŠ¶æ€
- âœ… **TypeScriptç¼–è¯‘**ï¼šæ— é”™è¯¯
- âœ… **æ„å»ºæˆåŠŸ**ï¼šäº§ç‰©å®Œæ•´
- âœ… **åŠŸèƒ½å®Œæ•´**ï¼šæ‰€æœ‰æ¨¡å—æ£€æµ‹é€»è¾‘æ­£å¸¸å·¥ä½œ
- âœ… **å‘åå…¼å®¹**ï¼šç°æœ‰åŠŸèƒ½ä¿æŒä¸å˜

#### æµ‹è¯•åœºæ™¯
- ğŸ§ª **çº¯èƒŒæ™¯åœºæ™¯**ï¼šåªæœ‰èƒŒæ™¯å›¾ç‰‡/é¢œè‰²ï¼Œæ— æ¨¡å—å†…å®¹
- ğŸ§ª **éƒ¨åˆ†æ¨¡å—åœºæ™¯**ï¼šåªæœ‰éƒ¨åˆ†æ¨¡å—å†…å®¹
- ğŸ§ª **å®Œæ•´æ¨¡å—åœºæ™¯**ï¼šåŒ…å«æ‰€æœ‰ç±»å‹æ¨¡å—å†…å®¹
- ğŸ§ª **ç©ºé…ç½®åœºæ™¯**ï¼šå®Œå…¨ç©ºçš„é…ç½®

### æŠ€æœ¯è¦ç‚¹

#### ğŸ”§ **æ£€æµ‹é€»è¾‘è®¾è®¡**
- **å…¨é¢è¦†ç›–**ï¼šæ£€æµ‹æ‰€æœ‰å¯èƒ½çš„æ¨¡å—ç±»å‹
- **ç²¾ç¡®åˆ¤æ–­**ï¼šä½¿ç”¨ä¸¥æ ¼çš„éç©ºå’Œéç©ºå­—ç¬¦ä¸²æ£€æŸ¥
- **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨çŸ­è·¯é€»è¾‘æé«˜æ£€æµ‹æ•ˆç‡

#### ğŸ›¡ï¸ **å®¹é”™å¤„ç†**
- **ç©ºå€¼å®‰å…¨**ï¼šæ‰€æœ‰æ£€æŸ¥éƒ½åŒ…å«ç©ºå€¼å¤„ç†
- **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptç±»å‹æ£€æŸ¥ç¡®ä¿å®‰å…¨
- **é™çº§å¤„ç†**ï¼šæ£€æµ‹å¤±è´¥æ—¶é‡‡ç”¨ä¿å®ˆç­–ç•¥ï¼ˆåˆ›å»ºå®¹å™¨ï¼‰

#### ğŸ“ **æ—¥å¿—å®Œå–„**
- **çŠ¶æ€è·Ÿè¸ª**ï¼šæ¸…æ™°è®°å½•å®¹å™¨åˆ›å»ºçŠ¶æ€
- **è°ƒè¯•æ”¯æŒ**ï¼šæä¾›è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
- **ç”¨æˆ·åé¦ˆ**ï¼šé€šè¿‡æ—¥å¿—äº†è§£æ’ä»¶è¡Œä¸º

**è‡ªé€‚åº”æ¨¡å—æ¡ä»¶åˆ›å»ºä¼˜åŒ–å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolså…·å¤‡äº†æ™ºèƒ½çš„æ¨¡å—æ£€æµ‹èƒ½åŠ›ï¼Œèƒ½å¤Ÿæ ¹æ®å®é™…å†…å®¹éœ€æ±‚åŠ¨æ€å†³å®šæ˜¯å¦åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå®ç°äº†æ›´ç²¾ç®€çš„ç»“æ„å’Œæ›´å¥½çš„æ€§èƒ½ï¼ 

## 2024-12-19 - è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯å¡«å……ä¼˜åŒ– ğŸ¨ğŸ“¦

### èƒŒæ™¯
ç”¨æˆ·è¦æ±‚å°†è‡ªé€‚åº”æ¨¡å—çš„èƒŒæ™¯å¡«å……æ”¹ä¸ºå§‹ç»ˆé€æ˜å¡«å……ï¼Œä»¥ä¼˜åŒ–H5åŸå‹çš„è§†è§‰å±‚æ¬¡å’ŒèƒŒæ™¯å¤„ç†é€»è¾‘ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **åŸæœ‰èƒŒæ™¯é€»è¾‘é—®é¢˜**
- **åŒé‡èƒŒæ™¯è®¾ç½®**ï¼šèƒŒæ™¯é¢œè‰²å¯èƒ½åŒæ—¶åº”ç”¨åˆ°å¤–æ¡†å’Œè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **é€»è¾‘å¤æ‚**ï¼šæ ¹æ®æ˜¯å¦æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨æ¥å†³å®šèƒŒæ™¯åº”ç”¨ä½ç½®
- **è§†è§‰å†—ä½™**ï¼šè‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„èƒŒæ™¯å¯èƒ½ä¸å¤–æ¡†èƒŒæ™¯é‡å 
- **å±‚æ¬¡ä¸æ¸…**ï¼šèƒŒæ™¯å±‚æ¬¡å…³ç³»ä¸å¤Ÿæ˜ç¡®

#### ğŸ¯ **ä¼˜åŒ–ç›®æ ‡**
- **ç®€åŒ–é€»è¾‘**ï¼šè‡ªé€‚åº”æ¨¡å—å®¹å™¨å§‹ç»ˆé€æ˜ï¼ŒèƒŒæ™¯é¢œè‰²å§‹ç»ˆåº”ç”¨åˆ°å¤–æ¡†
- **æ¸…æ™°å±‚æ¬¡**ï¼šå»ºç«‹æ¸…æ™°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„
- **é¿å…å†—ä½™**ï¼šæ¶ˆé™¤é‡å¤çš„èƒŒæ™¯è®¾ç½®
- **æå‡æ€§èƒ½**ï¼šå‡å°‘ä¸å¿…è¦çš„èƒŒæ™¯è®¡ç®—å’Œæ¸²æŸ“

### ä¿®æ”¹å®æ–½

#### **èƒŒæ™¯è®¾ç½®é€»è¾‘é‡æ„**
**æ–‡ä»¶**: `src/core/builders/h5-prototype-builder.ts`

**ä¿®æ”¹å‰**ï¼š
```typescript
// å¤æ‚çš„æ¡ä»¶åˆ¤æ–­é€»è¾‘
if (this.h5Frame) {
  // æ ¹æ®é¢œè‰²åˆ¤æ–­æ˜¯å¦è®¾ç½®è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯
  if (!isDefaultWhite) {
    const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
    this.h5Frame.fills = [colorFill];
  } else {
    this.h5Frame.fills = [];
  }
} else {
  // æ²¡æœ‰è‡ªé€‚åº”æ¨¡å—æ—¶æ‰è®¾ç½®å¤–æ¡†èƒŒæ™¯
  if (!isDefaultWhite) {
    const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
    this.outerFrame.fills = [colorFill];
  } else {
    this.outerFrame.fills = [];
  }
}
```

**ä¿®æ”¹å**ï¼š
```typescript
// ç®€åŒ–çš„èƒŒæ™¯è®¾ç½®é€»è¾‘
// è‡ªé€‚åº”æ¨¡å—å®¹å™¨å§‹ç»ˆè®¾ç½®ä¸ºé€æ˜å¡«å……
if (this.h5Frame) {
  this.h5Frame.fills = []; // å§‹ç»ˆé€æ˜
  console.log('è‡ªé€‚åº”æ¨¡å—å®¹å™¨è®¾ç½®ä¸ºé€æ˜å¡«å……');
}

// èƒŒæ™¯é¢œè‰²å§‹ç»ˆåº”ç”¨åˆ°å¤–æ¡†ï¼ˆH5åŸå‹å®¹å™¨ï¼‰
if (!isDefaultWhite) {
  const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
  this.outerFrame.fills = [colorFill];
  console.log(`H5åŸå‹å®¹å™¨èƒŒæ™¯è‰²è®¾ç½®ä¸º: ${this.config.pageBgColor}`);
} else {
  // ç™½è‰²æ—¶è®¾ç½®ä¸ºé€æ˜
  this.outerFrame.fills = [];
  console.log('H5åŸå‹å®¹å™¨èƒŒæ™¯è®¾ç½®ä¸ºé€æ˜ï¼ˆç™½è‰²ï¼‰');
}
```

### ä¼˜åŒ–æ•ˆæœ

#### ğŸ¨ **è§†è§‰å±‚æ¬¡ä¼˜åŒ–**

**æ–°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„**ï¼š
```
H5åŸå‹å®¹å™¨ (å¤–æ¡†)
â”œâ”€â”€ èƒŒæ™¯é¢œè‰² (pageBgColor) â† å§‹ç»ˆåœ¨è¿™é‡Œè®¾ç½®
â”œâ”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰) â† åœ¨å¤–æ¡†ä¸­
â””â”€â”€ è‡ªé€‚åº”æ¨¡å—å®¹å™¨ (å§‹ç»ˆé€æ˜) â† ä¸è®¾ç½®èƒŒæ™¯
    â”œâ”€â”€ å¤´éƒ¨æ¨¡å—
    â”œâ”€â”€ æ¸¸æˆä¿¡æ¯æ¨¡å—
    â”œâ”€â”€ è‡ªå®šä¹‰æ¨¡å—...
    â”œâ”€â”€ è§„åˆ™æ¨¡å—
    â””â”€â”€ åº•éƒ¨æ¨¡å—
```

#### ğŸ“Š **é€»è¾‘å¯¹æ¯”**

| æ–¹é¢ | ä¿®æ”¹å‰ | ä¿®æ”¹å | ä¼˜åŠ¿ |
|------|--------|--------|------|
| **èƒŒæ™¯è®¾ç½®ä½ç½®** | æ¡ä»¶åˆ¤æ–­ | å§‹ç»ˆå¤–æ¡† | é€»è¾‘ç»Ÿä¸€ |
| **è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯** | å¯èƒ½æœ‰èƒŒæ™¯ | å§‹ç»ˆé€æ˜ | è§†è§‰æ¸…æ™° |
| **ä»£ç å¤æ‚åº¦** | åŒé‡æ¡ä»¶åˆ¤æ–­ | å•ä¸€é€»è¾‘ | æ˜“ç»´æŠ¤ |
| **æ€§èƒ½** | å¤šæ¬¡èƒŒæ™¯è®¡ç®— | ä¸€æ¬¡è®¾ç½® | æ›´é«˜æ•ˆ |

#### ğŸš€ **æ€§èƒ½æå‡**
- **å‡å°‘èƒŒæ™¯è®¡ç®—**ï¼šåªéœ€è¦ä¸€æ¬¡èƒŒæ™¯é¢œè‰²è®¾ç½®
- **ç®€åŒ–æ¸²æŸ“**ï¼šé¿å…å¤šå±‚èƒŒæ™¯çš„é‡å æ¸²æŸ“
- **å†…å­˜ä¼˜åŒ–**ï¼šå‡å°‘èƒŒæ™¯å¡«å……å¯¹è±¡çš„åˆ›å»º
- **é€»è¾‘æ¸…æ™°**ï¼šä»£ç æ›´æ˜“ç†è§£å’Œç»´æŠ¤

#### ğŸ” **ç”¨æˆ·ä½“éªŒæ”¹è¿›**
- **è§†è§‰ä¸€è‡´æ€§**ï¼šèƒŒæ™¯é¢œè‰²å§‹ç»ˆåœ¨æœ€åº•å±‚
- **é€æ˜åº¦æ§åˆ¶**ï¼šè‡ªé€‚åº”æ¨¡å—é€æ˜ï¼Œä¸å½±å“èƒŒæ™¯æ˜¾ç¤º
- **è°ƒè¯•å‹å¥½**ï¼šæ¸…æ™°çš„æ—¥å¿—æ˜¾ç¤ºèƒŒæ™¯è®¾ç½®çŠ¶æ€
- **é¢„æœŸè¡Œä¸º**ï¼šç¬¦åˆç”¨æˆ·å¯¹èƒŒæ™¯å±‚æ¬¡çš„é¢„æœŸ

### åº”ç”¨åœºæ™¯

#### ğŸ¯ **é€‚ç”¨æƒ…å†µ**
1. **çº¯è‰²èƒŒæ™¯**ï¼šèƒŒæ™¯é¢œè‰²ç›´æ¥åº”ç”¨åˆ°å¤–æ¡†ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
2. **èƒŒæ™¯å›¾ç‰‡**ï¼šå›¾ç‰‡åœ¨å¤–æ¡†ä¸­ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜ä¸é®æŒ¡
3. **æ··åˆèƒŒæ™¯**ï¼šèƒŒæ™¯è‰²+èƒŒæ™¯å›¾ç‰‡ï¼Œå±‚æ¬¡æ¸…æ™°
4. **æ— èƒŒæ™¯å†…å®¹**ï¼šåªæœ‰è‡ªé€‚åº”æ¨¡å—æ—¶ï¼ŒèƒŒæ™¯é€»è¾‘ä¾ç„¶æ¸…æ™°

#### ğŸ“‹ **è§†è§‰æ•ˆæœ**
- **æœ‰èƒŒæ™¯è‰²æ—¶**ï¼šå¤–æ¡†æ˜¾ç¤ºèƒŒæ™¯è‰²ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
- **æœ‰èƒŒæ™¯å›¾æ—¶**ï¼šå›¾ç‰‡åœ¨å¤–æ¡†ä¸­æ˜¾ç¤ºï¼Œè‡ªé€‚åº”æ¨¡å—ä¸é®æŒ¡
- **ç™½è‰²èƒŒæ™¯æ—¶**ï¼šå¤–æ¡†é€æ˜ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜ï¼Œæ•´ä½“é€æ˜
- **æ— æ¨¡å—å†…å®¹æ—¶**ï¼šåªæœ‰å¤–æ¡†ï¼ŒèƒŒæ™¯è®¾ç½®æ­£å¸¸

### éªŒè¯ç»“æœ

#### æ„å»ºçŠ¶æ€
- âœ… **TypeScriptç¼–è¯‘**ï¼šæ— é”™è¯¯
- âœ… **æ„å»ºæˆåŠŸ**ï¼šäº§ç‰©å®Œæ•´
- âœ… **é€»è¾‘ç®€åŒ–**ï¼šèƒŒæ™¯è®¾ç½®é€»è¾‘æ›´æ¸…æ™°
- âœ… **å‘åå…¼å®¹**ï¼šè§†è§‰æ•ˆæœä¿æŒä¸€è‡´

#### æµ‹è¯•åœºæ™¯
- ğŸ§ª **çº¯è‰²èƒŒæ™¯**ï¼šå¤–æ¡†èƒŒæ™¯è‰²ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
- ğŸ§ª **èƒŒæ™¯å›¾ç‰‡**ï¼šå›¾ç‰‡æ˜¾ç¤ºæ­£å¸¸ï¼Œæ¨¡å—ä¸é®æŒ¡
- ğŸ§ª **ç™½è‰²èƒŒæ™¯**ï¼šæ•´ä½“é€æ˜ï¼Œæ— å¤šä½™èƒŒæ™¯
- ğŸ§ª **æ··åˆèƒŒæ™¯**ï¼šè‰²å½©+å›¾ç‰‡å±‚æ¬¡æ¸…æ™°

### æŠ€æœ¯è¦ç‚¹

#### ğŸ”§ **è®¾è®¡åŸåˆ™**
- **å•ä¸€èŒè´£**ï¼šå¤–æ¡†è´Ÿè´£èƒŒæ™¯ï¼Œè‡ªé€‚åº”æ¨¡å—è´Ÿè´£å†…å®¹å¸ƒå±€
- **å±‚æ¬¡åˆ†ç¦»**ï¼šèƒŒæ™¯å±‚ä¸å†…å®¹å±‚æ˜ç¡®åˆ†ç¦»
- **é€»è¾‘ç»Ÿä¸€**ï¼šæ— è®ºä½•ç§æƒ…å†µï¼ŒèƒŒæ™¯é€»è¾‘ä¿æŒä¸€è‡´

#### ğŸ›¡ï¸ **å®¹é”™å¤„ç†**
- **ç©ºå€¼å®‰å…¨**ï¼šèƒŒæ™¯é¢œè‰²è®¾ç½®åŒ…å«é»˜è®¤å€¼å¤„ç†
- **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptç¡®ä¿ç±»å‹æ­£ç¡®
- **æ—¥å¿—å®Œå–„**ï¼šè¯¦ç»†è®°å½•èƒŒæ™¯è®¾ç½®çŠ¶æ€

#### ğŸ“ **æ—¥å¿—ä¼˜åŒ–**
- **çŠ¶æ€è·Ÿè¸ª**ï¼šæ¸…æ™°è®°å½•èƒŒæ™¯è®¾ç½®è¿‡ç¨‹
- **è°ƒè¯•æ”¯æŒ**ï¼šæä¾›è¯¦ç»†çš„èƒŒæ™¯è®¾ç½®ä¿¡æ¯
- **ç”¨æˆ·åé¦ˆ**ï¼šé€šè¿‡æ—¥å¿—äº†è§£èƒŒæ™¯å¤„ç†çŠ¶æ€

**è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯å¡«å……ä¼˜åŒ–å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolså…·å¤‡äº†æ›´æ¸…æ™°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„ï¼Œè‡ªé€‚åº”æ¨¡å—å§‹ç»ˆé€æ˜ï¼ŒèƒŒæ™¯é¢œè‰²ç»Ÿä¸€åº”ç”¨åˆ°å¤–æ¡†ï¼Œå®ç°äº†æ›´ç®€æ´çš„é€»è¾‘å’Œæ›´å¥½çš„è§†è§‰æ•ˆæœï¼ 

## 2024-12-19 - ç¾½åŒ–è’™ç‰ˆç»„åæ ‡ç³»ç»Ÿé—®é¢˜æ ¹æœ¬ä¿®å¤ ğŸ¯ğŸ”§

### é—®é¢˜èƒŒæ™¯
ç”¨æˆ·åé¦ˆç¾½åŒ–è’™ç‰ˆç»„ä¾ç„¶æ²¡æœ‰æ­£ç¡®å±…ä¸­ï¼Œé€šè¿‡MCPå·¥å…·æŸ¥è¯¢Figma Plugin APIæ–‡æ¡£å‘ç°äº†åæ ‡ç³»ç»Ÿçš„æ ¹æœ¬é—®é¢˜ã€‚

### ğŸ” æ ¹æœ¬åŸå› å‘ç°
é€šè¿‡æŸ¥è¯¢Figma Plugin APIå®˜æ–¹æ–‡æ¡£ï¼Œå‘ç°äº†**Container Parentï¼ˆå®¹å™¨çˆ¶çº§ï¼‰**çš„é‡è¦æ¦‚å¿µï¼š

> **Container parent**: The relative transform of a node is shown relative to its container parent, which includes canvas nodes, frame nodes, component nodes, and instance nodes. Just like in the properties panel, it is **not** relative to its direct parent if the parent is a group or a boolean operation.

**å…³é”®å‘ç°**ï¼š
- **ç»„ï¼ˆGroupï¼‰ä¸æ˜¯å®¹å™¨çˆ¶çº§**ï¼šç»„å†…å­å…ƒç´ çš„åæ ‡ä¸æ˜¯ç›¸å¯¹äºç»„ï¼Œè€Œæ˜¯ç›¸å¯¹äºåŒ…å«è¯¥ç»„çš„å®¹å™¨çˆ¶çº§
- **å¤´å›¾ç»„æ˜¯Groupç±»å‹**ï¼šæ‰€ä»¥ç¾½åŒ–è’™ç‰ˆç»„çš„åæ ‡å®é™…ä¸Šæ˜¯ç›¸å¯¹äºåŒ…å«å¤´å›¾ç»„çš„å®¹å™¨
- **ä¹‹å‰çš„å±…ä¸­è®¡ç®—å®Œå…¨é”™è¯¯**ï¼šæˆ‘ä»¬æŒ‰ç…§ç›¸å¯¹äºå¤´å›¾ç»„çš„é€»è¾‘æ¥è®¡ç®—ï¼Œä½†åæ ‡ç³»ç»Ÿæ ¹æœ¬ä¸æ˜¯è¿™æ ·å·¥ä½œçš„

### ğŸš¨ é—®é¢˜åˆ†æ
```
é”™è¯¯ç†è§£çš„åæ ‡ç³»ç»Ÿï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (Group, x: 0)
   â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (x: -120.5) â† ä»¥ä¸ºæ˜¯ç›¸å¯¹äºå¤´å›¾ç»„
   â””â”€ å¤´å›¾èŠ‚ç‚¹ (x: 0) â† ä»¥ä¸ºæ˜¯ç›¸å¯¹äºå¤´å›¾ç»„

å®é™…çš„åæ ‡ç³»ç»Ÿï¼š
é¡µé¢ (Container Parent)
â”œâ”€ å¤´å›¾ç»„ (Group, x: 0) â† ä¸æ˜¯å®¹å™¨çˆ¶çº§
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (x: -120.5) â† å®é™…ç›¸å¯¹äºé¡µé¢ï¼
â””â”€ å¤´å›¾èŠ‚ç‚¹ (x: 0) â† å®é™…ç›¸å¯¹äºé¡µé¢ï¼
```

### âœ… ä¿®å¤æ–¹æ¡ˆ
**ä¿®æ”¹æ–‡ä»¶**ï¼š`src/core/builders/module-builders.ts`

**ä¿®å¤é€»è¾‘**ï¼š
```typescript
// ğŸš¨ é‡è¦ä¿®æ­£ï¼šæ ¹æ®Figma APIæ–‡æ¡£ï¼Œç»„ï¼ˆGroupï¼‰ä¸æ˜¯"å®¹å™¨çˆ¶çº§"
// ç»„å†…å…ƒç´ çš„åæ ‡æ˜¯ç›¸å¯¹äºåŒ…å«è¯¥ç»„çš„å®¹å™¨çˆ¶çº§ï¼Œè€Œä¸æ˜¯ç›¸å¯¹äºç»„æœ¬èº«

// ç¾½åŒ–è’™ç‰ˆç»„çš„ç»å¯¹ä½ç½®åº”è¯¥æ˜¯ï¼šå¤´å›¾ç»„ä½ç½® + ç»„å†…å±…ä¸­åç§»
const headerGroupX = originalX; // å¤´å›¾ç»„åœ¨å®¹å™¨ä¸­çš„Xä½ç½®
const centerOffset = (originalWidth - rectWidth) / 2; // å±…ä¸­åç§»é‡

// ç¾½åŒ–è’™ç‰ˆç»„çš„æœ€ç»ˆä½ç½®
featherMaskGroup.x = headerGroupX + centerOffset; // ç»å¯¹ä½ç½®ï¼šç»„ä½ç½® + å±…ä¸­åç§»
featherMaskGroup.y = originalY - blurRadius; // ç»å¯¹ä½ç½®ï¼šç»„ä½ç½® + Yåç§»

// å¤´å›¾èŠ‚ç‚¹åœ¨å¤´å›¾ç»„å†…çš„ä½ç½®ï¼ˆç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›¸å¯¹äºç»„ï¼‰
headerNode.x = originalX; // ä¿æŒåŸå§‹Xä½ç½®
headerNode.y = originalY; // ä¿æŒåŸå§‹Yä½ç½®
```

### ğŸ“Š ä¿®å¤æ•ˆæœå¯¹æ¯”
```
ä¿®å¤å‰ï¼ˆé”™è¯¯åæ ‡ç³»ç»Ÿï¼‰ï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (1080px, x: 0)
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (1321px, x: -120.5) â† ç›¸å¯¹äºé¡µé¢ï¼Œå¯¼è‡´åç§»
â””â”€ å¤´å›¾èŠ‚ç‚¹ (1080px, x: 0)

ä¿®å¤åï¼ˆæ­£ç¡®åæ ‡ç³»ç»Ÿï¼‰ï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (1080px, x: 0)
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (1321px, x: 0 + (-120.5) = -120.5) â† æ­£ç¡®çš„ç»å¯¹ä½ç½®
â””â”€ å¤´å›¾èŠ‚ç‚¹ (1080px, x: 0)
```

### ğŸ¯ æŠ€æœ¯å­¦ä¹ 
**Figmaåæ ‡ç³»ç»Ÿçš„é‡è¦æ¦‚å¿µ**ï¼š
1. **å®¹å™¨çˆ¶çº§**ï¼šåªæœ‰Canvasã€Frameã€Componentã€Instanceæ˜¯å®¹å™¨çˆ¶çº§
2. **ç»„å’Œå¸ƒå°”è¿ç®—**ï¼šä¸æ˜¯å®¹å™¨çˆ¶çº§ï¼Œå…¶å­å…ƒç´ åæ ‡ç›¸å¯¹äºæ›´ä¸Šå±‚çš„å®¹å™¨
3. **ç›¸å¯¹å˜æ¢**ï¼š`relativeTransform`æ€»æ˜¯ç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›´æ¥çˆ¶çº§
4. **ç»„çš„ç‰¹æ®Šæ€§**ï¼šç»„ä¼šè‡ªåŠ¨è°ƒæ•´å¤§å°ä»¥é€‚åº”å…¶å†…å®¹ï¼Œä½ç½®ç”±å­å…ƒç´ å†³å®š

### ğŸ“š å‚è€ƒæ–‡æ¡£
- **Figma Plugin API - relativeTransform**: https://www.figma.com/plugin-docs/api/properties/nodes-relativetransform/
- **Figma Plugin API - GroupNode**: https://www.figma.com/plugin-docs/api/GroupNode/
- **Container Parentæ¦‚å¿µ**ï¼šç»„å’Œå¸ƒå°”è¿ç®—ä¸æ˜¯å®¹å™¨çˆ¶çº§çš„é‡è¦è¯´æ˜

### ğŸ”§ æ„å»ºéªŒè¯

è¿è¡Œ `npm run build` éªŒè¯ä¿®å¤æ•ˆæœï¼š

**æ„å»ºç»“æœ**ï¼š
- âœ… **TypeScriptç¼–è¯‘**ï¼šæˆåŠŸç¼–è¯‘ï¼Œæœ‰ä¸€äº›é¢„æœŸçš„è­¦å‘Šï¼ˆlocalStorageã€windowç­‰åœ¨æ’ä»¶ç¯å¢ƒä¸­çš„ç±»å‹é—®é¢˜ï¼‰
- âœ… **æ’ä»¶æ„å»º**ï¼š`dist/plugin/code-standalone.js` ç”ŸæˆæˆåŠŸ
- âœ… **UIæ„å»º**ï¼š`dist/ui.html` (192.9KB) ç”ŸæˆæˆåŠŸï¼ŒCSSå’ŒJSå®Œå…¨å†…è”
- âœ… **æ ¸å¿ƒåº“æ„å»º**ï¼šæ¨¡å—åŒ–æ„å»ºå®Œæˆ
- âœ… **æ²™ç›’é€‚é…**ï¼šç¬¦åˆFigmaæ’ä»¶å®‰å…¨ç­–ç•¥

**æ„å»ºäº§ç‰©**ï¼š
```
dist/
â”œâ”€â”€ core/ (æ ¸å¿ƒåº“æ¨¡å—)
â”œâ”€â”€ plugin/ (æ’ä»¶ä¸»ç¨‹åº)
â””â”€â”€ ui.html (192.9KB, å®Œå…¨å†…è”ç‰ˆæœ¬)
```

### ğŸ¯ ä¿®å¤æ€»ç»“

**å…³é”®å‘ç°**ï¼š
- **Container Parentæ¦‚å¿µ**ï¼šFigmaåæ ‡ç³»ç»Ÿçš„æ ¸å¿ƒåŸç†
- **ç»„ä¸æ˜¯å®¹å™¨çˆ¶çº§**ï¼šGroupã€BooleanOperationçš„å­å…ƒç´ åæ ‡ç›¸å¯¹äºæ›´ä¸Šå±‚å®¹å™¨
- **ç›¸å¯¹å˜æ¢**ï¼š`relativeTransform`æ€»æ˜¯ç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›´æ¥çˆ¶çº§

**ä¿®å¤æ•ˆæœ**ï¼š
- âœ… **åæ ‡è®¡ç®—æ­£ç¡®**ï¼šç¾½åŒ–è’™ç‰ˆç»„ä½ç½®åŸºäºæ­£ç¡®çš„åæ ‡ç³»ç»Ÿ
- âœ… **è§„èŒƒæ›´æ–°**ï¼šå°†é‡è¦è§„åˆ™æ·»åŠ åˆ°é¡¹ç›®å¼€å‘è§„èŒƒä¸­
- âœ… **æ–‡æ¡£å®Œå–„**ï¼šè¯¦ç»†è®°å½•é—®é¢˜å‘ç°å’Œè§£å†³è¿‡ç¨‹
- âœ… **çŸ¥è¯†ç§¯ç´¯**ï¼šä¸ºå›¢é˜Ÿæä¾›å®è´µçš„Figma APIä½¿ç”¨ç»éªŒ

**è§„èŒƒæ›´æ–°**ï¼š
- ğŸ“š **Figmaå¼€å‘è§„èŒƒ**ï¼šæ·»åŠ åæ ‡ç³»ç»Ÿå’ŒContainer Parentè§„åˆ™
- ğŸ“‹ **å¼€å‘æ£€æŸ¥æ¸…å•**ï¼šå¢åŠ åæ ‡è®¡ç®—éªŒè¯é¡¹
- ğŸ”— **å®˜æ–¹æ–‡æ¡£å¼•ç”¨**ï¼šæä¾›æƒå¨å‚è€ƒé“¾æ¥

**ç¾½åŒ–è’™ç‰ˆç»„åæ ‡ç³»ç»Ÿé—®é¢˜æ ¹æœ¬ä¿®å¤å®Œæˆï¼** ğŸ‰

è¿™æ¬¡ä¿®å¤ä¸ä»…è§£å†³äº†å…·ä½“çš„ä½ç½®é—®é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯ï¼š
- ğŸ§  **æ·±å…¥ç†è§£**ï¼šæŒæ¡äº†Figmaåæ ‡ç³»ç»Ÿçš„æ ¸å¿ƒæ¦‚å¿µ
- ğŸ“– **æ–‡æ¡£ç ”ç©¶**ï¼šé€šè¿‡MCPå·¥å…·æŸ¥è¯¢å®˜æ–¹APIæ–‡æ¡£æ‰¾åˆ°æ ¹æœ¬åŸå› 
- ğŸ›¡ï¸ **è§„èŒƒå»ºç«‹**ï¼šå°†é‡è¦è§„åˆ™çº³å…¥é¡¹ç›®å¼€å‘è§„èŒƒ
- ğŸ”„ **çŸ¥è¯†ä¼ æ‰¿**ï¼šä¸ºæœªæ¥çš„å¼€å‘å·¥ä½œæä¾›æŒ‡å¯¼

ç°åœ¨H5Toolsé¡¹ç›®å…·å¤‡äº†æ›´ä¸“ä¸šçš„Figmaæ’ä»¶å¼€å‘èƒ½åŠ›ï¼

**ä»£ç ä¸€è‡´æ€§ä¿®æ­£å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolsçš„å®é™…è¿è¡Œä»£ç ä¸åŸå§‹è®¾è®¡ä¿æŒå®Œå…¨ä¸€è‡´ï¼Œç¡®ä¿äº†è®¾è®¡æ„å›¾çš„å‡†ç¡®å®ç°å’Œä»£ç çš„å¯ç»´æŠ¤æ€§ï¼ 

## 2024-12-19 - è‡ªé€‚åº”æ¨¡å—æ¡ä»¶åˆ›å»ºä¼˜åŒ– ğŸ¯ğŸ“¦

### èƒŒæ™¯
ç”¨æˆ·è¦æ±‚ä¸ºè‡ªé€‚åº”æ¨¡å—æ·»åŠ æ¡ä»¶åˆ¤æ–­ï¼Œå½“æ²¡æœ‰æ¨¡å—å†…å®¹æ—¶è·³è¿‡è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„åˆ›å»ºï¼Œä»¥ä¼˜åŒ–H5åŸå‹çš„ç»“æ„å’Œæ€§èƒ½ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **åŸæœ‰é€»è¾‘é—®é¢˜**
- **æ— æ¡ä»¶åˆ›å»º**ï¼šæ— è®ºæ˜¯å¦æœ‰æ¨¡å—å†…å®¹ï¼Œéƒ½ä¼šåˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç©ºå®¹å™¨å­˜åœ¨**ï¼šå½“ç”¨æˆ·åªè®¾ç½®èƒŒæ™¯å›¾ç‰‡è€Œæ²¡æœ‰ä»»ä½•æ¨¡å—å†…å®¹æ—¶ï¼Œä»ä¼šåˆ›å»ºç©ºçš„è‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç»“æ„å†—ä½™**ï¼šç©ºçš„è‡ªé€‚åº”æ¨¡å—å®¹å™¨ä¼šå¢åŠ ä¸å¿…è¦çš„èŠ‚ç‚¹å±‚çº§
- **æ€§èƒ½æµªè´¹**ï¼šæ— æ„ä¹‰çš„å®¹å™¨åˆ›å»ºå’Œå¸ƒå±€è®¡ç®—

#### ğŸ¯ **ä¼˜åŒ–ç›®æ ‡**
- **æ™ºèƒ½åˆ¤æ–­**ï¼šæ ¹æ®é…ç½®å†…å®¹æ™ºèƒ½å†³å®šæ˜¯å¦åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç»“æ„ç²¾ç®€**ï¼šæ²¡æœ‰æ¨¡å—å†…å®¹æ—¶ç›´æ¥ä½¿ç”¨å¤–æ¡†ä½œä¸ºå®¹å™¨
- **æ€§èƒ½æå‡**ï¼šé¿å…ä¸å¿…è¦çš„èŠ‚ç‚¹åˆ›å»ºå’Œå¸ƒå±€è®¡ç®—
- **é€»è¾‘æ¸…æ™°**ï¼šä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤

### ä¿®æ”¹å®æ–½

#### 1. **æ–°å¢å†…å®¹æ£€æµ‹æ–¹æ³•**
**æ–‡ä»¶**: `src/core/builders/h5-prototype-builder.ts`

```typescript
/**
 * æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•æ¨¡å—å†…å®¹éœ€è¦åˆ›å»º
 * @returns boolean å¦‚æœæœ‰ä»»ä½•æ¨¡å—å†…å®¹è¿”å›trueï¼Œå¦åˆ™è¿”å›false
 */
private hasAnyModuleContent(): boolean {
  // æ£€æŸ¥å¤´éƒ¨æ¨¡å—å†…å®¹
  const hasHeaderContent = !!(this.config.headerImage || this.config.titleUpload);
  
  // æ£€æŸ¥æ¸¸æˆä¿¡æ¯æ¨¡å—å†…å®¹
  const hasGameInfoContent = !!(this.config.gameName || this.config.gameDesc || this.config.gameIcon);
  
  // æ£€æŸ¥è‡ªå®šä¹‰æ¨¡å—å†…å®¹
  const hasCustomModules = !!(this.config.modules && this.config.modules.length > 0);
  
  // æ£€æŸ¥è§„åˆ™æ¨¡å—å†…å®¹
  const hasRulesTitle = this.config.rulesTitle && this.config.rulesTitle.trim() !== '';
  const hasRulesBgImage = this.config.rulesBgImage !== null && this.config.rulesBgImage !== undefined;
  const hasRulesContent = this.config.rulesContent && this.config.rulesContent.trim() !== '';
  const hasRulesContent_any = hasRulesTitle || hasRulesBgImage || hasRulesContent;
  
  // æ£€æŸ¥åº•éƒ¨æ¨¡å—å†…å®¹
  const hasFooterContent = !!(this.config.footerLogo || this.config.footerBg);
  
  // å¦‚æœæœ‰ä»»ä½•æ¨¡å—å†…å®¹ï¼Œè¿”å›true
  return hasHeaderContent || hasGameInfoContent || hasCustomModules || hasRulesContent_any || hasFooterContent;
}
```

#### 2. **æ¡ä»¶åŒ–æ¡†æ¶åˆ›å»º**
```typescript
private createBaseFrames(): void {
  // 1. H5åŸå‹å®¹å™¨ä¸éœ€è¦åº”ç”¨è‡ªåŠ¨å¸ƒå±€ï¼Œåªæ˜¯ä¸€ä¸ªç”»æ¿ï¼Œå¹¶è®¾ç½®å†…å®¹è£å‰ª
  this.outerFrame = NodeUtils.createFrame('H5åŸå‹', CONSTANTS.H5_WIDTH, 100);
  this.outerFrame.layoutMode = "NONE"; // ä¸ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€
  this.outerFrame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
  
  // 2. åªæœ‰å½“æœ‰æ¨¡å—å†…å®¹æ—¶æ‰åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
  if (this.hasAnyModuleContent()) {
    this.h5Frame = NodeUtils.createFrame('è‡ªé€‚åº”æ¨¡å—', CONSTANTS.H5_WIDTH, 100);
    this.h5Frame.fills = [];
    
    // è®¾ç½®è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„è‡ªåŠ¨å¸ƒå±€
    NodeUtils.setupAutoLayout(this.h5Frame, 'VERTICAL', 0, 0);
    this.h5Frame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
    this.h5Frame.layoutWrap = "NO_WRAP"; // è®¾ç½®å¸ƒå±€ä¸æ¢è¡Œï¼Œç¡®ä¿æ‰€æœ‰å­å…ƒç´ åœ¨ä¸€åˆ—ä¸­å‚ç›´æ’åˆ—
    
    console.log('æ£€æµ‹åˆ°æ¨¡å—å†…å®¹ï¼Œå·²åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨');
  } else {
    console.log('æœªæ£€æµ‹åˆ°æ¨¡å—å†…å®¹ï¼Œè·³è¿‡è‡ªé€‚åº”æ¨¡å—å®¹å™¨åˆ›å»º');
  }
}
```

#### 3. **é€‚é…èƒŒæ™¯è®¾ç½®é€»è¾‘**
```typescript
private async setupBackground(): Promise<void> {
  // å¦‚æœå­˜åœ¨è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè®¾ç½®å…¶èƒŒæ™¯é¢œè‰²
  if (this.h5Frame) {
    // èƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°è‡ªé€‚åº”æ¨¡å—å®¹å™¨
    if (!isDefaultWhite) {
      const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
      this.h5Frame.fills = [colorFill];
    } else {
      this.h5Frame.fills = [];
    }
  } else {
    // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå°†èƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°å¤–æ¡†
    if (!isDefaultWhite) {
      const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
      this.outerFrame.fills = [colorFill];
    } else {
      this.outerFrame.fills = [];
    }
  }
  
  // èƒŒæ™¯å›¾ç‰‡å¤„ç†é€»è¾‘ä¿æŒä¸å˜...
  
  // è®¾ç½®å®ŒèƒŒæ™¯ä¹‹åï¼Œå¦‚æœå­˜åœ¨è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå°†å…¶æ·»åŠ ä¸ºH5åŸå‹å®¹å™¨çš„å­å…ƒç´ 
  if (this.h5Frame) {
    NodeUtils.safeAppendChild(this.outerFrame, this.h5Frame, 'H5è‡ªé€‚åº”æ¨¡å—å®¹å™¨æ·»åŠ ');
  }
}
```

#### 4. **é€‚é…æ¨¡å—æ·»åŠ é€»è¾‘**
```typescript
private async addModules(): Promise<void> {
  // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè¯´æ˜æ²¡æœ‰æ¨¡å—å†…å®¹ï¼Œç›´æ¥è¿”å›
  if (!this.h5Frame) {
    console.log('æ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè·³è¿‡æ¨¡å—æ·»åŠ ');
    return;
  }
  
  // åˆ›å»ºæ‰€æœ‰æ¨¡å—
  const modules = await this.createAllModules();
  
  // æ‰¹é‡å®‰å…¨æ·»åŠ æ¨¡å—åˆ°H5ç”»æ¿ä¸­
  NodeUtils.safeBatchAppendChildren(this.h5Frame, modules, 'H5æ¨¡å—æ‰¹é‡æ·»åŠ ');
}
```

#### 5. **é€‚é…æœ€ç»ˆå¸ƒå±€é€»è¾‘**
```typescript
private finalizeLayout(): void {
  // è°ƒæ•´H5åŸå‹å®¹å™¨é«˜åº¦
  if (this.h5Frame) {
    // å¦‚æœæœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè°ƒæ•´ä¸ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨é«˜åº¦
    this.outerFrame.resize(CONSTANTS.H5_WIDTH, this.h5Frame.height);
    // æ¨¡å—å®¹å™¨å±‚çº§è°ƒæ•´é€»è¾‘...
  } else {
    // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè®¾ç½®ä¸€ä¸ªæœ€å°é«˜åº¦æˆ–æ ¹æ®èƒŒæ™¯å›¾ç‰‡è°ƒæ•´
    let finalHeight = 100; // é»˜è®¤æœ€å°é«˜åº¦
    
    // å¦‚æœæœ‰èƒŒæ™¯å›¾ç‰‡ï¼Œæ ¹æ®èƒŒæ™¯å›¾ç‰‡é«˜åº¦è°ƒæ•´
    if (this.config.pageBgImage) {
      const bgImageNode = this.outerFrame.findOne(node => node.name === 'é¡µé¢èƒŒæ™¯å›¾ç‰‡');
      if (bgImageNode && 'height' in bgImageNode) {
        finalHeight = Math.max(finalHeight, bgImageNode.height);
      }
    }
    
    this.outerFrame.resize(CONSTANTS.H5_WIDTH, finalHeight);
    console.log(`æ²¡æœ‰æ¨¡å—å†…å®¹ï¼ŒH5åŸå‹è®¾ç½®ä¸ºæœ€å°é«˜åº¦: ${finalHeight}px`);
  }
}
```

### ä¼˜åŒ–æ•ˆæœ

#### ğŸ¯ **æ™ºèƒ½æ£€æµ‹èŒƒå›´**
| æ¨¡å—ç±»å‹ | æ£€æµ‹æ¡ä»¶ | ç¤ºä¾‹ |
|----------|----------|------|
| **å¤´éƒ¨æ¨¡å—** | `headerImage \|\| titleUpload` | å¤´éƒ¨å›¾ç‰‡æˆ–æ ‡é¢˜ä¸Šä¼  |
| **æ¸¸æˆä¿¡æ¯æ¨¡å—** | `gameName \|\| gameDesc \|\| gameIcon` | æ¸¸æˆåç§°ã€æè¿°æˆ–å›¾æ ‡ |
| **è‡ªå®šä¹‰æ¨¡å—** | `modules && modules.length > 0` | è‡ªå®šä¹‰æ¨¡å—æ•°ç»„éç©º |
| **è§„åˆ™æ¨¡å—** | `rulesTitle \|\| rulesBgImage \|\| rulesContent` | è§„åˆ™æ ‡é¢˜ã€èƒŒæ™¯å›¾æˆ–å†…å®¹ |
| **åº•éƒ¨æ¨¡å—** | `footerLogo \|\| footerBg` | åº•éƒ¨Logoæˆ–èƒŒæ™¯ |

#### ğŸ“Š **ç»“æ„å¯¹æ¯”**

**æœ‰æ¨¡å—å†…å®¹æ—¶**ï¼š
```
H5åŸå‹ (1080xåŠ¨æ€é«˜åº¦, æ— èƒŒæ™¯, layoutMode="NONE")
â”œâ”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰)
â””â”€â”€ è‡ªé€‚åº”æ¨¡å— (1080xåŠ¨æ€é«˜åº¦, é…ç½®èƒŒæ™¯è‰², è‡ªåŠ¨å¸ƒå±€)
    â”œâ”€â”€ å¤´éƒ¨æ¨¡å— (å¯é€‰)
    â”œâ”€â”€ æ¸¸æˆä¿¡æ¯æ¨¡å— (å¯é€‰) 
    â”œâ”€â”€ è‡ªå®šä¹‰æ¨¡å—... (å¯é€‰)
    â”œâ”€â”€ è§„åˆ™æ¨¡å— (å¯é€‰)
    â””â”€â”€ åº•éƒ¨æ¨¡å— (å¯é€‰)
```

**æ— æ¨¡å—å†…å®¹æ—¶**ï¼š
```
H5åŸå‹ (1080xèƒŒæ™¯å›¾é«˜åº¦æˆ–100px, é…ç½®èƒŒæ™¯è‰², layoutMode="NONE")
â””â”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰)
```

#### ğŸš€ **æ€§èƒ½æå‡**
- **èŠ‚ç‚¹å‡å°‘**ï¼šæ— å†…å®¹æ—¶å‡å°‘1ä¸ªå®¹å™¨èŠ‚ç‚¹
- **å¸ƒå±€ç®€åŒ–**ï¼šé¿å…ä¸å¿…è¦çš„è‡ªåŠ¨å¸ƒå±€è®¡ç®—
- **å†…å­˜ä¼˜åŒ–**ï¼šå‡å°‘ç©ºå®¹å™¨çš„å†…å­˜å ç”¨
- **æ¸²æŸ“æ•ˆç‡**ï¼šå‡å°‘Figmaæ¸²æŸ“å±‚çº§

#### ğŸ” **ç”¨æˆ·ä½“éªŒæ”¹è¿›**
- **ç»“æ„æ¸…æ™°**ï¼šåªæœ‰èƒŒæ™¯å›¾ç‰‡æ—¶ç»“æ„æ›´ç®€æ´
- **æ€§èƒ½æ›´å¥½**ï¼šå‡å°‘ä¸å¿…è¦çš„èŠ‚ç‚¹æ“ä½œ
- **è°ƒè¯•å‹å¥½**ï¼šæ§åˆ¶å°æ—¥å¿—æ¸…æ™°æ˜¾ç¤ºåˆ›å»ºçŠ¶æ€
- **é€»è¾‘åˆç†**ï¼šç¬¦åˆç”¨æˆ·æœŸæœ›çš„è¡Œä¸º

### éªŒè¯ç»“æœ

#### æ„å»ºçŠ¶æ€
- âœ… **TypeScriptç¼–è¯‘**ï¼šæ— é”™è¯¯
- âœ… **æ„å»ºæˆåŠŸ**ï¼šäº§ç‰©å®Œæ•´
- âœ… **åŠŸèƒ½å®Œæ•´**ï¼šæ‰€æœ‰æ¨¡å—æ£€æµ‹é€»è¾‘æ­£å¸¸å·¥ä½œ
- âœ… **å‘åå…¼å®¹**ï¼šç°æœ‰åŠŸèƒ½ä¿æŒä¸å˜

#### æµ‹è¯•åœºæ™¯
- ğŸ§ª **çº¯èƒŒæ™¯åœºæ™¯**ï¼šåªæœ‰èƒŒæ™¯å›¾ç‰‡/é¢œè‰²ï¼Œæ— æ¨¡å—å†…å®¹
- ğŸ§ª **éƒ¨åˆ†æ¨¡å—åœºæ™¯**ï¼šåªæœ‰éƒ¨åˆ†æ¨¡å—å†…å®¹
- ğŸ§ª **å®Œæ•´æ¨¡å—åœºæ™¯**ï¼šåŒ…å«æ‰€æœ‰ç±»å‹æ¨¡å—å†…å®¹
- ğŸ§ª **ç©ºé…ç½®åœºæ™¯**ï¼šå®Œå…¨ç©ºçš„é…ç½®

### æŠ€æœ¯è¦ç‚¹

#### ğŸ”§ **æ£€æµ‹é€»è¾‘è®¾è®¡**
- **å…¨é¢è¦†ç›–**ï¼šæ£€æµ‹æ‰€æœ‰å¯èƒ½çš„æ¨¡å—ç±»å‹
- **ç²¾ç¡®åˆ¤æ–­**ï¼šä½¿ç”¨ä¸¥æ ¼çš„éç©ºå’Œéç©ºå­—ç¬¦ä¸²æ£€æŸ¥
- **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨çŸ­è·¯é€»è¾‘æé«˜æ£€æµ‹æ•ˆç‡

#### ğŸ›¡ï¸ **å®¹é”™å¤„ç†**
- **ç©ºå€¼å®‰å…¨**ï¼šæ‰€æœ‰æ£€æŸ¥éƒ½åŒ…å«ç©ºå€¼å¤„ç†
- **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptç±»å‹æ£€æŸ¥ç¡®ä¿å®‰å…¨
- **é™çº§å¤„ç†**ï¼šæ£€æµ‹å¤±è´¥æ—¶é‡‡ç”¨ä¿å®ˆç­–ç•¥ï¼ˆåˆ›å»ºå®¹å™¨ï¼‰

#### ğŸ“ **æ—¥å¿—å®Œå–„**
- **çŠ¶æ€è·Ÿè¸ª**ï¼šæ¸…æ™°è®°å½•å®¹å™¨åˆ›å»ºçŠ¶æ€
- **è°ƒè¯•æ”¯æŒ**ï¼šæä¾›è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
- **ç”¨æˆ·åé¦ˆ**ï¼šé€šè¿‡æ—¥å¿—äº†è§£æ’ä»¶è¡Œä¸º

**è‡ªé€‚åº”æ¨¡å—æ¡ä»¶åˆ›å»ºä¼˜åŒ–å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolså…·å¤‡äº†æ™ºèƒ½çš„æ¨¡å—æ£€æµ‹èƒ½åŠ›ï¼Œèƒ½å¤Ÿæ ¹æ®å®é™…å†…å®¹éœ€æ±‚åŠ¨æ€å†³å®šæ˜¯å¦åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå®ç°äº†æ›´ç²¾ç®€çš„ç»“æ„å’Œæ›´å¥½çš„æ€§èƒ½ï¼ 

## 2024-12-19 - è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯å¡«å……ä¼˜åŒ– ğŸ¨ğŸ“¦

### èƒŒæ™¯
ç”¨æˆ·è¦æ±‚å°†è‡ªé€‚åº”æ¨¡å—çš„èƒŒæ™¯å¡«å……æ”¹ä¸ºå§‹ç»ˆé€æ˜å¡«å……ï¼Œä»¥ä¼˜åŒ–H5åŸå‹çš„è§†è§‰å±‚æ¬¡å’ŒèƒŒæ™¯å¤„ç†é€»è¾‘ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **åŸæœ‰èƒŒæ™¯é€»è¾‘é—®é¢˜**
- **åŒé‡èƒŒæ™¯è®¾ç½®**ï¼šèƒŒæ™¯é¢œè‰²å¯èƒ½åŒæ—¶åº”ç”¨åˆ°å¤–æ¡†å’Œè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **é€»è¾‘å¤æ‚**ï¼šæ ¹æ®æ˜¯å¦æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨æ¥å†³å®šèƒŒæ™¯åº”ç”¨ä½ç½®
- **è§†è§‰å†—ä½™**ï¼šè‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„èƒŒæ™¯å¯èƒ½ä¸å¤–æ¡†èƒŒæ™¯é‡å 
- **å±‚æ¬¡ä¸æ¸…**ï¼šèƒŒæ™¯å±‚æ¬¡å…³ç³»ä¸å¤Ÿæ˜ç¡®

#### ğŸ¯ **ä¼˜åŒ–ç›®æ ‡**
- **ç®€åŒ–é€»è¾‘**ï¼šè‡ªé€‚åº”æ¨¡å—å®¹å™¨å§‹ç»ˆé€æ˜ï¼ŒèƒŒæ™¯é¢œè‰²å§‹ç»ˆåº”ç”¨åˆ°å¤–æ¡†
- **æ¸…æ™°å±‚æ¬¡**ï¼šå»ºç«‹æ¸…æ™°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„
- **é¿å…å†—ä½™**ï¼šæ¶ˆé™¤é‡å¤çš„èƒŒæ™¯è®¾ç½®
- **æå‡æ€§èƒ½**ï¼šå‡å°‘ä¸å¿…è¦çš„èƒŒæ™¯è®¡ç®—å’Œæ¸²æŸ“

### ä¿®æ”¹å®æ–½

#### **èƒŒæ™¯è®¾ç½®é€»è¾‘é‡æ„**
**æ–‡ä»¶**: `src/core/builders/h5-prototype-builder.ts`

**ä¿®æ”¹å‰**ï¼š
```typescript
// å¤æ‚çš„æ¡ä»¶åˆ¤æ–­é€»è¾‘
if (this.h5Frame) {
  // æ ¹æ®é¢œè‰²åˆ¤æ–­æ˜¯å¦è®¾ç½®è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯
  if (!isDefaultWhite) {
    const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
    this.h5Frame.fills = [colorFill];
  } else {
    this.h5Frame.fills = [];
  }
} else {
  // æ²¡æœ‰è‡ªé€‚åº”æ¨¡å—æ—¶æ‰è®¾ç½®å¤–æ¡†èƒŒæ™¯
  if (!isDefaultWhite) {
    const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
    this.outerFrame.fills = [colorFill];
  } else {
    this.outerFrame.fills = [];
  }
}
```

**ä¿®æ”¹å**ï¼š
```typescript
// ç®€åŒ–çš„èƒŒæ™¯è®¾ç½®é€»è¾‘
// è‡ªé€‚åº”æ¨¡å—å®¹å™¨å§‹ç»ˆè®¾ç½®ä¸ºé€æ˜å¡«å……
if (this.h5Frame) {
  this.h5Frame.fills = []; // å§‹ç»ˆé€æ˜
  console.log('è‡ªé€‚åº”æ¨¡å—å®¹å™¨è®¾ç½®ä¸ºé€æ˜å¡«å……');
}

// èƒŒæ™¯é¢œè‰²å§‹ç»ˆåº”ç”¨åˆ°å¤–æ¡†ï¼ˆH5åŸå‹å®¹å™¨ï¼‰
if (!isDefaultWhite) {
  const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
  this.outerFrame.fills = [colorFill];
  console.log(`H5åŸå‹å®¹å™¨èƒŒæ™¯è‰²è®¾ç½®ä¸º: ${this.config.pageBgColor}`);
} else {
  // ç™½è‰²æ—¶è®¾ç½®ä¸ºé€æ˜
  this.outerFrame.fills = [];
  console.log('H5åŸå‹å®¹å™¨èƒŒæ™¯è®¾ç½®ä¸ºé€æ˜ï¼ˆç™½è‰²ï¼‰');
}
```

### ä¼˜åŒ–æ•ˆæœ

#### ğŸ¨ **è§†è§‰å±‚æ¬¡ä¼˜åŒ–**

**æ–°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„**ï¼š
```
H5åŸå‹å®¹å™¨ (å¤–æ¡†)
â”œâ”€â”€ èƒŒæ™¯é¢œè‰² (pageBgColor) â† å§‹ç»ˆåœ¨è¿™é‡Œè®¾ç½®
â”œâ”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰) â† åœ¨å¤–æ¡†ä¸­
â””â”€â”€ è‡ªé€‚åº”æ¨¡å—å®¹å™¨ (å§‹ç»ˆé€æ˜) â† ä¸è®¾ç½®èƒŒæ™¯
    â”œâ”€â”€ å¤´éƒ¨æ¨¡å—
    â”œâ”€â”€ æ¸¸æˆä¿¡æ¯æ¨¡å—
    â”œâ”€â”€ è‡ªå®šä¹‰æ¨¡å—...
    â”œâ”€â”€ è§„åˆ™æ¨¡å—
    â””â”€â”€ åº•éƒ¨æ¨¡å—
```

#### ğŸ“Š **é€»è¾‘å¯¹æ¯”**

| æ–¹é¢ | ä¿®æ”¹å‰ | ä¿®æ”¹å | ä¼˜åŠ¿ |
|------|--------|--------|------|
| **èƒŒæ™¯è®¾ç½®ä½ç½®** | æ¡ä»¶åˆ¤æ–­ | å§‹ç»ˆå¤–æ¡† | é€»è¾‘ç»Ÿä¸€ |
| **è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯** | å¯èƒ½æœ‰èƒŒæ™¯ | å§‹ç»ˆé€æ˜ | è§†è§‰æ¸…æ™° |
| **ä»£ç å¤æ‚åº¦** | åŒé‡æ¡ä»¶åˆ¤æ–­ | å•ä¸€é€»è¾‘ | æ˜“ç»´æŠ¤ |
| **æ€§èƒ½** | å¤šæ¬¡èƒŒæ™¯è®¡ç®— | ä¸€æ¬¡è®¾ç½® | æ›´é«˜æ•ˆ |

#### ğŸš€ **æ€§èƒ½æå‡**
- **å‡å°‘èƒŒæ™¯è®¡ç®—**ï¼šåªéœ€è¦ä¸€æ¬¡èƒŒæ™¯é¢œè‰²è®¾ç½®
- **ç®€åŒ–æ¸²æŸ“**ï¼šé¿å…å¤šå±‚èƒŒæ™¯çš„é‡å æ¸²æŸ“
- **å†…å­˜ä¼˜åŒ–**ï¼šå‡å°‘èƒŒæ™¯å¡«å……å¯¹è±¡çš„åˆ›å»º
- **é€»è¾‘æ¸…æ™°**ï¼šä»£ç æ›´æ˜“ç†è§£å’Œç»´æŠ¤

#### ğŸ” **ç”¨æˆ·ä½“éªŒæ”¹è¿›**
- **è§†è§‰ä¸€è‡´æ€§**ï¼šèƒŒæ™¯é¢œè‰²å§‹ç»ˆåœ¨æœ€åº•å±‚
- **é€æ˜åº¦æ§åˆ¶**ï¼šè‡ªé€‚åº”æ¨¡å—é€æ˜ï¼Œä¸å½±å“èƒŒæ™¯æ˜¾ç¤º
- **è°ƒè¯•å‹å¥½**ï¼šæ¸…æ™°çš„æ—¥å¿—æ˜¾ç¤ºèƒŒæ™¯è®¾ç½®çŠ¶æ€
- **é¢„æœŸè¡Œä¸º**ï¼šç¬¦åˆç”¨æˆ·å¯¹èƒŒæ™¯å±‚æ¬¡çš„é¢„æœŸ

### åº”ç”¨åœºæ™¯

#### ğŸ¯ **é€‚ç”¨æƒ…å†µ**
1. **çº¯è‰²èƒŒæ™¯**ï¼šèƒŒæ™¯é¢œè‰²ç›´æ¥åº”ç”¨åˆ°å¤–æ¡†ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
2. **èƒŒæ™¯å›¾ç‰‡**ï¼šå›¾ç‰‡åœ¨å¤–æ¡†ä¸­ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜ä¸é®æŒ¡
3. **æ··åˆèƒŒæ™¯**ï¼šèƒŒæ™¯è‰²+èƒŒæ™¯å›¾ç‰‡ï¼Œå±‚æ¬¡æ¸…æ™°
4. **æ— èƒŒæ™¯å†…å®¹**ï¼šåªæœ‰è‡ªé€‚åº”æ¨¡å—æ—¶ï¼ŒèƒŒæ™¯é€»è¾‘ä¾ç„¶æ¸…æ™°

#### ğŸ“‹ **è§†è§‰æ•ˆæœ**
- **æœ‰èƒŒæ™¯è‰²æ—¶**ï¼šå¤–æ¡†æ˜¾ç¤ºèƒŒæ™¯è‰²ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
- **æœ‰èƒŒæ™¯å›¾æ—¶**ï¼šå›¾ç‰‡åœ¨å¤–æ¡†ä¸­æ˜¾ç¤ºï¼Œè‡ªé€‚åº”æ¨¡å—ä¸é®æŒ¡
- **ç™½è‰²èƒŒæ™¯æ—¶**ï¼šå¤–æ¡†é€æ˜ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜ï¼Œæ•´ä½“é€æ˜
- **æ— æ¨¡å—å†…å®¹æ—¶**ï¼šåªæœ‰å¤–æ¡†ï¼ŒèƒŒæ™¯è®¾ç½®æ­£å¸¸

### éªŒè¯ç»“æœ

#### æ„å»ºçŠ¶æ€
- âœ… **TypeScriptç¼–è¯‘**ï¼šæ— é”™è¯¯
- âœ… **æ„å»ºæˆåŠŸ**ï¼šäº§ç‰©å®Œæ•´
- âœ… **é€»è¾‘ç®€åŒ–**ï¼šèƒŒæ™¯è®¾ç½®é€»è¾‘æ›´æ¸…æ™°
- âœ… **å‘åå…¼å®¹**ï¼šè§†è§‰æ•ˆæœä¿æŒä¸€è‡´

#### æµ‹è¯•åœºæ™¯
- ğŸ§ª **çº¯è‰²èƒŒæ™¯**ï¼šå¤–æ¡†èƒŒæ™¯è‰²ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
- ğŸ§ª **èƒŒæ™¯å›¾ç‰‡**ï¼šå›¾ç‰‡æ˜¾ç¤ºæ­£å¸¸ï¼Œæ¨¡å—ä¸é®æŒ¡
- ğŸ§ª **ç™½è‰²èƒŒæ™¯**ï¼šæ•´ä½“é€æ˜ï¼Œæ— å¤šä½™èƒŒæ™¯
- ğŸ§ª **æ··åˆèƒŒæ™¯**ï¼šè‰²å½©+å›¾ç‰‡å±‚æ¬¡æ¸…æ™°

### æŠ€æœ¯è¦ç‚¹

#### ğŸ”§ **è®¾è®¡åŸåˆ™**
- **å•ä¸€èŒè´£**ï¼šå¤–æ¡†è´Ÿè´£èƒŒæ™¯ï¼Œè‡ªé€‚åº”æ¨¡å—è´Ÿè´£å†…å®¹å¸ƒå±€
- **å±‚æ¬¡åˆ†ç¦»**ï¼šèƒŒæ™¯å±‚ä¸å†…å®¹å±‚æ˜ç¡®åˆ†ç¦»
- **é€»è¾‘ç»Ÿä¸€**ï¼šæ— è®ºä½•ç§æƒ…å†µï¼ŒèƒŒæ™¯é€»è¾‘ä¿æŒä¸€è‡´

#### ğŸ›¡ï¸ **å®¹é”™å¤„ç†**
- **ç©ºå€¼å®‰å…¨**ï¼šèƒŒæ™¯é¢œè‰²è®¾ç½®åŒ…å«é»˜è®¤å€¼å¤„ç†
- **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptç¡®ä¿ç±»å‹æ­£ç¡®
- **æ—¥å¿—å®Œå–„**ï¼šè¯¦ç»†è®°å½•èƒŒæ™¯è®¾ç½®çŠ¶æ€

#### ğŸ“ **æ—¥å¿—ä¼˜åŒ–**
- **çŠ¶æ€è·Ÿè¸ª**ï¼šæ¸…æ™°è®°å½•èƒŒæ™¯è®¾ç½®è¿‡ç¨‹
- **è°ƒè¯•æ”¯æŒ**ï¼šæä¾›è¯¦ç»†çš„èƒŒæ™¯è®¾ç½®ä¿¡æ¯
- **ç”¨æˆ·åé¦ˆ**ï¼šé€šè¿‡æ—¥å¿—äº†è§£èƒŒæ™¯å¤„ç†çŠ¶æ€

**è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯å¡«å……ä¼˜åŒ–å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolså…·å¤‡äº†æ›´æ¸…æ™°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„ï¼Œè‡ªé€‚åº”æ¨¡å—å§‹ç»ˆé€æ˜ï¼ŒèƒŒæ™¯é¢œè‰²ç»Ÿä¸€åº”ç”¨åˆ°å¤–æ¡†ï¼Œå®ç°äº†æ›´ç®€æ´çš„é€»è¾‘å’Œæ›´å¥½çš„è§†è§‰æ•ˆæœï¼ 

## 2024-12-19 - ç¾½åŒ–è’™ç‰ˆç»„åæ ‡ç³»ç»Ÿé—®é¢˜æ ¹æœ¬ä¿®å¤ ğŸ¯ğŸ”§

### é—®é¢˜èƒŒæ™¯
ç”¨æˆ·åé¦ˆç¾½åŒ–è’™ç‰ˆç»„ä¾ç„¶æ²¡æœ‰æ­£ç¡®å±…ä¸­ï¼Œé€šè¿‡MCPå·¥å…·æŸ¥è¯¢Figma Plugin APIæ–‡æ¡£å‘ç°äº†åæ ‡ç³»ç»Ÿçš„æ ¹æœ¬é—®é¢˜ã€‚

### ğŸ” æ ¹æœ¬åŸå› å‘ç°
é€šè¿‡æŸ¥è¯¢Figma Plugin APIå®˜æ–¹æ–‡æ¡£ï¼Œå‘ç°äº†**Container Parentï¼ˆå®¹å™¨çˆ¶çº§ï¼‰**çš„é‡è¦æ¦‚å¿µï¼š

> **Container parent**: The relative transform of a node is shown relative to its container parent, which includes canvas nodes, frame nodes, component nodes, and instance nodes. Just like in the properties panel, it is **not** relative to its direct parent if the parent is a group or a boolean operation.

**å…³é”®å‘ç°**ï¼š
- **ç»„ï¼ˆGroupï¼‰ä¸æ˜¯å®¹å™¨çˆ¶çº§**ï¼šç»„å†…å­å…ƒç´ çš„åæ ‡ä¸æ˜¯ç›¸å¯¹äºç»„ï¼Œè€Œæ˜¯ç›¸å¯¹äºåŒ…å«è¯¥ç»„çš„å®¹å™¨çˆ¶çº§
- **å¤´å›¾ç»„æ˜¯Groupç±»å‹**ï¼šæ‰€ä»¥ç¾½åŒ–è’™ç‰ˆç»„çš„åæ ‡å®é™…ä¸Šæ˜¯ç›¸å¯¹äºåŒ…å«å¤´å›¾ç»„çš„å®¹å™¨
- **ä¹‹å‰çš„å±…ä¸­è®¡ç®—å®Œå…¨é”™è¯¯**ï¼šæˆ‘ä»¬æŒ‰ç…§ç›¸å¯¹äºå¤´å›¾ç»„çš„é€»è¾‘æ¥è®¡ç®—ï¼Œä½†åæ ‡ç³»ç»Ÿæ ¹æœ¬ä¸æ˜¯è¿™æ ·å·¥ä½œçš„

### ğŸš¨ é—®é¢˜åˆ†æ
```
é”™è¯¯ç†è§£çš„åæ ‡ç³»ç»Ÿï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (Group, x: 0)
   â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (x: -120.5) â† ä»¥ä¸ºæ˜¯ç›¸å¯¹äºå¤´å›¾ç»„
   â””â”€ å¤´å›¾èŠ‚ç‚¹ (x: 0) â† ä»¥ä¸ºæ˜¯ç›¸å¯¹äºå¤´å›¾ç»„

å®é™…çš„åæ ‡ç³»ç»Ÿï¼š
é¡µé¢ (Container Parent)
â”œâ”€ å¤´å›¾ç»„ (Group, x: 0) â† ä¸æ˜¯å®¹å™¨çˆ¶çº§
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (x: -120.5) â† å®é™…ç›¸å¯¹äºé¡µé¢ï¼
â””â”€ å¤´å›¾èŠ‚ç‚¹ (x: 0) â† å®é™…ç›¸å¯¹äºé¡µé¢ï¼
```

### âœ… ä¿®å¤æ–¹æ¡ˆ
**ä¿®æ”¹æ–‡ä»¶**ï¼š`src/core/builders/module-builders.ts`

**ä¿®å¤é€»è¾‘**ï¼š
```typescript
// ğŸš¨ é‡è¦ä¿®æ­£ï¼šæ ¹æ®Figma APIæ–‡æ¡£ï¼Œç»„ï¼ˆGroupï¼‰ä¸æ˜¯"å®¹å™¨çˆ¶çº§"
// ç»„å†…å…ƒç´ çš„åæ ‡æ˜¯ç›¸å¯¹äºåŒ…å«è¯¥ç»„çš„å®¹å™¨çˆ¶çº§ï¼Œè€Œä¸æ˜¯ç›¸å¯¹äºç»„æœ¬èº«

// ç¾½åŒ–è’™ç‰ˆç»„çš„ç»å¯¹ä½ç½®åº”è¯¥æ˜¯ï¼šå¤´å›¾ç»„ä½ç½® + ç»„å†…å±…ä¸­åç§»
const headerGroupX = originalX; // å¤´å›¾ç»„åœ¨å®¹å™¨ä¸­çš„Xä½ç½®
const centerOffset = (originalWidth - rectWidth) / 2; // å±…ä¸­åç§»é‡

// ç¾½åŒ–è’™ç‰ˆç»„çš„æœ€ç»ˆä½ç½®
featherMaskGroup.x = headerGroupX + centerOffset; // ç»å¯¹ä½ç½®ï¼šç»„ä½ç½® + å±…ä¸­åç§»
featherMaskGroup.y = originalY - blurRadius; // ç»å¯¹ä½ç½®ï¼šç»„ä½ç½® + Yåç§»

// å¤´å›¾èŠ‚ç‚¹åœ¨å¤´å›¾ç»„å†…çš„ä½ç½®ï¼ˆç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›¸å¯¹äºç»„ï¼‰
headerNode.x = originalX; // ä¿æŒåŸå§‹Xä½ç½®
headerNode.y = originalY; // ä¿æŒåŸå§‹Yä½ç½®
```

### ğŸ“Š ä¿®å¤æ•ˆæœå¯¹æ¯”
```
ä¿®å¤å‰ï¼ˆé”™è¯¯åæ ‡ç³»ç»Ÿï¼‰ï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (1080px, x: 0)
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (1321px, x: -120.5) â† ç›¸å¯¹äºé¡µé¢ï¼Œå¯¼è‡´åç§»
â””â”€ å¤´å›¾èŠ‚ç‚¹ (1080px, x: 0)

ä¿®å¤åï¼ˆæ­£ç¡®åæ ‡ç³»ç»Ÿï¼‰ï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (1080px, x: 0)
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (1321px, x: 0 + (-120.5) = -120.5) â† æ­£ç¡®çš„ç»å¯¹ä½ç½®
â””â”€ å¤´å›¾èŠ‚ç‚¹ (1080px, x: 0)
```

### ğŸ¯ æŠ€æœ¯å­¦ä¹ 
**Figmaåæ ‡ç³»ç»Ÿçš„é‡è¦æ¦‚å¿µ**ï¼š
1. **å®¹å™¨çˆ¶çº§**ï¼šåªæœ‰Canvasã€Frameã€Componentã€Instanceæ˜¯å®¹å™¨çˆ¶çº§
2. **ç»„å’Œå¸ƒå°”è¿ç®—**ï¼šä¸æ˜¯å®¹å™¨çˆ¶çº§ï¼Œå…¶å­å…ƒç´ åæ ‡ç›¸å¯¹äºæ›´ä¸Šå±‚çš„å®¹å™¨
3. **ç›¸å¯¹å˜æ¢**ï¼š`relativeTransform`æ€»æ˜¯ç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›´æ¥çˆ¶çº§
4. **ç»„çš„ç‰¹æ®Šæ€§**ï¼šç»„ä¼šè‡ªåŠ¨è°ƒæ•´å¤§å°ä»¥é€‚åº”å…¶å†…å®¹ï¼Œä½ç½®ç”±å­å…ƒç´ å†³å®š

### ğŸ“š å‚è€ƒæ–‡æ¡£
- **Figma Plugin API - relativeTransform**: https://www.figma.com/plugin-docs/api/properties/nodes-relativetransform/
- **Figma Plugin API - GroupNode**: https://www.figma.com/plugin-docs/api/GroupNode/
- **Container Parentæ¦‚å¿µ**ï¼šç»„å’Œå¸ƒå°”è¿ç®—ä¸æ˜¯å®¹å™¨çˆ¶çº§çš„é‡è¦è¯´æ˜

### ğŸ”§ æ„å»ºéªŒè¯

è¿è¡Œ `npm run build` éªŒè¯ä¿®å¤æ•ˆæœï¼š

**æ„å»ºç»“æœ**ï¼š
- âœ… **TypeScriptç¼–è¯‘**ï¼šæˆåŠŸç¼–è¯‘ï¼Œæœ‰ä¸€äº›é¢„æœŸçš„è­¦å‘Šï¼ˆlocalStorageã€windowç­‰åœ¨æ’ä»¶ç¯å¢ƒä¸­çš„ç±»å‹é—®é¢˜ï¼‰
- âœ… **æ’ä»¶æ„å»º**ï¼š`dist/plugin/code-standalone.js` ç”ŸæˆæˆåŠŸ
- âœ… **UIæ„å»º**ï¼š`dist/ui.html` (192.9KB) ç”ŸæˆæˆåŠŸï¼ŒCSSå’ŒJSå®Œå…¨å†…è”
- âœ… **æ ¸å¿ƒåº“æ„å»º**ï¼šæ¨¡å—åŒ–æ„å»ºå®Œæˆ
- âœ… **æ²™ç›’é€‚é…**ï¼šç¬¦åˆFigmaæ’ä»¶å®‰å…¨ç­–ç•¥

**æ„å»ºäº§ç‰©**ï¼š
```
dist/
â”œâ”€â”€ core/ (æ ¸å¿ƒåº“æ¨¡å—)
â”œâ”€â”€ plugin/ (æ’ä»¶ä¸»ç¨‹åº)
â””â”€â”€ ui.html (192.9KB, å®Œå…¨å†…è”ç‰ˆæœ¬)
```

### ğŸ¯ ä¿®å¤æ€»ç»“

**å…³é”®å‘ç°**ï¼š
- **Container Parentæ¦‚å¿µ**ï¼šFigmaåæ ‡ç³»ç»Ÿçš„æ ¸å¿ƒåŸç†
- **ç»„ä¸æ˜¯å®¹å™¨çˆ¶çº§**ï¼šGroupã€BooleanOperationçš„å­å…ƒç´ åæ ‡ç›¸å¯¹äºæ›´ä¸Šå±‚å®¹å™¨
- **ç›¸å¯¹å˜æ¢**ï¼š`relativeTransform`æ€»æ˜¯ç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›´æ¥çˆ¶çº§

**ä¿®å¤æ•ˆæœ**ï¼š
- âœ… **åæ ‡è®¡ç®—æ­£ç¡®**ï¼šç¾½åŒ–è’™ç‰ˆç»„ä½ç½®åŸºäºæ­£ç¡®çš„åæ ‡ç³»ç»Ÿ
- âœ… **è§„èŒƒæ›´æ–°**ï¼šå°†é‡è¦è§„åˆ™æ·»åŠ åˆ°é¡¹ç›®å¼€å‘è§„èŒƒä¸­
- âœ… **æ–‡æ¡£å®Œå–„**ï¼šè¯¦ç»†è®°å½•é—®é¢˜å‘ç°å’Œè§£å†³è¿‡ç¨‹
- âœ… **çŸ¥è¯†ç§¯ç´¯**ï¼šä¸ºå›¢é˜Ÿæä¾›å®è´µçš„Figma APIä½¿ç”¨ç»éªŒ

**è§„èŒƒæ›´æ–°**ï¼š
- ğŸ“š **Figmaå¼€å‘è§„èŒƒ**ï¼šæ·»åŠ åæ ‡ç³»ç»Ÿå’ŒContainer Parentè§„åˆ™
- ğŸ“‹ **å¼€å‘æ£€æŸ¥æ¸…å•**ï¼šå¢åŠ åæ ‡è®¡ç®—éªŒè¯é¡¹
- ğŸ”— **å®˜æ–¹æ–‡æ¡£å¼•ç”¨**ï¼šæä¾›æƒå¨å‚è€ƒé“¾æ¥

**ç¾½åŒ–è’™ç‰ˆç»„åæ ‡ç³»ç»Ÿé—®é¢˜æ ¹æœ¬ä¿®å¤å®Œæˆï¼** ğŸ‰

è¿™æ¬¡ä¿®å¤ä¸ä»…è§£å†³äº†å…·ä½“çš„ä½ç½®é—®é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯ï¼š
- ğŸ§  **æ·±å…¥ç†è§£**ï¼šæŒæ¡äº†Figmaåæ ‡ç³»ç»Ÿçš„æ ¸å¿ƒæ¦‚å¿µ
- ğŸ“– **æ–‡æ¡£ç ”ç©¶**ï¼šé€šè¿‡MCPå·¥å…·æŸ¥è¯¢å®˜æ–¹APIæ–‡æ¡£æ‰¾åˆ°æ ¹æœ¬åŸå› 
- ğŸ›¡ï¸ **è§„èŒƒå»ºç«‹**ï¼šå°†é‡è¦è§„åˆ™çº³å…¥é¡¹ç›®å¼€å‘è§„èŒƒ
- ğŸ”„ **çŸ¥è¯†ä¼ æ‰¿**ï¼šä¸ºæœªæ¥çš„å¼€å‘å·¥ä½œæä¾›æŒ‡å¯¼

ç°åœ¨H5Toolsé¡¹ç›®å…·å¤‡äº†æ›´ä¸“ä¸šçš„Figmaæ’ä»¶å¼€å‘èƒ½åŠ›ï¼

**ä»£ç ä¸€è‡´æ€§ä¿®æ­£å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolsçš„å®é™…è¿è¡Œä»£ç ä¸åŸå§‹è®¾è®¡ä¿æŒå®Œå…¨ä¸€è‡´ï¼Œç¡®ä¿äº†è®¾è®¡æ„å›¾çš„å‡†ç¡®å®ç°å’Œä»£ç çš„å¯ç»´æŠ¤æ€§ï¼ 

## 2024-12-19 - è‡ªé€‚åº”æ¨¡å—æ¡ä»¶åˆ›å»ºä¼˜åŒ– ğŸ¯ğŸ“¦

### èƒŒæ™¯
ç”¨æˆ·è¦æ±‚ä¸ºè‡ªé€‚åº”æ¨¡å—æ·»åŠ æ¡ä»¶åˆ¤æ–­ï¼Œå½“æ²¡æœ‰æ¨¡å—å†…å®¹æ—¶è·³è¿‡è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„åˆ›å»ºï¼Œä»¥ä¼˜åŒ–H5åŸå‹çš„ç»“æ„å’Œæ€§èƒ½ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **åŸæœ‰é€»è¾‘é—®é¢˜**
- **æ— æ¡ä»¶åˆ›å»º**ï¼šæ— è®ºæ˜¯å¦æœ‰æ¨¡å—å†…å®¹ï¼Œéƒ½ä¼šåˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç©ºå®¹å™¨å­˜åœ¨**ï¼šå½“ç”¨æˆ·åªè®¾ç½®èƒŒæ™¯å›¾ç‰‡è€Œæ²¡æœ‰ä»»ä½•æ¨¡å—å†…å®¹æ—¶ï¼Œä»ä¼šåˆ›å»ºç©ºçš„è‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç»“æ„å†—ä½™**ï¼šç©ºçš„è‡ªé€‚åº”æ¨¡å—å®¹å™¨ä¼šå¢åŠ ä¸å¿…è¦çš„èŠ‚ç‚¹å±‚çº§
- **æ€§èƒ½æµªè´¹**ï¼šæ— æ„ä¹‰çš„å®¹å™¨åˆ›å»ºå’Œå¸ƒå±€è®¡ç®—

#### ğŸ¯ **ä¼˜åŒ–ç›®æ ‡**
- **æ™ºèƒ½åˆ¤æ–­**ï¼šæ ¹æ®é…ç½®å†…å®¹æ™ºèƒ½å†³å®šæ˜¯å¦åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç»“æ„ç²¾ç®€**ï¼šæ²¡æœ‰æ¨¡å—å†…å®¹æ—¶ç›´æ¥ä½¿ç”¨å¤–æ¡†ä½œä¸ºå®¹å™¨
- **æ€§èƒ½æå‡**ï¼šé¿å…ä¸å¿…è¦çš„èŠ‚ç‚¹åˆ›å»ºå’Œå¸ƒå±€è®¡ç®—
- **é€»è¾‘æ¸…æ™°**ï¼šä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤

### ä¿®æ”¹å®æ–½

#### 1. **æ–°å¢å†…å®¹æ£€æµ‹æ–¹æ³•**
**æ–‡ä»¶**: `src/core/builders/h5-prototype-builder.ts`

```typescript
/**
 * æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•æ¨¡å—å†…å®¹éœ€è¦åˆ›å»º
 * @returns boolean å¦‚æœæœ‰ä»»ä½•æ¨¡å—å†…å®¹è¿”å›trueï¼Œå¦åˆ™è¿”å›false
 */
private hasAnyModuleContent(): boolean {
  // æ£€æŸ¥å¤´éƒ¨æ¨¡å—å†…å®¹
  const hasHeaderContent = !!(this.config.headerImage || this.config.titleUpload);
  
  // æ£€æŸ¥æ¸¸æˆä¿¡æ¯æ¨¡å—å†…å®¹
  const hasGameInfoContent = !!(this.config.gameName || this.config.gameDesc || this.config.gameIcon);
  
  // æ£€æŸ¥è‡ªå®šä¹‰æ¨¡å—å†…å®¹
  const hasCustomModules = !!(this.config.modules && this.config.modules.length > 0);
  
  // æ£€æŸ¥è§„åˆ™æ¨¡å—å†…å®¹
  const hasRulesTitle = this.config.rulesTitle && this.config.rulesTitle.trim() !== '';
  const hasRulesBgImage = this.config.rulesBgImage !== null && this.config.rulesBgImage !== undefined;
  const hasRulesContent = this.config.rulesContent && this.config.rulesContent.trim() !== '';
  const hasRulesContent_any = hasRulesTitle || hasRulesBgImage || hasRulesContent;
  
  // æ£€æŸ¥åº•éƒ¨æ¨¡å—å†…å®¹
  const hasFooterContent = !!(this.config.footerLogo || this.config.footerBg);
  
  // å¦‚æœæœ‰ä»»ä½•æ¨¡å—å†…å®¹ï¼Œè¿”å›true
  return hasHeaderContent || hasGameInfoContent || hasCustomModules || hasRulesContent_any || hasFooterContent;
}
```

#### 2. **æ¡ä»¶åŒ–æ¡†æ¶åˆ›å»º**
```typescript
private createBaseFrames(): void {
  // 1. H5åŸå‹å®¹å™¨ä¸éœ€è¦åº”ç”¨è‡ªåŠ¨å¸ƒå±€ï¼Œåªæ˜¯ä¸€ä¸ªç”»æ¿ï¼Œå¹¶è®¾ç½®å†…å®¹è£å‰ª
  this.outerFrame = NodeUtils.createFrame('H5åŸå‹', CONSTANTS.H5_WIDTH, 100);
  this.outerFrame.layoutMode = "NONE"; // ä¸ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€
  this.outerFrame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
  
  // 2. åªæœ‰å½“æœ‰æ¨¡å—å†…å®¹æ—¶æ‰åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
  if (this.hasAnyModuleContent()) {
    this.h5Frame = NodeUtils.createFrame('è‡ªé€‚åº”æ¨¡å—', CONSTANTS.H5_WIDTH, 100);
    this.h5Frame.fills = [];
    
    // è®¾ç½®è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„è‡ªåŠ¨å¸ƒå±€
    NodeUtils.setupAutoLayout(this.h5Frame, 'VERTICAL', 0, 0);
    this.h5Frame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
    this.h5Frame.layoutWrap = "NO_WRAP"; // è®¾ç½®å¸ƒå±€ä¸æ¢è¡Œï¼Œç¡®ä¿æ‰€æœ‰å­å…ƒç´ åœ¨ä¸€åˆ—ä¸­å‚ç›´æ’åˆ—
    
    console.log('æ£€æµ‹åˆ°æ¨¡å—å†…å®¹ï¼Œå·²åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨');
  } else {
    console.log('æœªæ£€æµ‹åˆ°æ¨¡å—å†…å®¹ï¼Œè·³è¿‡è‡ªé€‚åº”æ¨¡å—å®¹å™¨åˆ›å»º');
  }
}
```

#### 3. **é€‚é…èƒŒæ™¯è®¾ç½®é€»è¾‘**
```typescript
private async setupBackground(): Promise<void> {
  // å¦‚æœå­˜åœ¨è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè®¾ç½®å…¶èƒŒæ™¯é¢œè‰²
  if (this.h5Frame) {
    // èƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°è‡ªé€‚åº”æ¨¡å—å®¹å™¨
    if (!isDefaultWhite) {
      const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
      this.h5Frame.fills = [colorFill];
    } else {
      this.h5Frame.fills = [];
    }
  } else {
    // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå°†èƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°å¤–æ¡†
    if (!isDefaultWhite) {
      const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
      this.outerFrame.fills = [colorFill];
    } else {
      this.outerFrame.fills = [];
    }
  }
  
  // èƒŒæ™¯å›¾ç‰‡å¤„ç†é€»è¾‘ä¿æŒä¸å˜...
  
  // è®¾ç½®å®ŒèƒŒæ™¯ä¹‹åï¼Œå¦‚æœå­˜åœ¨è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå°†å…¶æ·»åŠ ä¸ºH5åŸå‹å®¹å™¨çš„å­å…ƒç´ 
  if (this.h5Frame) {
    NodeUtils.safeAppendChild(this.outerFrame, this.h5Frame, 'H5è‡ªé€‚åº”æ¨¡å—å®¹å™¨æ·»åŠ ');
  }
}
```

#### 4. **é€‚é…æ¨¡å—æ·»åŠ é€»è¾‘**
```typescript
private async addModules(): Promise<void> {
  // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè¯´æ˜æ²¡æœ‰æ¨¡å—å†…å®¹ï¼Œç›´æ¥è¿”å›
  if (!this.h5Frame) {
    console.log('æ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè·³è¿‡æ¨¡å—æ·»åŠ ');
    return;
  }
  
  // åˆ›å»ºæ‰€æœ‰æ¨¡å—
  const modules = await this.createAllModules();
  
  // æ‰¹é‡å®‰å…¨æ·»åŠ æ¨¡å—åˆ°H5ç”»æ¿ä¸­
  NodeUtils.safeBatchAppendChildren(this.h5Frame, modules, 'H5æ¨¡å—æ‰¹é‡æ·»åŠ ');
}
```

#### 5. **é€‚é…æœ€ç»ˆå¸ƒå±€é€»è¾‘**
```typescript
private finalizeLayout(): void {
  // è°ƒæ•´H5åŸå‹å®¹å™¨é«˜åº¦
  if (this.h5Frame) {
    // å¦‚æœæœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè°ƒæ•´ä¸ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨é«˜åº¦
    this.outerFrame.resize(CONSTANTS.H5_WIDTH, this.h5Frame.height);
    // æ¨¡å—å®¹å™¨å±‚çº§è°ƒæ•´é€»è¾‘...
  } else {
    // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè®¾ç½®ä¸€ä¸ªæœ€å°é«˜åº¦æˆ–æ ¹æ®èƒŒæ™¯å›¾ç‰‡è°ƒæ•´
    let finalHeight = 100; // é»˜è®¤æœ€å°é«˜åº¦
    
    // å¦‚æœæœ‰èƒŒæ™¯å›¾ç‰‡ï¼Œæ ¹æ®èƒŒæ™¯å›¾ç‰‡é«˜åº¦è°ƒæ•´
    if (this.config.pageBgImage) {
      const bgImageNode = this.outerFrame.findOne(node => node.name === 'é¡µé¢èƒŒæ™¯å›¾ç‰‡');
      if (bgImageNode && 'height' in bgImageNode) {
        finalHeight = Math.max(finalHeight, bgImageNode.height);
      }
    }
    
    this.outerFrame.resize(CONSTANTS.H5_WIDTH, finalHeight);
    console.log(`æ²¡æœ‰æ¨¡å—å†…å®¹ï¼ŒH5åŸå‹è®¾ç½®ä¸ºæœ€å°é«˜åº¦: ${finalHeight}px`);
  }
}
```

### ä¼˜åŒ–æ•ˆæœ

#### ğŸ¯ **æ™ºèƒ½æ£€æµ‹èŒƒå›´**
| æ¨¡å—ç±»å‹ | æ£€æµ‹æ¡ä»¶ | ç¤ºä¾‹ |
|----------|----------|------|
| **å¤´éƒ¨æ¨¡å—** | `headerImage \|\| titleUpload` | å¤´éƒ¨å›¾ç‰‡æˆ–æ ‡é¢˜ä¸Šä¼  |
| **æ¸¸æˆä¿¡æ¯æ¨¡å—** | `gameName \|\| gameDesc \|\| gameIcon` | æ¸¸æˆåç§°ã€æè¿°æˆ–å›¾æ ‡ |
| **è‡ªå®šä¹‰æ¨¡å—** | `modules && modules.length > 0` | è‡ªå®šä¹‰æ¨¡å—æ•°ç»„éç©º |
| **è§„åˆ™æ¨¡å—** | `rulesTitle \|\| rulesBgImage \|\| rulesContent` | è§„åˆ™æ ‡é¢˜ã€èƒŒæ™¯å›¾æˆ–å†…å®¹ |
| **åº•éƒ¨æ¨¡å—** | `footerLogo \|\| footerBg` | åº•éƒ¨Logoæˆ–èƒŒæ™¯ |

#### ğŸ“Š **ç»“æ„å¯¹æ¯”**

**æœ‰æ¨¡å—å†…å®¹æ—¶**ï¼š
```
H5åŸå‹ (1080xåŠ¨æ€é«˜åº¦, æ— èƒŒæ™¯, layoutMode="NONE")
â”œâ”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰)
â””â”€â”€ è‡ªé€‚åº”æ¨¡å— (1080xåŠ¨æ€é«˜åº¦, é…ç½®èƒŒæ™¯è‰², è‡ªåŠ¨å¸ƒå±€)
    â”œâ”€â”€ å¤´éƒ¨æ¨¡å— (å¯é€‰)
    â”œâ”€â”€ æ¸¸æˆä¿¡æ¯æ¨¡å— (å¯é€‰) 
    â”œâ”€â”€ è‡ªå®šä¹‰æ¨¡å—... (å¯é€‰)
    â”œâ”€â”€ è§„åˆ™æ¨¡å— (å¯é€‰)
    â””â”€â”€ åº•éƒ¨æ¨¡å— (å¯é€‰)
```

**æ— æ¨¡å—å†…å®¹æ—¶**ï¼š
```
H5åŸå‹ (1080xèƒŒæ™¯å›¾é«˜åº¦æˆ–100px, é…ç½®èƒŒæ™¯è‰², layoutMode="NONE")
â””â”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰)
```

#### ğŸš€ **æ€§èƒ½æå‡**
- **èŠ‚ç‚¹å‡å°‘**ï¼šæ— å†…å®¹æ—¶å‡å°‘1ä¸ªå®¹å™¨èŠ‚ç‚¹
- **å¸ƒå±€ç®€åŒ–**ï¼šé¿å…ä¸å¿…è¦çš„è‡ªåŠ¨å¸ƒå±€è®¡ç®—
- **å†…å­˜ä¼˜åŒ–**ï¼šå‡å°‘ç©ºå®¹å™¨çš„å†…å­˜å ç”¨
- **æ¸²æŸ“æ•ˆç‡**ï¼šå‡å°‘Figmaæ¸²æŸ“å±‚çº§

#### ğŸ” **ç”¨æˆ·ä½“éªŒæ”¹è¿›**
- **ç»“æ„æ¸…æ™°**ï¼šåªæœ‰èƒŒæ™¯å›¾ç‰‡æ—¶ç»“æ„æ›´ç®€æ´
- **æ€§èƒ½æ›´å¥½**ï¼šå‡å°‘ä¸å¿…è¦çš„èŠ‚ç‚¹æ“ä½œ
- **è°ƒè¯•å‹å¥½**ï¼šæ§åˆ¶å°æ—¥å¿—æ¸…æ™°æ˜¾ç¤ºåˆ›å»ºçŠ¶æ€
- **é€»è¾‘åˆç†**ï¼šç¬¦åˆç”¨æˆ·æœŸæœ›çš„è¡Œä¸º

### éªŒè¯ç»“æœ

#### æ„å»ºçŠ¶æ€
- âœ… **TypeScriptç¼–è¯‘**ï¼šæ— é”™è¯¯
- âœ… **æ„å»ºæˆåŠŸ**ï¼šäº§ç‰©å®Œæ•´
- âœ… **åŠŸèƒ½å®Œæ•´**ï¼šæ‰€æœ‰æ¨¡å—æ£€æµ‹é€»è¾‘æ­£å¸¸å·¥ä½œ
- âœ… **å‘åå…¼å®¹**ï¼šç°æœ‰åŠŸèƒ½ä¿æŒä¸å˜

#### æµ‹è¯•åœºæ™¯
- ğŸ§ª **çº¯èƒŒæ™¯åœºæ™¯**ï¼šåªæœ‰èƒŒæ™¯å›¾ç‰‡/é¢œè‰²ï¼Œæ— æ¨¡å—å†…å®¹
- ğŸ§ª **éƒ¨åˆ†æ¨¡å—åœºæ™¯**ï¼šåªæœ‰éƒ¨åˆ†æ¨¡å—å†…å®¹
- ğŸ§ª **å®Œæ•´æ¨¡å—åœºæ™¯**ï¼šåŒ…å«æ‰€æœ‰ç±»å‹æ¨¡å—å†…å®¹
- ğŸ§ª **ç©ºé…ç½®åœºæ™¯**ï¼šå®Œå…¨ç©ºçš„é…ç½®

### æŠ€æœ¯è¦ç‚¹

#### ğŸ”§ **æ£€æµ‹é€»è¾‘è®¾è®¡**
- **å…¨é¢è¦†ç›–**ï¼šæ£€æµ‹æ‰€æœ‰å¯èƒ½çš„æ¨¡å—ç±»å‹
- **ç²¾ç¡®åˆ¤æ–­**ï¼šä½¿ç”¨ä¸¥æ ¼çš„éç©ºå’Œéç©ºå­—ç¬¦ä¸²æ£€æŸ¥
- **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨çŸ­è·¯é€»è¾‘æé«˜æ£€æµ‹æ•ˆç‡

#### ğŸ›¡ï¸ **å®¹é”™å¤„ç†**
- **ç©ºå€¼å®‰å…¨**ï¼šæ‰€æœ‰æ£€æŸ¥éƒ½åŒ…å«ç©ºå€¼å¤„ç†
- **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptç±»å‹æ£€æŸ¥ç¡®ä¿å®‰å…¨
- **é™çº§å¤„ç†**ï¼šæ£€æµ‹å¤±è´¥æ—¶é‡‡ç”¨ä¿å®ˆç­–ç•¥ï¼ˆåˆ›å»ºå®¹å™¨ï¼‰

#### ğŸ“ **æ—¥å¿—å®Œå–„**
- **çŠ¶æ€è·Ÿè¸ª**ï¼šæ¸…æ™°è®°å½•å®¹å™¨åˆ›å»ºçŠ¶æ€
- **è°ƒè¯•æ”¯æŒ**ï¼šæä¾›è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
- **ç”¨æˆ·åé¦ˆ**ï¼šé€šè¿‡æ—¥å¿—äº†è§£æ’ä»¶è¡Œä¸º

**è‡ªé€‚åº”æ¨¡å—æ¡ä»¶åˆ›å»ºä¼˜åŒ–å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolså…·å¤‡äº†æ™ºèƒ½çš„æ¨¡å—æ£€æµ‹èƒ½åŠ›ï¼Œèƒ½å¤Ÿæ ¹æ®å®é™…å†…å®¹éœ€æ±‚åŠ¨æ€å†³å®šæ˜¯å¦åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå®ç°äº†æ›´ç²¾ç®€çš„ç»“æ„å’Œæ›´å¥½çš„æ€§èƒ½ï¼ 

## 2024-12-19 - è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯å¡«å……ä¼˜åŒ– ğŸ¨ğŸ“¦

### èƒŒæ™¯
ç”¨æˆ·è¦æ±‚å°†è‡ªé€‚åº”æ¨¡å—çš„èƒŒæ™¯å¡«å……æ”¹ä¸ºå§‹ç»ˆé€æ˜å¡«å……ï¼Œä»¥ä¼˜åŒ–H5åŸå‹çš„è§†è§‰å±‚æ¬¡å’ŒèƒŒæ™¯å¤„ç†é€»è¾‘ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **åŸæœ‰èƒŒæ™¯é€»è¾‘é—®é¢˜**
- **åŒé‡èƒŒæ™¯è®¾ç½®**ï¼šèƒŒæ™¯é¢œè‰²å¯èƒ½åŒæ—¶åº”ç”¨åˆ°å¤–æ¡†å’Œè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **é€»è¾‘å¤æ‚**ï¼šæ ¹æ®æ˜¯å¦æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨æ¥å†³å®šèƒŒæ™¯åº”ç”¨ä½ç½®
- **è§†è§‰å†—ä½™**ï¼šè‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„èƒŒæ™¯å¯èƒ½ä¸å¤–æ¡†èƒŒæ™¯é‡å 
- **å±‚æ¬¡ä¸æ¸…**ï¼šèƒŒæ™¯å±‚æ¬¡å…³ç³»ä¸å¤Ÿæ˜ç¡®

#### ğŸ¯ **ä¼˜åŒ–ç›®æ ‡**
- **ç®€åŒ–é€»è¾‘**ï¼šè‡ªé€‚åº”æ¨¡å—å®¹å™¨å§‹ç»ˆé€æ˜ï¼ŒèƒŒæ™¯é¢œè‰²å§‹ç»ˆåº”ç”¨åˆ°å¤–æ¡†
- **æ¸…æ™°å±‚æ¬¡**ï¼šå»ºç«‹æ¸…æ™°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„
- **é¿å…å†—ä½™**ï¼šæ¶ˆé™¤é‡å¤çš„èƒŒæ™¯è®¾ç½®
- **æå‡æ€§èƒ½**ï¼šå‡å°‘ä¸å¿…è¦çš„èƒŒæ™¯è®¡ç®—å’Œæ¸²æŸ“

### ä¿®æ”¹å®æ–½

#### **èƒŒæ™¯è®¾ç½®é€»è¾‘é‡æ„**
**æ–‡ä»¶**: `src/core/builders/h5-prototype-builder.ts`

**ä¿®æ”¹å‰**ï¼š
```typescript
// å¤æ‚çš„æ¡ä»¶åˆ¤æ–­é€»è¾‘
if (this.h5Frame) {
  // æ ¹æ®é¢œè‰²åˆ¤æ–­æ˜¯å¦è®¾ç½®è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯
  if (!isDefaultWhite) {
    const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
    this.h5Frame.fills = [colorFill];
  } else {
    this.h5Frame.fills = [];
  }
} else {
  // æ²¡æœ‰è‡ªé€‚åº”æ¨¡å—æ—¶æ‰è®¾ç½®å¤–æ¡†èƒŒæ™¯
  if (!isDefaultWhite) {
    const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
    this.outerFrame.fills = [colorFill];
  } else {
    this.outerFrame.fills = [];
  }
}
```

**ä¿®æ”¹å**ï¼š
```typescript
// ç®€åŒ–çš„èƒŒæ™¯è®¾ç½®é€»è¾‘
// è‡ªé€‚åº”æ¨¡å—å®¹å™¨å§‹ç»ˆè®¾ç½®ä¸ºé€æ˜å¡«å……
if (this.h5Frame) {
  this.h5Frame.fills = []; // å§‹ç»ˆé€æ˜
  console.log('è‡ªé€‚åº”æ¨¡å—å®¹å™¨è®¾ç½®ä¸ºé€æ˜å¡«å……');
}

// èƒŒæ™¯é¢œè‰²å§‹ç»ˆåº”ç”¨åˆ°å¤–æ¡†ï¼ˆH5åŸå‹å®¹å™¨ï¼‰
if (!isDefaultWhite) {
  const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
  this.outerFrame.fills = [colorFill];
  console.log(`H5åŸå‹å®¹å™¨èƒŒæ™¯è‰²è®¾ç½®ä¸º: ${this.config.pageBgColor}`);
} else {
  // ç™½è‰²æ—¶è®¾ç½®ä¸ºé€æ˜
  this.outerFrame.fills = [];
  console.log('H5åŸå‹å®¹å™¨èƒŒæ™¯è®¾ç½®ä¸ºé€æ˜ï¼ˆç™½è‰²ï¼‰');
}
```

### ä¼˜åŒ–æ•ˆæœ

#### ğŸ¨ **è§†è§‰å±‚æ¬¡ä¼˜åŒ–**

**æ–°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„**ï¼š
```
H5åŸå‹å®¹å™¨ (å¤–æ¡†)
â”œâ”€â”€ èƒŒæ™¯é¢œè‰² (pageBgColor) â† å§‹ç»ˆåœ¨è¿™é‡Œè®¾ç½®
â”œâ”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰) â† åœ¨å¤–æ¡†ä¸­
â””â”€â”€ è‡ªé€‚åº”æ¨¡å—å®¹å™¨ (å§‹ç»ˆé€æ˜) â† ä¸è®¾ç½®èƒŒæ™¯
    â”œâ”€â”€ å¤´éƒ¨æ¨¡å—
    â”œâ”€â”€ æ¸¸æˆä¿¡æ¯æ¨¡å—
    â”œâ”€â”€ è‡ªå®šä¹‰æ¨¡å—...
    â”œâ”€â”€ è§„åˆ™æ¨¡å—
    â””â”€â”€ åº•éƒ¨æ¨¡å—
```

#### ğŸ“Š **é€»è¾‘å¯¹æ¯”**

| æ–¹é¢ | ä¿®æ”¹å‰ | ä¿®æ”¹å | ä¼˜åŠ¿ |
|------|--------|--------|------|
| **èƒŒæ™¯è®¾ç½®ä½ç½®** | æ¡ä»¶åˆ¤æ–­ | å§‹ç»ˆå¤–æ¡† | é€»è¾‘ç»Ÿä¸€ |
| **è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯** | å¯èƒ½æœ‰èƒŒæ™¯ | å§‹ç»ˆé€æ˜ | è§†è§‰æ¸…æ™° |
| **ä»£ç å¤æ‚åº¦** | åŒé‡æ¡ä»¶åˆ¤æ–­ | å•ä¸€é€»è¾‘ | æ˜“ç»´æŠ¤ |
| **æ€§èƒ½** | å¤šæ¬¡èƒŒæ™¯è®¡ç®— | ä¸€æ¬¡è®¾ç½® | æ›´é«˜æ•ˆ |

#### ğŸš€ **æ€§èƒ½æå‡**
- **å‡å°‘èƒŒæ™¯è®¡ç®—**ï¼šåªéœ€è¦ä¸€æ¬¡èƒŒæ™¯é¢œè‰²è®¾ç½®
- **ç®€åŒ–æ¸²æŸ“**ï¼šé¿å…å¤šå±‚èƒŒæ™¯çš„é‡å æ¸²æŸ“
- **å†…å­˜ä¼˜åŒ–**ï¼šå‡å°‘èƒŒæ™¯å¡«å……å¯¹è±¡çš„åˆ›å»º
- **é€»è¾‘æ¸…æ™°**ï¼šä»£ç æ›´æ˜“ç†è§£å’Œç»´æŠ¤

#### ğŸ” **ç”¨æˆ·ä½“éªŒæ”¹è¿›**
- **è§†è§‰ä¸€è‡´æ€§**ï¼šèƒŒæ™¯é¢œè‰²å§‹ç»ˆåœ¨æœ€åº•å±‚
- **é€æ˜åº¦æ§åˆ¶**ï¼šè‡ªé€‚åº”æ¨¡å—é€æ˜ï¼Œä¸å½±å“èƒŒæ™¯æ˜¾ç¤º
- **è°ƒè¯•å‹å¥½**ï¼šæ¸…æ™°çš„æ—¥å¿—æ˜¾ç¤ºèƒŒæ™¯è®¾ç½®çŠ¶æ€
- **é¢„æœŸè¡Œä¸º**ï¼šç¬¦åˆç”¨æˆ·å¯¹èƒŒæ™¯å±‚æ¬¡çš„é¢„æœŸ

### åº”ç”¨åœºæ™¯

#### ğŸ¯ **é€‚ç”¨æƒ…å†µ**
1. **çº¯è‰²èƒŒæ™¯**ï¼šèƒŒæ™¯é¢œè‰²ç›´æ¥åº”ç”¨åˆ°å¤–æ¡†ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
2. **èƒŒæ™¯å›¾ç‰‡**ï¼šå›¾ç‰‡åœ¨å¤–æ¡†ä¸­ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜ä¸é®æŒ¡
3. **æ··åˆèƒŒæ™¯**ï¼šèƒŒæ™¯è‰²+èƒŒæ™¯å›¾ç‰‡ï¼Œå±‚æ¬¡æ¸…æ™°
4. **æ— èƒŒæ™¯å†…å®¹**ï¼šåªæœ‰è‡ªé€‚åº”æ¨¡å—æ—¶ï¼ŒèƒŒæ™¯é€»è¾‘ä¾ç„¶æ¸…æ™°

#### ğŸ“‹ **è§†è§‰æ•ˆæœ**
- **æœ‰èƒŒæ™¯è‰²æ—¶**ï¼šå¤–æ¡†æ˜¾ç¤ºèƒŒæ™¯è‰²ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
- **æœ‰èƒŒæ™¯å›¾æ—¶**ï¼šå›¾ç‰‡åœ¨å¤–æ¡†ä¸­æ˜¾ç¤ºï¼Œè‡ªé€‚åº”æ¨¡å—ä¸é®æŒ¡
- **ç™½è‰²èƒŒæ™¯æ—¶**ï¼šå¤–æ¡†é€æ˜ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜ï¼Œæ•´ä½“é€æ˜
- **æ— æ¨¡å—å†…å®¹æ—¶**ï¼šåªæœ‰å¤–æ¡†ï¼ŒèƒŒæ™¯è®¾ç½®æ­£å¸¸

### éªŒè¯ç»“æœ

#### æ„å»ºçŠ¶æ€
- âœ… **TypeScriptç¼–è¯‘**ï¼šæ— é”™è¯¯
- âœ… **æ„å»ºæˆåŠŸ**ï¼šäº§ç‰©å®Œæ•´
- âœ… **é€»è¾‘ç®€åŒ–**ï¼šèƒŒæ™¯è®¾ç½®é€»è¾‘æ›´æ¸…æ™°
- âœ… **å‘åå…¼å®¹**ï¼šè§†è§‰æ•ˆæœä¿æŒä¸€è‡´

#### æµ‹è¯•åœºæ™¯
- ğŸ§ª **çº¯è‰²èƒŒæ™¯**ï¼šå¤–æ¡†èƒŒæ™¯è‰²ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
- ğŸ§ª **èƒŒæ™¯å›¾ç‰‡**ï¼šå›¾ç‰‡æ˜¾ç¤ºæ­£å¸¸ï¼Œæ¨¡å—ä¸é®æŒ¡
- ğŸ§ª **ç™½è‰²èƒŒæ™¯**ï¼šæ•´ä½“é€æ˜ï¼Œæ— å¤šä½™èƒŒæ™¯
- ğŸ§ª **æ··åˆèƒŒæ™¯**ï¼šè‰²å½©+å›¾ç‰‡å±‚æ¬¡æ¸…æ™°

### æŠ€æœ¯è¦ç‚¹

#### ğŸ”§ **è®¾è®¡åŸåˆ™**
- **å•ä¸€èŒè´£**ï¼šå¤–æ¡†è´Ÿè´£èƒŒæ™¯ï¼Œè‡ªé€‚åº”æ¨¡å—è´Ÿè´£å†…å®¹å¸ƒå±€
- **å±‚æ¬¡åˆ†ç¦»**ï¼šèƒŒæ™¯å±‚ä¸å†…å®¹å±‚æ˜ç¡®åˆ†ç¦»
- **é€»è¾‘ç»Ÿä¸€**ï¼šæ— è®ºä½•ç§æƒ…å†µï¼ŒèƒŒæ™¯é€»è¾‘ä¿æŒä¸€è‡´

#### ğŸ›¡ï¸ **å®¹é”™å¤„ç†**
- **ç©ºå€¼å®‰å…¨**ï¼šèƒŒæ™¯é¢œè‰²è®¾ç½®åŒ…å«é»˜è®¤å€¼å¤„ç†
- **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptç¡®ä¿ç±»å‹æ­£ç¡®
- **æ—¥å¿—å®Œå–„**ï¼šè¯¦ç»†è®°å½•èƒŒæ™¯è®¾ç½®çŠ¶æ€

#### ğŸ“ **æ—¥å¿—ä¼˜åŒ–**
- **çŠ¶æ€è·Ÿè¸ª**ï¼šæ¸…æ™°è®°å½•èƒŒæ™¯è®¾ç½®è¿‡ç¨‹
- **è°ƒè¯•æ”¯æŒ**ï¼šæä¾›è¯¦ç»†çš„èƒŒæ™¯è®¾ç½®ä¿¡æ¯
- **ç”¨æˆ·åé¦ˆ**ï¼šé€šè¿‡æ—¥å¿—äº†è§£èƒŒæ™¯å¤„ç†çŠ¶æ€

**è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯å¡«å……ä¼˜åŒ–å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolså…·å¤‡äº†æ›´æ¸…æ™°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„ï¼Œè‡ªé€‚åº”æ¨¡å—å§‹ç»ˆé€æ˜ï¼ŒèƒŒæ™¯é¢œè‰²ç»Ÿä¸€åº”ç”¨åˆ°å¤–æ¡†ï¼Œå®ç°äº†æ›´ç®€æ´çš„é€»è¾‘å’Œæ›´å¥½çš„è§†è§‰æ•ˆæœï¼ 

## 2024-12-19 - ç¾½åŒ–è’™ç‰ˆç»„åæ ‡ç³»ç»Ÿé—®é¢˜æ ¹æœ¬ä¿®å¤ ğŸ¯ğŸ”§

### é—®é¢˜èƒŒæ™¯
ç”¨æˆ·åé¦ˆç¾½åŒ–è’™ç‰ˆç»„ä¾ç„¶æ²¡æœ‰æ­£ç¡®å±…ä¸­ï¼Œé€šè¿‡MCPå·¥å…·æŸ¥è¯¢Figma Plugin APIæ–‡æ¡£å‘ç°äº†åæ ‡ç³»ç»Ÿçš„æ ¹æœ¬é—®é¢˜ã€‚

### ğŸ” æ ¹æœ¬åŸå› å‘ç°
é€šè¿‡æŸ¥è¯¢Figma Plugin APIå®˜æ–¹æ–‡æ¡£ï¼Œå‘ç°äº†**Container Parentï¼ˆå®¹å™¨çˆ¶çº§ï¼‰**çš„é‡è¦æ¦‚å¿µï¼š

> **Container parent**: The relative transform of a node is shown relative to its container parent, which includes canvas nodes, frame nodes, component nodes, and instance nodes. Just like in the properties panel, it is **not** relative to its direct parent if the parent is a group or a boolean operation.

**å…³é”®å‘ç°**ï¼š
- **ç»„ï¼ˆGroupï¼‰ä¸æ˜¯å®¹å™¨çˆ¶çº§**ï¼šç»„å†…å­å…ƒç´ çš„åæ ‡ä¸æ˜¯ç›¸å¯¹äºç»„ï¼Œè€Œæ˜¯ç›¸å¯¹äºåŒ…å«è¯¥ç»„çš„å®¹å™¨çˆ¶çº§
- **å¤´å›¾ç»„æ˜¯Groupç±»å‹**ï¼šæ‰€ä»¥ç¾½åŒ–è’™ç‰ˆç»„çš„åæ ‡å®é™…ä¸Šæ˜¯ç›¸å¯¹äºåŒ…å«å¤´å›¾ç»„çš„å®¹å™¨
- **ä¹‹å‰çš„å±…ä¸­è®¡ç®—å®Œå…¨é”™è¯¯**ï¼šæˆ‘ä»¬æŒ‰ç…§ç›¸å¯¹äºå¤´å›¾ç»„çš„é€»è¾‘æ¥è®¡ç®—ï¼Œä½†åæ ‡ç³»ç»Ÿæ ¹æœ¬ä¸æ˜¯è¿™æ ·å·¥ä½œçš„

### ğŸš¨ é—®é¢˜åˆ†æ
```
é”™è¯¯ç†è§£çš„åæ ‡ç³»ç»Ÿï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (Group, x: 0)
   â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (x: -120.5) â† ä»¥ä¸ºæ˜¯ç›¸å¯¹äºå¤´å›¾ç»„
   â””â”€ å¤´å›¾èŠ‚ç‚¹ (x: 0) â† ä»¥ä¸ºæ˜¯ç›¸å¯¹äºå¤´å›¾ç»„

å®é™…çš„åæ ‡ç³»ç»Ÿï¼š
é¡µé¢ (Container Parent)
â”œâ”€ å¤´å›¾ç»„ (Group, x: 0) â† ä¸æ˜¯å®¹å™¨çˆ¶çº§
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (x: -120.5) â† å®é™…ç›¸å¯¹äºé¡µé¢ï¼
â””â”€ å¤´å›¾èŠ‚ç‚¹ (x: 0) â† å®é™…ç›¸å¯¹äºé¡µé¢ï¼
```

### âœ… ä¿®å¤æ–¹æ¡ˆ
**ä¿®æ”¹æ–‡ä»¶**ï¼š`src/core/builders/module-builders.ts`

**ä¿®å¤é€»è¾‘**ï¼š
```typescript
// ğŸš¨ é‡è¦ä¿®æ­£ï¼šæ ¹æ®Figma APIæ–‡æ¡£ï¼Œç»„ï¼ˆGroupï¼‰ä¸æ˜¯"å®¹å™¨çˆ¶çº§"
// ç»„å†…å…ƒç´ çš„åæ ‡æ˜¯ç›¸å¯¹äºåŒ…å«è¯¥ç»„çš„å®¹å™¨çˆ¶çº§ï¼Œè€Œä¸æ˜¯ç›¸å¯¹äºç»„æœ¬èº«

// ç¾½åŒ–è’™ç‰ˆç»„çš„ç»å¯¹ä½ç½®åº”è¯¥æ˜¯ï¼šå¤´å›¾ç»„ä½ç½® + ç»„å†…å±…ä¸­åç§»
const headerGroupX = originalX; // å¤´å›¾ç»„åœ¨å®¹å™¨ä¸­çš„Xä½ç½®
const centerOffset = (originalWidth - rectWidth) / 2; // å±…ä¸­åç§»é‡

// ç¾½åŒ–è’™ç‰ˆç»„çš„æœ€ç»ˆä½ç½®
featherMaskGroup.x = headerGroupX + centerOffset; // ç»å¯¹ä½ç½®ï¼šç»„ä½ç½® + å±…ä¸­åç§»
featherMaskGroup.y = originalY - blurRadius; // ç»å¯¹ä½ç½®ï¼šç»„ä½ç½® + Yåç§»

// å¤´å›¾èŠ‚ç‚¹åœ¨å¤´å›¾ç»„å†…çš„ä½ç½®ï¼ˆç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›¸å¯¹äºç»„ï¼‰
headerNode.x = originalX; // ä¿æŒåŸå§‹Xä½ç½®
headerNode.y = originalY; // ä¿æŒåŸå§‹Yä½ç½®
```

### ğŸ“Š ä¿®å¤æ•ˆæœå¯¹æ¯”
```
ä¿®å¤å‰ï¼ˆé”™è¯¯åæ ‡ç³»ç»Ÿï¼‰ï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (1080px, x: 0)
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (1321px, x: -120.5) â† ç›¸å¯¹äºé¡µé¢ï¼Œå¯¼è‡´åç§»
â””â”€ å¤´å›¾èŠ‚ç‚¹ (1080px, x: 0)

ä¿®å¤åï¼ˆæ­£ç¡®åæ ‡ç³»ç»Ÿï¼‰ï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (1080px, x: 0)
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (1321px, x: 0 + (-120.5) = -120.5) â† æ­£ç¡®çš„ç»å¯¹ä½ç½®
â””â”€ å¤´å›¾èŠ‚ç‚¹ (1080px, x: 0)
```

### ğŸ¯ æŠ€æœ¯å­¦ä¹ 
**Figmaåæ ‡ç³»ç»Ÿçš„é‡è¦æ¦‚å¿µ**ï¼š
1. **å®¹å™¨çˆ¶çº§**ï¼šåªæœ‰Canvasã€Frameã€Componentã€Instanceæ˜¯å®¹å™¨çˆ¶çº§
2. **ç»„å’Œå¸ƒå°”è¿ç®—**ï¼šä¸æ˜¯å®¹å™¨çˆ¶çº§ï¼Œå…¶å­å…ƒç´ åæ ‡ç›¸å¯¹äºæ›´ä¸Šå±‚çš„å®¹å™¨
3. **ç›¸å¯¹å˜æ¢**ï¼š`relativeTransform`æ€»æ˜¯ç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›´æ¥çˆ¶çº§
4. **ç»„çš„ç‰¹æ®Šæ€§**ï¼šç»„ä¼šè‡ªåŠ¨è°ƒæ•´å¤§å°ä»¥é€‚åº”å…¶å†…å®¹ï¼Œä½ç½®ç”±å­å…ƒç´ å†³å®š

### ğŸ“š å‚è€ƒæ–‡æ¡£
- **Figma Plugin API - relativeTransform**: https://www.figma.com/plugin-docs/api/properties/nodes-relativetransform/
- **Figma Plugin API - GroupNode**: https://www.figma.com/plugin-docs/api/GroupNode/
- **Container Parentæ¦‚å¿µ**ï¼šç»„å’Œå¸ƒå°”è¿ç®—ä¸æ˜¯å®¹å™¨çˆ¶çº§çš„é‡è¦è¯´æ˜

### ğŸ”§ æ„å»ºéªŒè¯

è¿è¡Œ `npm run build` éªŒè¯ä¿®å¤æ•ˆæœï¼š

**æ„å»ºç»“æœ**ï¼š
- âœ… **TypeScriptç¼–è¯‘**ï¼šæˆåŠŸç¼–è¯‘ï¼Œæœ‰ä¸€äº›é¢„æœŸçš„è­¦å‘Šï¼ˆlocalStorageã€windowç­‰åœ¨æ’ä»¶ç¯å¢ƒä¸­çš„ç±»å‹é—®é¢˜ï¼‰
- âœ… **æ’ä»¶æ„å»º**ï¼š`dist/plugin/code-standalone.js` ç”ŸæˆæˆåŠŸ
- âœ… **UIæ„å»º**ï¼š`dist/ui.html` (192.9KB) ç”ŸæˆæˆåŠŸï¼ŒCSSå’ŒJSå®Œå…¨å†…è”
- âœ… **æ ¸å¿ƒåº“æ„å»º**ï¼šæ¨¡å—åŒ–æ„å»ºå®Œæˆ
- âœ… **æ²™ç›’é€‚é…**ï¼šç¬¦åˆFigmaæ’ä»¶å®‰å…¨ç­–ç•¥

**æ„å»ºäº§ç‰©**ï¼š
```
dist/
â”œâ”€â”€ core/ (æ ¸å¿ƒåº“æ¨¡å—)
â”œâ”€â”€ plugin/ (æ’ä»¶ä¸»ç¨‹åº)
â””â”€â”€ ui.html (192.9KB, å®Œå…¨å†…è”ç‰ˆæœ¬)
```

### ğŸ¯ ä¿®å¤æ€»ç»“

**å…³é”®å‘ç°**ï¼š
- **Container Parentæ¦‚å¿µ**ï¼šFigmaåæ ‡ç³»ç»Ÿçš„æ ¸å¿ƒåŸç†
- **ç»„ä¸æ˜¯å®¹å™¨çˆ¶çº§**ï¼šGroupã€BooleanOperationçš„å­å…ƒç´ åæ ‡ç›¸å¯¹äºæ›´ä¸Šå±‚å®¹å™¨
- **ç›¸å¯¹å˜æ¢**ï¼š`relativeTransform`æ€»æ˜¯ç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›´æ¥çˆ¶çº§

**ä¿®å¤æ•ˆæœ**ï¼š
- âœ… **åæ ‡è®¡ç®—æ­£ç¡®**ï¼šç¾½åŒ–è’™ç‰ˆç»„ä½ç½®åŸºäºæ­£ç¡®çš„åæ ‡ç³»ç»Ÿ
- âœ… **è§„èŒƒæ›´æ–°**ï¼šå°†é‡è¦è§„åˆ™æ·»åŠ åˆ°é¡¹ç›®å¼€å‘è§„èŒƒä¸­
- âœ… **æ–‡æ¡£å®Œå–„**ï¼šè¯¦ç»†è®°å½•é—®é¢˜å‘ç°å’Œè§£å†³è¿‡ç¨‹
- âœ… **çŸ¥è¯†ç§¯ç´¯**ï¼šä¸ºå›¢é˜Ÿæä¾›å®è´µçš„Figma APIä½¿ç”¨ç»éªŒ

**è§„èŒƒæ›´æ–°**ï¼š
- ğŸ“š **Figmaå¼€å‘è§„èŒƒ**ï¼šæ·»åŠ åæ ‡ç³»ç»Ÿå’ŒContainer Parentè§„åˆ™
- ğŸ“‹ **å¼€å‘æ£€æŸ¥æ¸…å•**ï¼šå¢åŠ åæ ‡è®¡ç®—éªŒè¯é¡¹
- ğŸ”— **å®˜æ–¹æ–‡æ¡£å¼•ç”¨**ï¼šæä¾›æƒå¨å‚è€ƒé“¾æ¥

**ç¾½åŒ–è’™ç‰ˆç»„åæ ‡ç³»ç»Ÿé—®é¢˜æ ¹æœ¬ä¿®å¤å®Œæˆï¼** ğŸ‰

è¿™æ¬¡ä¿®å¤ä¸ä»…è§£å†³äº†å…·ä½“çš„ä½ç½®é—®é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯ï¼š
- ğŸ§  **æ·±å…¥ç†è§£**ï¼šæŒæ¡äº†Figmaåæ ‡ç³»ç»Ÿçš„æ ¸å¿ƒæ¦‚å¿µ
- ğŸ“– **æ–‡æ¡£ç ”ç©¶**ï¼šé€šè¿‡MCPå·¥å…·æŸ¥è¯¢å®˜æ–¹APIæ–‡æ¡£æ‰¾åˆ°æ ¹æœ¬åŸå› 
- ğŸ›¡ï¸ **è§„èŒƒå»ºç«‹**ï¼šå°†é‡è¦è§„åˆ™çº³å…¥é¡¹ç›®å¼€å‘è§„èŒƒ
- ğŸ”„ **çŸ¥è¯†ä¼ æ‰¿**ï¼šä¸ºæœªæ¥çš„å¼€å‘å·¥ä½œæä¾›æŒ‡å¯¼

ç°åœ¨H5Toolsé¡¹ç›®å…·å¤‡äº†æ›´ä¸“ä¸šçš„Figmaæ’ä»¶å¼€å‘èƒ½åŠ›ï¼

**ä»£ç ä¸€è‡´æ€§ä¿®æ­£å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolsçš„å®é™…è¿è¡Œä»£ç ä¸åŸå§‹è®¾è®¡ä¿æŒå®Œå…¨ä¸€è‡´ï¼Œç¡®ä¿äº†è®¾è®¡æ„å›¾çš„å‡†ç¡®å®ç°å’Œä»£ç çš„å¯ç»´æŠ¤æ€§ï¼ 

## 2024-12-19 - è‡ªé€‚åº”æ¨¡å—æ¡ä»¶åˆ›å»ºä¼˜åŒ– ğŸ¯ğŸ“¦

### èƒŒæ™¯
ç”¨æˆ·è¦æ±‚ä¸ºè‡ªé€‚åº”æ¨¡å—æ·»åŠ æ¡ä»¶åˆ¤æ–­ï¼Œå½“æ²¡æœ‰æ¨¡å—å†…å®¹æ—¶è·³è¿‡è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„åˆ›å»ºï¼Œä»¥ä¼˜åŒ–H5åŸå‹çš„ç»“æ„å’Œæ€§èƒ½ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **åŸæœ‰é€»è¾‘é—®é¢˜**
- **æ— æ¡ä»¶åˆ›å»º**ï¼šæ— è®ºæ˜¯å¦æœ‰æ¨¡å—å†…å®¹ï¼Œéƒ½ä¼šåˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç©ºå®¹å™¨å­˜åœ¨**ï¼šå½“ç”¨æˆ·åªè®¾ç½®èƒŒæ™¯å›¾ç‰‡è€Œæ²¡æœ‰ä»»ä½•æ¨¡å—å†…å®¹æ—¶ï¼Œä»ä¼šåˆ›å»ºç©ºçš„è‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç»“æ„å†—ä½™**ï¼šç©ºçš„è‡ªé€‚åº”æ¨¡å—å®¹å™¨ä¼šå¢åŠ ä¸å¿…è¦çš„èŠ‚ç‚¹å±‚çº§
- **æ€§èƒ½æµªè´¹**ï¼šæ— æ„ä¹‰çš„å®¹å™¨åˆ›å»ºå’Œå¸ƒå±€è®¡ç®—

#### ğŸ¯ **ä¼˜åŒ–ç›®æ ‡**
- **æ™ºèƒ½åˆ¤æ–­**ï¼šæ ¹æ®é…ç½®å†…å®¹æ™ºèƒ½å†³å®šæ˜¯å¦åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç»“æ„ç²¾ç®€**ï¼šæ²¡æœ‰æ¨¡å—å†…å®¹æ—¶ç›´æ¥ä½¿ç”¨å¤–æ¡†ä½œä¸ºå®¹å™¨
- **æ€§èƒ½æå‡**ï¼šé¿å…ä¸å¿…è¦çš„èŠ‚ç‚¹åˆ›å»ºå’Œå¸ƒå±€è®¡ç®—
- **é€»è¾‘æ¸…æ™°**ï¼šä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤

### ä¿®æ”¹å®æ–½

#### 1. **æ–°å¢å†…å®¹æ£€æµ‹æ–¹æ³•**
**æ–‡ä»¶**: `src/core/builders/h5-prototype-builder.ts`

```typescript
/**
 * æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•æ¨¡å—å†…å®¹éœ€è¦åˆ›å»º
 * @returns boolean å¦‚æœæœ‰ä»»ä½•æ¨¡å—å†…å®¹è¿”å›trueï¼Œå¦åˆ™è¿”å›false
 */
private hasAnyModuleContent(): boolean {
  // æ£€æŸ¥å¤´éƒ¨æ¨¡å—å†…å®¹
  const hasHeaderContent = !!(this.config.headerImage || this.config.titleUpload);
  
  // æ£€æŸ¥æ¸¸æˆä¿¡æ¯æ¨¡å—å†…å®¹
  const hasGameInfoContent = !!(this.config.gameName || this.config.gameDesc || this.config.gameIcon);
  
  // æ£€æŸ¥è‡ªå®šä¹‰æ¨¡å—å†…å®¹
  const hasCustomModules = !!(this.config.modules && this.config.modules.length > 0);
  
  // æ£€æŸ¥è§„åˆ™æ¨¡å—å†…å®¹
  const hasRulesTitle = this.config.rulesTitle && this.config.rulesTitle.trim() !== '';
  const hasRulesBgImage = this.config.rulesBgImage !== null && this.config.rulesBgImage !== undefined;
  const hasRulesContent = this.config.rulesContent && this.config.rulesContent.trim() !== '';
  const hasRulesContent_any = hasRulesTitle || hasRulesBgImage || hasRulesContent;
  
  // æ£€æŸ¥åº•éƒ¨æ¨¡å—å†…å®¹
  const hasFooterContent = !!(this.config.footerLogo || this.config.footerBg);
  
  // å¦‚æœæœ‰ä»»ä½•æ¨¡å—å†…å®¹ï¼Œè¿”å›true
  return hasHeaderContent || hasGameInfoContent || hasCustomModules || hasRulesContent_any || hasFooterContent;
}
```

#### 2. **æ¡ä»¶åŒ–æ¡†æ¶åˆ›å»º**
```typescript
private createBaseFrames(): void {
  // 1. H5åŸå‹å®¹å™¨ä¸éœ€è¦åº”ç”¨è‡ªåŠ¨å¸ƒå±€ï¼Œåªæ˜¯ä¸€ä¸ªç”»æ¿ï¼Œå¹¶è®¾ç½®å†…å®¹è£å‰ª
  this.outerFrame = NodeUtils.createFrame('H5åŸå‹', CONSTANTS.H5_WIDTH, 100);
  this.outerFrame.layoutMode = "NONE"; // ä¸ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€
  this.outerFrame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
  
  // 2. åªæœ‰å½“æœ‰æ¨¡å—å†…å®¹æ—¶æ‰åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
  if (this.hasAnyModuleContent()) {
    this.h5Frame = NodeUtils.createFrame('è‡ªé€‚åº”æ¨¡å—', CONSTANTS.H5_WIDTH, 100);
    this.h5Frame.fills = [];
    
    // è®¾ç½®è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„è‡ªåŠ¨å¸ƒå±€
    NodeUtils.setupAutoLayout(this.h5Frame, 'VERTICAL', 0, 0);
    this.h5Frame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
    this.h5Frame.layoutWrap = "NO_WRAP"; // è®¾ç½®å¸ƒå±€ä¸æ¢è¡Œï¼Œç¡®ä¿æ‰€æœ‰å­å…ƒç´ åœ¨ä¸€åˆ—ä¸­å‚ç›´æ’åˆ—
    
    console.log('æ£€æµ‹åˆ°æ¨¡å—å†…å®¹ï¼Œå·²åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨');
  } else {
    console.log('æœªæ£€æµ‹åˆ°æ¨¡å—å†…å®¹ï¼Œè·³è¿‡è‡ªé€‚åº”æ¨¡å—å®¹å™¨åˆ›å»º');
  }
}
```

#### 3. **é€‚é…èƒŒæ™¯è®¾ç½®é€»è¾‘**
```typescript
private async setupBackground(): Promise<void> {
  // å¦‚æœå­˜åœ¨è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè®¾ç½®å…¶èƒŒæ™¯é¢œè‰²
  if (this.h5Frame) {
    // èƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°è‡ªé€‚åº”æ¨¡å—å®¹å™¨
    if (!isDefaultWhite) {
      const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
      this.h5Frame.fills = [colorFill];
    } else {
      this.h5Frame.fills = [];
    }
  } else {
    // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå°†èƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°å¤–æ¡†
    if (!isDefaultWhite) {
      const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
      this.outerFrame.fills = [colorFill];
    } else {
      this.outerFrame.fills = [];
    }
  }
  
  // èƒŒæ™¯å›¾ç‰‡å¤„ç†é€»è¾‘ä¿æŒä¸å˜...
  
  // è®¾ç½®å®ŒèƒŒæ™¯ä¹‹åï¼Œå¦‚æœå­˜åœ¨è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå°†å…¶æ·»åŠ ä¸ºH5åŸå‹å®¹å™¨çš„å­å…ƒç´ 
  if (this.h5Frame) {
    NodeUtils.safeAppendChild(this.outerFrame, this.h5Frame, 'H5è‡ªé€‚åº”æ¨¡å—å®¹å™¨æ·»åŠ ');
  }
}
```

#### 4. **é€‚é…æ¨¡å—æ·»åŠ é€»è¾‘**
```typescript
private async addModules(): Promise<void> {
  // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè¯´æ˜æ²¡æœ‰æ¨¡å—å†…å®¹ï¼Œç›´æ¥è¿”å›
  if (!this.h5Frame) {
    console.log('æ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè·³è¿‡æ¨¡å—æ·»åŠ ');
    return;
  }
  
  // åˆ›å»ºæ‰€æœ‰æ¨¡å—
  const modules = await this.createAllModules();
  
  // æ‰¹é‡å®‰å…¨æ·»åŠ æ¨¡å—åˆ°H5ç”»æ¿ä¸­
  NodeUtils.safeBatchAppendChildren(this.h5Frame, modules, 'H5æ¨¡å—æ‰¹é‡æ·»åŠ ');
}
```

#### 5. **é€‚é…æœ€ç»ˆå¸ƒå±€é€»è¾‘**
```typescript
private finalizeLayout(): void {
  // è°ƒæ•´H5åŸå‹å®¹å™¨é«˜åº¦
  if (this.h5Frame) {
    // å¦‚æœæœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè°ƒæ•´ä¸ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨é«˜åº¦
    this.outerFrame.resize(CONSTANTS.H5_WIDTH, this.h5Frame.height);
    // æ¨¡å—å®¹å™¨å±‚çº§è°ƒæ•´é€»è¾‘...
  } else {
    // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè®¾ç½®ä¸€ä¸ªæœ€å°é«˜åº¦æˆ–æ ¹æ®èƒŒæ™¯å›¾ç‰‡è°ƒæ•´
    let finalHeight = 100; // é»˜è®¤æœ€å°é«˜åº¦
    
    // å¦‚æœæœ‰èƒŒæ™¯å›¾ç‰‡ï¼Œæ ¹æ®èƒŒæ™¯å›¾ç‰‡é«˜åº¦è°ƒæ•´
    if (this.config.pageBgImage) {
      const bgImageNode = this.outerFrame.findOne(node => node.name === 'é¡µé¢èƒŒæ™¯å›¾ç‰‡');
      if (bgImageNode && 'height' in bgImageNode) {
        finalHeight = Math.max(finalHeight, bgImageNode.height);
      }
    }
    
    this.outerFrame.resize(CONSTANTS.H5_WIDTH, finalHeight);
    console.log(`æ²¡æœ‰æ¨¡å—å†…å®¹ï¼ŒH5åŸå‹è®¾ç½®ä¸ºæœ€å°é«˜åº¦: ${finalHeight}px`);
  }
}
```

### ä¼˜åŒ–æ•ˆæœ

#### ğŸ¯ **æ™ºèƒ½æ£€æµ‹èŒƒå›´**
| æ¨¡å—ç±»å‹ | æ£€æµ‹æ¡ä»¶ | ç¤ºä¾‹ |
|----------|----------|------|
| **å¤´éƒ¨æ¨¡å—** | `headerImage \|\| titleUpload` | å¤´éƒ¨å›¾ç‰‡æˆ–æ ‡é¢˜ä¸Šä¼  |
| **æ¸¸æˆä¿¡æ¯æ¨¡å—** | `gameName \|\| gameDesc \|\| gameIcon` | æ¸¸æˆåç§°ã€æè¿°æˆ–å›¾æ ‡ |
| **è‡ªå®šä¹‰æ¨¡å—** | `modules && modules.length > 0` | è‡ªå®šä¹‰æ¨¡å—æ•°ç»„éç©º |
| **è§„åˆ™æ¨¡å—** | `rulesTitle \|\| rulesBgImage \|\| rulesContent` | è§„åˆ™æ ‡é¢˜ã€èƒŒæ™¯å›¾æˆ–å†…å®¹ |
| **åº•éƒ¨æ¨¡å—** | `footerLogo \|\| footerBg` | åº•éƒ¨Logoæˆ–èƒŒæ™¯ |

#### ğŸ“Š **ç»“æ„å¯¹æ¯”**

**æœ‰æ¨¡å—å†…å®¹æ—¶**ï¼š
```
H5åŸå‹ (1080xåŠ¨æ€é«˜åº¦, æ— èƒŒæ™¯, layoutMode="NONE")
â”œâ”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰)
â””â”€â”€ è‡ªé€‚åº”æ¨¡å— (1080xåŠ¨æ€é«˜åº¦, é…ç½®èƒŒæ™¯è‰², è‡ªåŠ¨å¸ƒå±€)
    â”œâ”€â”€ å¤´éƒ¨æ¨¡å— (å¯é€‰)
    â”œâ”€â”€ æ¸¸æˆä¿¡æ¯æ¨¡å— (å¯é€‰) 
    â”œâ”€â”€ è‡ªå®šä¹‰æ¨¡å—... (å¯é€‰)
    â”œâ”€â”€ è§„åˆ™æ¨¡å— (å¯é€‰)
    â””â”€â”€ åº•éƒ¨æ¨¡å— (å¯é€‰)
```

**æ— æ¨¡å—å†…å®¹æ—¶**ï¼š
```
H5åŸå‹ (1080xèƒŒæ™¯å›¾é«˜åº¦æˆ–100px, é…ç½®èƒŒæ™¯è‰², layoutMode="NONE")
â””â”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰)
```

#### ğŸš€ **æ€§èƒ½æå‡**
- **èŠ‚ç‚¹å‡å°‘**ï¼šæ— å†…å®¹æ—¶å‡å°‘1ä¸ªå®¹å™¨èŠ‚ç‚¹
- **å¸ƒå±€ç®€åŒ–**ï¼šé¿å…ä¸å¿…è¦çš„è‡ªåŠ¨å¸ƒå±€è®¡ç®—
- **å†…å­˜ä¼˜åŒ–**ï¼šå‡å°‘ç©ºå®¹å™¨çš„å†…å­˜å ç”¨
- **æ¸²æŸ“æ•ˆç‡**ï¼šå‡å°‘Figmaæ¸²æŸ“å±‚çº§

#### ğŸ” **ç”¨æˆ·ä½“éªŒæ”¹è¿›**
- **ç»“æ„æ¸…æ™°**ï¼šåªæœ‰èƒŒæ™¯å›¾ç‰‡æ—¶ç»“æ„æ›´ç®€æ´
- **æ€§èƒ½æ›´å¥½**ï¼šå‡å°‘ä¸å¿…è¦çš„èŠ‚ç‚¹æ“ä½œ
- **è°ƒè¯•å‹å¥½**ï¼šæ§åˆ¶å°æ—¥å¿—æ¸…æ™°æ˜¾ç¤ºåˆ›å»ºçŠ¶æ€
- **é€»è¾‘åˆç†**ï¼šç¬¦åˆç”¨æˆ·æœŸæœ›çš„è¡Œä¸º

### éªŒè¯ç»“æœ

#### æ„å»ºçŠ¶æ€
- âœ… **TypeScriptç¼–è¯‘**ï¼šæ— é”™è¯¯
- âœ… **æ„å»ºæˆåŠŸ**ï¼šäº§ç‰©å®Œæ•´
- âœ… **åŠŸèƒ½å®Œæ•´**ï¼šæ‰€æœ‰æ¨¡å—æ£€æµ‹é€»è¾‘æ­£å¸¸å·¥ä½œ
- âœ… **å‘åå…¼å®¹**ï¼šç°æœ‰åŠŸèƒ½ä¿æŒä¸å˜

#### æµ‹è¯•åœºæ™¯
- ğŸ§ª **çº¯èƒŒæ™¯åœºæ™¯**ï¼šåªæœ‰èƒŒæ™¯å›¾ç‰‡/é¢œè‰²ï¼Œæ— æ¨¡å—å†…å®¹
- ğŸ§ª **éƒ¨åˆ†æ¨¡å—åœºæ™¯**ï¼šåªæœ‰éƒ¨åˆ†æ¨¡å—å†…å®¹
- ğŸ§ª **å®Œæ•´æ¨¡å—åœºæ™¯**ï¼šåŒ…å«æ‰€æœ‰ç±»å‹æ¨¡å—å†…å®¹
- ğŸ§ª **ç©ºé…ç½®åœºæ™¯**ï¼šå®Œå…¨ç©ºçš„é…ç½®

### æŠ€æœ¯è¦ç‚¹

#### ğŸ”§ **æ£€æµ‹é€»è¾‘è®¾è®¡**
- **å…¨é¢è¦†ç›–**ï¼šæ£€æµ‹æ‰€æœ‰å¯èƒ½çš„æ¨¡å—ç±»å‹
- **ç²¾ç¡®åˆ¤æ–­**ï¼šä½¿ç”¨ä¸¥æ ¼çš„éç©ºå’Œéç©ºå­—ç¬¦ä¸²æ£€æŸ¥
- **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨çŸ­è·¯é€»è¾‘æé«˜æ£€æµ‹æ•ˆç‡

#### ğŸ›¡ï¸ **å®¹é”™å¤„ç†**
- **ç©ºå€¼å®‰å…¨**ï¼šæ‰€æœ‰æ£€æŸ¥éƒ½åŒ…å«ç©ºå€¼å¤„ç†
- **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptç±»å‹æ£€æŸ¥ç¡®ä¿å®‰å…¨
- **é™çº§å¤„ç†**ï¼šæ£€æµ‹å¤±è´¥æ—¶é‡‡ç”¨ä¿å®ˆç­–ç•¥ï¼ˆåˆ›å»ºå®¹å™¨ï¼‰

#### ğŸ“ **æ—¥å¿—å®Œå–„**
- **çŠ¶æ€è·Ÿè¸ª**ï¼šæ¸…æ™°è®°å½•å®¹å™¨åˆ›å»ºçŠ¶æ€
- **è°ƒè¯•æ”¯æŒ**ï¼šæä¾›è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
- **ç”¨æˆ·åé¦ˆ**ï¼šé€šè¿‡æ—¥å¿—äº†è§£æ’ä»¶è¡Œä¸º

**è‡ªé€‚åº”æ¨¡å—æ¡ä»¶åˆ›å»ºä¼˜åŒ–å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolså…·å¤‡äº†æ™ºèƒ½çš„æ¨¡å—æ£€æµ‹èƒ½åŠ›ï¼Œèƒ½å¤Ÿæ ¹æ®å®é™…å†…å®¹éœ€æ±‚åŠ¨æ€å†³å®šæ˜¯å¦åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå®ç°äº†æ›´ç²¾ç®€çš„ç»“æ„å’Œæ›´å¥½çš„æ€§èƒ½ï¼ 

## 2024-12-19 - è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯å¡«å……ä¼˜åŒ– ğŸ¨ğŸ“¦

### èƒŒæ™¯
ç”¨æˆ·è¦æ±‚å°†è‡ªé€‚åº”æ¨¡å—çš„èƒŒæ™¯å¡«å……æ”¹ä¸ºå§‹ç»ˆé€æ˜å¡«å……ï¼Œä»¥ä¼˜åŒ–H5åŸå‹çš„è§†è§‰å±‚æ¬¡å’ŒèƒŒæ™¯å¤„ç†é€»è¾‘ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **åŸæœ‰èƒŒæ™¯é€»è¾‘é—®é¢˜**
- **åŒé‡èƒŒæ™¯è®¾ç½®**ï¼šèƒŒæ™¯é¢œè‰²å¯èƒ½åŒæ—¶åº”ç”¨åˆ°å¤–æ¡†å’Œè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **é€»è¾‘å¤æ‚**ï¼šæ ¹æ®æ˜¯å¦æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨æ¥å†³å®šèƒŒæ™¯åº”ç”¨ä½ç½®
- **è§†è§‰å†—ä½™**ï¼šè‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„èƒŒæ™¯å¯èƒ½ä¸å¤–æ¡†èƒŒæ™¯é‡å 
- **å±‚æ¬¡ä¸æ¸…**ï¼šèƒŒæ™¯å±‚æ¬¡å…³ç³»ä¸å¤Ÿæ˜ç¡®

#### ğŸ¯ **ä¼˜åŒ–ç›®æ ‡**
- **ç®€åŒ–é€»è¾‘**ï¼šè‡ªé€‚åº”æ¨¡å—å®¹å™¨å§‹ç»ˆé€æ˜ï¼ŒèƒŒæ™¯é¢œè‰²å§‹ç»ˆåº”ç”¨åˆ°å¤–æ¡†
- **æ¸…æ™°å±‚æ¬¡**ï¼šå»ºç«‹æ¸…æ™°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„
- **é¿å…å†—ä½™**ï¼šæ¶ˆé™¤é‡å¤çš„èƒŒæ™¯è®¾ç½®
- **æå‡æ€§èƒ½**ï¼šå‡å°‘ä¸å¿…è¦çš„èƒŒæ™¯è®¡ç®—å’Œæ¸²æŸ“

### ä¿®æ”¹å®æ–½

#### **èƒŒæ™¯è®¾ç½®é€»è¾‘é‡æ„**
**æ–‡ä»¶**: `src/core/builders/h5-prototype-builder.ts`

**ä¿®æ”¹å‰**ï¼š
```typescript
// å¤æ‚çš„æ¡ä»¶åˆ¤æ–­é€»è¾‘
if (this.h5Frame) {
  // æ ¹æ®é¢œè‰²åˆ¤æ–­æ˜¯å¦è®¾ç½®è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯
  if (!isDefaultWhite) {
    const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
    this.h5Frame.fills = [colorFill];
  } else {
    this.h5Frame.fills = [];
  }
} else {
  // æ²¡æœ‰è‡ªé€‚åº”æ¨¡å—æ—¶æ‰è®¾ç½®å¤–æ¡†èƒŒæ™¯
  if (!isDefaultWhite) {
    const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
    this.outerFrame.fills = [colorFill];
  } else {
    this.outerFrame.fills = [];
  }
}
```

**ä¿®æ”¹å**ï¼š
```typescript
// ç®€åŒ–çš„èƒŒæ™¯è®¾ç½®é€»è¾‘
// è‡ªé€‚åº”æ¨¡å—å®¹å™¨å§‹ç»ˆè®¾ç½®ä¸ºé€æ˜å¡«å……
if (this.h5Frame) {
  this.h5Frame.fills = []; // å§‹ç»ˆé€æ˜
  console.log('è‡ªé€‚åº”æ¨¡å—å®¹å™¨è®¾ç½®ä¸ºé€æ˜å¡«å……');
}

// èƒŒæ™¯é¢œè‰²å§‹ç»ˆåº”ç”¨åˆ°å¤–æ¡†ï¼ˆH5åŸå‹å®¹å™¨ï¼‰
if (!isDefaultWhite) {
  const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
  this.outerFrame.fills = [colorFill];
  console.log(`H5åŸå‹å®¹å™¨èƒŒæ™¯è‰²è®¾ç½®ä¸º: ${this.config.pageBgColor}`);
} else {
  // ç™½è‰²æ—¶è®¾ç½®ä¸ºé€æ˜
  this.outerFrame.fills = [];
  console.log('H5åŸå‹å®¹å™¨èƒŒæ™¯è®¾ç½®ä¸ºé€æ˜ï¼ˆç™½è‰²ï¼‰');
}
```

### ä¼˜åŒ–æ•ˆæœ

#### ğŸ¨ **è§†è§‰å±‚æ¬¡ä¼˜åŒ–**

**æ–°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„**ï¼š
```
H5åŸå‹å®¹å™¨ (å¤–æ¡†)
â”œâ”€â”€ èƒŒæ™¯é¢œè‰² (pageBgColor) â† å§‹ç»ˆåœ¨è¿™é‡Œè®¾ç½®
â”œâ”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰) â† åœ¨å¤–æ¡†ä¸­
â””â”€â”€ è‡ªé€‚åº”æ¨¡å—å®¹å™¨ (å§‹ç»ˆé€æ˜) â† ä¸è®¾ç½®èƒŒæ™¯
    â”œâ”€â”€ å¤´éƒ¨æ¨¡å—
    â”œâ”€â”€ æ¸¸æˆä¿¡æ¯æ¨¡å—
    â”œâ”€â”€ è‡ªå®šä¹‰æ¨¡å—...
    â”œâ”€â”€ è§„åˆ™æ¨¡å—
    â””â”€â”€ åº•éƒ¨æ¨¡å—
```

#### ğŸ“Š **é€»è¾‘å¯¹æ¯”**

| æ–¹é¢ | ä¿®æ”¹å‰ | ä¿®æ”¹å | ä¼˜åŠ¿ |
|------|--------|--------|------|
| **èƒŒæ™¯è®¾ç½®ä½ç½®** | æ¡ä»¶åˆ¤æ–­ | å§‹ç»ˆå¤–æ¡† | é€»è¾‘ç»Ÿä¸€ |
| **è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯** | å¯èƒ½æœ‰èƒŒæ™¯ | å§‹ç»ˆé€æ˜ | è§†è§‰æ¸…æ™° |
| **ä»£ç å¤æ‚åº¦** | åŒé‡æ¡ä»¶åˆ¤æ–­ | å•ä¸€é€»è¾‘ | æ˜“ç»´æŠ¤ |
| **æ€§èƒ½** | å¤šæ¬¡èƒŒæ™¯è®¡ç®— | ä¸€æ¬¡è®¾ç½® | æ›´é«˜æ•ˆ |

#### ğŸš€ **æ€§èƒ½æå‡**
- **å‡å°‘èƒŒæ™¯è®¡ç®—**ï¼šåªéœ€è¦ä¸€æ¬¡èƒŒæ™¯é¢œè‰²è®¾ç½®
- **ç®€åŒ–æ¸²æŸ“**ï¼šé¿å…å¤šå±‚èƒŒæ™¯çš„é‡å æ¸²æŸ“
- **å†…å­˜ä¼˜åŒ–**ï¼šå‡å°‘èƒŒæ™¯å¡«å……å¯¹è±¡çš„åˆ›å»º
- **é€»è¾‘æ¸…æ™°**ï¼šä»£ç æ›´æ˜“ç†è§£å’Œç»´æŠ¤

#### ğŸ” **ç”¨æˆ·ä½“éªŒæ”¹è¿›**
- **è§†è§‰ä¸€è‡´æ€§**ï¼šèƒŒæ™¯é¢œè‰²å§‹ç»ˆåœ¨æœ€åº•å±‚
- **é€æ˜åº¦æ§åˆ¶**ï¼šè‡ªé€‚åº”æ¨¡å—é€æ˜ï¼Œä¸å½±å“èƒŒæ™¯æ˜¾ç¤º
- **è°ƒè¯•å‹å¥½**ï¼šæ¸…æ™°çš„æ—¥å¿—æ˜¾ç¤ºèƒŒæ™¯è®¾ç½®çŠ¶æ€
- **é¢„æœŸè¡Œä¸º**ï¼šç¬¦åˆç”¨æˆ·å¯¹èƒŒæ™¯å±‚æ¬¡çš„é¢„æœŸ

### åº”ç”¨åœºæ™¯

#### ğŸ¯ **é€‚ç”¨æƒ…å†µ**
1. **çº¯è‰²èƒŒæ™¯**ï¼šèƒŒæ™¯é¢œè‰²ç›´æ¥åº”ç”¨åˆ°å¤–æ¡†ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
2. **èƒŒæ™¯å›¾ç‰‡**ï¼šå›¾ç‰‡åœ¨å¤–æ¡†ä¸­ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜ä¸é®æŒ¡
3. **æ··åˆèƒŒæ™¯**ï¼šèƒŒæ™¯è‰²+èƒŒæ™¯å›¾ç‰‡ï¼Œå±‚æ¬¡æ¸…æ™°
4. **æ— èƒŒæ™¯å†…å®¹**ï¼šåªæœ‰è‡ªé€‚åº”æ¨¡å—æ—¶ï¼ŒèƒŒæ™¯é€»è¾‘ä¾ç„¶æ¸…æ™°

#### ğŸ“‹ **è§†è§‰æ•ˆæœ**
- **æœ‰èƒŒæ™¯è‰²æ—¶**ï¼šå¤–æ¡†æ˜¾ç¤ºèƒŒæ™¯è‰²ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
- **æœ‰èƒŒæ™¯å›¾æ—¶**ï¼šå›¾ç‰‡åœ¨å¤–æ¡†ä¸­æ˜¾ç¤ºï¼Œè‡ªé€‚åº”æ¨¡å—ä¸é®æŒ¡
- **ç™½è‰²èƒŒæ™¯æ—¶**ï¼šå¤–æ¡†é€æ˜ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜ï¼Œæ•´ä½“é€æ˜
- **æ— æ¨¡å—å†…å®¹æ—¶**ï¼šåªæœ‰å¤–æ¡†ï¼ŒèƒŒæ™¯è®¾ç½®æ­£å¸¸

### éªŒè¯ç»“æœ

#### æ„å»ºçŠ¶æ€
- âœ… **TypeScriptç¼–è¯‘**ï¼šæ— é”™è¯¯
- âœ… **æ„å»ºæˆåŠŸ**ï¼šäº§ç‰©å®Œæ•´
- âœ… **é€»è¾‘ç®€åŒ–**ï¼šèƒŒæ™¯è®¾ç½®é€»è¾‘æ›´æ¸…æ™°
- âœ… **å‘åå…¼å®¹**ï¼šè§†è§‰æ•ˆæœä¿æŒä¸€è‡´

#### æµ‹è¯•åœºæ™¯
- ğŸ§ª **çº¯è‰²èƒŒæ™¯**ï¼šå¤–æ¡†èƒŒæ™¯è‰²ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
- ğŸ§ª **èƒŒæ™¯å›¾ç‰‡**ï¼šå›¾ç‰‡æ˜¾ç¤ºæ­£å¸¸ï¼Œæ¨¡å—ä¸é®æŒ¡
- ğŸ§ª **ç™½è‰²èƒŒæ™¯**ï¼šæ•´ä½“é€æ˜ï¼Œæ— å¤šä½™èƒŒæ™¯
- ğŸ§ª **æ··åˆèƒŒæ™¯**ï¼šè‰²å½©+å›¾ç‰‡å±‚æ¬¡æ¸…æ™°

### æŠ€æœ¯è¦ç‚¹

#### ğŸ”§ **è®¾è®¡åŸåˆ™**
- **å•ä¸€èŒè´£**ï¼šå¤–æ¡†è´Ÿè´£èƒŒæ™¯ï¼Œè‡ªé€‚åº”æ¨¡å—è´Ÿè´£å†…å®¹å¸ƒå±€
- **å±‚æ¬¡åˆ†ç¦»**ï¼šèƒŒæ™¯å±‚ä¸å†…å®¹å±‚æ˜ç¡®åˆ†ç¦»
- **é€»è¾‘ç»Ÿä¸€**ï¼šæ— è®ºä½•ç§æƒ…å†µï¼ŒèƒŒæ™¯é€»è¾‘ä¿æŒä¸€è‡´

#### ğŸ›¡ï¸ **å®¹é”™å¤„ç†**
- **ç©ºå€¼å®‰å…¨**ï¼šèƒŒæ™¯é¢œè‰²è®¾ç½®åŒ…å«é»˜è®¤å€¼å¤„ç†
- **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptç¡®ä¿ç±»å‹æ­£ç¡®
- **æ—¥å¿—å®Œå–„**ï¼šè¯¦ç»†è®°å½•èƒŒæ™¯è®¾ç½®çŠ¶æ€

#### ğŸ“ **æ—¥å¿—ä¼˜åŒ–**
- **çŠ¶æ€è·Ÿè¸ª**ï¼šæ¸…æ™°è®°å½•èƒŒæ™¯è®¾ç½®è¿‡ç¨‹
- **è°ƒè¯•æ”¯æŒ**ï¼šæä¾›è¯¦ç»†çš„èƒŒæ™¯è®¾ç½®ä¿¡æ¯
- **ç”¨æˆ·åé¦ˆ**ï¼šé€šè¿‡æ—¥å¿—äº†è§£èƒŒæ™¯å¤„ç†çŠ¶æ€

**è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯å¡«å……ä¼˜åŒ–å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolså…·å¤‡äº†æ›´æ¸…æ™°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„ï¼Œè‡ªé€‚åº”æ¨¡å—å§‹ç»ˆé€æ˜ï¼ŒèƒŒæ™¯é¢œè‰²ç»Ÿä¸€åº”ç”¨åˆ°å¤–æ¡†ï¼Œå®ç°äº†æ›´ç®€æ´çš„é€»è¾‘å’Œæ›´å¥½çš„è§†è§‰æ•ˆæœï¼ 

## 2024-12-19 - ç¾½åŒ–è’™ç‰ˆç»„åæ ‡ç³»ç»Ÿé—®é¢˜æ ¹æœ¬ä¿®å¤ ğŸ¯ğŸ”§

### é—®é¢˜èƒŒæ™¯
ç”¨æˆ·åé¦ˆç¾½åŒ–è’™ç‰ˆç»„ä¾ç„¶æ²¡æœ‰æ­£ç¡®å±…ä¸­ï¼Œé€šè¿‡MCPå·¥å…·æŸ¥è¯¢Figma Plugin APIæ–‡æ¡£å‘ç°äº†åæ ‡ç³»ç»Ÿçš„æ ¹æœ¬é—®é¢˜ã€‚

### ğŸ” æ ¹æœ¬åŸå› å‘ç°
é€šè¿‡æŸ¥è¯¢Figma Plugin APIå®˜æ–¹æ–‡æ¡£ï¼Œå‘ç°äº†**Container Parentï¼ˆå®¹å™¨çˆ¶çº§ï¼‰**çš„é‡è¦æ¦‚å¿µï¼š

> **Container parent**: The relative transform of a node is shown relative to its container parent, which includes canvas nodes, frame nodes, component nodes, and instance nodes. Just like in the properties panel, it is **not** relative to its direct parent if the parent is a group or a boolean operation.

**å…³é”®å‘ç°**ï¼š
- **ç»„ï¼ˆGroupï¼‰ä¸æ˜¯å®¹å™¨çˆ¶çº§**ï¼šç»„å†…å­å…ƒç´ çš„åæ ‡ä¸æ˜¯ç›¸å¯¹äºç»„ï¼Œè€Œæ˜¯ç›¸å¯¹äºåŒ…å«è¯¥ç»„çš„å®¹å™¨çˆ¶çº§
- **å¤´å›¾ç»„æ˜¯Groupç±»å‹**ï¼šæ‰€ä»¥ç¾½åŒ–è’™ç‰ˆç»„çš„åæ ‡å®é™…ä¸Šæ˜¯ç›¸å¯¹äºåŒ…å«å¤´å›¾ç»„çš„å®¹å™¨
- **ä¹‹å‰çš„å±…ä¸­è®¡ç®—å®Œå…¨é”™è¯¯**ï¼šæˆ‘ä»¬æŒ‰ç…§ç›¸å¯¹äºå¤´å›¾ç»„çš„é€»è¾‘æ¥è®¡ç®—ï¼Œä½†åæ ‡ç³»ç»Ÿæ ¹æœ¬ä¸æ˜¯è¿™æ ·å·¥ä½œçš„

### ğŸš¨ é—®é¢˜åˆ†æ
```
é”™è¯¯ç†è§£çš„åæ ‡ç³»ç»Ÿï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (Group, x: 0)
   â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (x: -120.5) â† ä»¥ä¸ºæ˜¯ç›¸å¯¹äºå¤´å›¾ç»„
   â””â”€ å¤´å›¾èŠ‚ç‚¹ (x: 0) â† ä»¥ä¸ºæ˜¯ç›¸å¯¹äºå¤´å›¾ç»„

å®é™…çš„åæ ‡ç³»ç»Ÿï¼š
é¡µé¢ (Container Parent)
â”œâ”€ å¤´å›¾ç»„ (Group, x: 0) â† ä¸æ˜¯å®¹å™¨çˆ¶çº§
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (x: -120.5) â† å®é™…ç›¸å¯¹äºé¡µé¢ï¼
â””â”€ å¤´å›¾èŠ‚ç‚¹ (x: 0) â† å®é™…ç›¸å¯¹äºé¡µé¢ï¼
```

### âœ… ä¿®å¤æ–¹æ¡ˆ
**ä¿®æ”¹æ–‡ä»¶**ï¼š`src/core/builders/module-builders.ts`

**ä¿®å¤é€»è¾‘**ï¼š
```typescript
// ğŸš¨ é‡è¦ä¿®æ­£ï¼šæ ¹æ®Figma APIæ–‡æ¡£ï¼Œç»„ï¼ˆGroupï¼‰ä¸æ˜¯"å®¹å™¨çˆ¶çº§"
// ç»„å†…å…ƒç´ çš„åæ ‡æ˜¯ç›¸å¯¹äºåŒ…å«è¯¥ç»„çš„å®¹å™¨çˆ¶çº§ï¼Œè€Œä¸æ˜¯ç›¸å¯¹äºç»„æœ¬èº«

// ç¾½åŒ–è’™ç‰ˆç»„çš„ç»å¯¹ä½ç½®åº”è¯¥æ˜¯ï¼šå¤´å›¾ç»„ä½ç½® + ç»„å†…å±…ä¸­åç§»
const headerGroupX = originalX; // å¤´å›¾ç»„åœ¨å®¹å™¨ä¸­çš„Xä½ç½®
const centerOffset = (originalWidth - rectWidth) / 2; // å±…ä¸­åç§»é‡

// ç¾½åŒ–è’™ç‰ˆç»„çš„æœ€ç»ˆä½ç½®
featherMaskGroup.x = headerGroupX + centerOffset; // ç»å¯¹ä½ç½®ï¼šç»„ä½ç½® + å±…ä¸­åç§»
featherMaskGroup.y = originalY - blurRadius; // ç»å¯¹ä½ç½®ï¼šç»„ä½ç½® + Yåç§»

// å¤´å›¾èŠ‚ç‚¹åœ¨å¤´å›¾ç»„å†…çš„ä½ç½®ï¼ˆç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›¸å¯¹äºç»„ï¼‰
headerNode.x = originalX; // ä¿æŒåŸå§‹Xä½ç½®
headerNode.y = originalY; // ä¿æŒåŸå§‹Yä½ç½®
```

### ğŸ“Š ä¿®å¤æ•ˆæœå¯¹æ¯”
```
ä¿®å¤å‰ï¼ˆé”™è¯¯åæ ‡ç³»ç»Ÿï¼‰ï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (1080px, x: 0)
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (1321px, x: -120.5) â† ç›¸å¯¹äºé¡µé¢ï¼Œå¯¼è‡´åç§»
â””â”€ å¤´å›¾èŠ‚ç‚¹ (1080px, x: 0)

ä¿®å¤åï¼ˆæ­£ç¡®åæ ‡ç³»ç»Ÿï¼‰ï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (1080px, x: 0)
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (1321px, x: 0 + (-120.5) = -120.5) â† æ­£ç¡®çš„ç»å¯¹ä½ç½®
â””â”€ å¤´å›¾èŠ‚ç‚¹ (1080px, x: 0)
```

### ğŸ¯ æŠ€æœ¯å­¦ä¹ 
**Figmaåæ ‡ç³»ç»Ÿçš„é‡è¦æ¦‚å¿µ**ï¼š
1. **å®¹å™¨çˆ¶çº§**ï¼šåªæœ‰Canvasã€Frameã€Componentã€Instanceæ˜¯å®¹å™¨çˆ¶çº§
2. **ç»„å’Œå¸ƒå°”è¿ç®—**ï¼šä¸æ˜¯å®¹å™¨çˆ¶çº§ï¼Œå…¶å­å…ƒç´ åæ ‡ç›¸å¯¹äºæ›´ä¸Šå±‚çš„å®¹å™¨
3. **ç›¸å¯¹å˜æ¢**ï¼š`relativeTransform`æ€»æ˜¯ç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›´æ¥çˆ¶çº§
4. **ç»„çš„ç‰¹æ®Šæ€§**ï¼šç»„ä¼šè‡ªåŠ¨è°ƒæ•´å¤§å°ä»¥é€‚åº”å…¶å†…å®¹ï¼Œä½ç½®ç”±å­å…ƒç´ å†³å®š

### ğŸ“š å‚è€ƒæ–‡æ¡£
- **Figma Plugin API - relativeTransform**: https://www.figma.com/plugin-docs/api/properties/nodes-relativetransform/
- **Figma Plugin API - GroupNode**: https://www.figma.com/plugin-docs/api/GroupNode/
- **Container Parentæ¦‚å¿µ**ï¼šç»„å’Œå¸ƒå°”è¿ç®—ä¸æ˜¯å®¹å™¨çˆ¶çº§çš„é‡è¦è¯´æ˜

### ğŸ”§ æ„å»ºéªŒè¯

è¿è¡Œ `npm run build` éªŒè¯ä¿®å¤æ•ˆæœï¼š

**æ„å»ºç»“æœ**ï¼š
- âœ… **TypeScriptç¼–è¯‘**ï¼šæˆåŠŸç¼–è¯‘ï¼Œæœ‰ä¸€äº›é¢„æœŸçš„è­¦å‘Šï¼ˆlocalStorageã€windowç­‰åœ¨æ’ä»¶ç¯å¢ƒä¸­çš„ç±»å‹é—®é¢˜ï¼‰
- âœ… **æ’ä»¶æ„å»º**ï¼š`dist/plugin/code-standalone.js` ç”ŸæˆæˆåŠŸ
- âœ… **UIæ„å»º**ï¼š`dist/ui.html` (192.9KB) ç”ŸæˆæˆåŠŸï¼ŒCSSå’ŒJSå®Œå…¨å†…è”
- âœ… **æ ¸å¿ƒåº“æ„å»º**ï¼šæ¨¡å—åŒ–æ„å»ºå®Œæˆ
- âœ… **æ²™ç›’é€‚é…**ï¼šç¬¦åˆFigmaæ’ä»¶å®‰å…¨ç­–ç•¥

**æ„å»ºäº§ç‰©**ï¼š
```
dist/
â”œâ”€â”€ core/ (æ ¸å¿ƒåº“æ¨¡å—)
â”œâ”€â”€ plugin/ (æ’ä»¶ä¸»ç¨‹åº)
â””â”€â”€ ui.html (192.9KB, å®Œå…¨å†…è”ç‰ˆæœ¬)
```

### ğŸ¯ ä¿®å¤æ€»ç»“

**å…³é”®å‘ç°**ï¼š
- **Container Parentæ¦‚å¿µ**ï¼šFigmaåæ ‡ç³»ç»Ÿçš„æ ¸å¿ƒåŸç†
- **ç»„ä¸æ˜¯å®¹å™¨çˆ¶çº§**ï¼šGroupã€BooleanOperationçš„å­å…ƒç´ åæ ‡ç›¸å¯¹äºæ›´ä¸Šå±‚å®¹å™¨
- **ç›¸å¯¹å˜æ¢**ï¼š`relativeTransform`æ€»æ˜¯ç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›´æ¥çˆ¶çº§

**ä¿®å¤æ•ˆæœ**ï¼š
- âœ… **åæ ‡è®¡ç®—æ­£ç¡®**ï¼šç¾½åŒ–è’™ç‰ˆç»„ä½ç½®åŸºäºæ­£ç¡®çš„åæ ‡ç³»ç»Ÿ
- âœ… **è§„èŒƒæ›´æ–°**ï¼šå°†é‡è¦è§„åˆ™æ·»åŠ åˆ°é¡¹ç›®å¼€å‘è§„èŒƒä¸­
- âœ… **æ–‡æ¡£å®Œå–„**ï¼šè¯¦ç»†è®°å½•é—®é¢˜å‘ç°å’Œè§£å†³è¿‡ç¨‹
- âœ… **çŸ¥è¯†ç§¯ç´¯**ï¼šä¸ºå›¢é˜Ÿæä¾›å®è´µçš„Figma APIä½¿ç”¨ç»éªŒ

**è§„èŒƒæ›´æ–°**ï¼š
- ğŸ“š **Figmaå¼€å‘è§„èŒƒ**ï¼šæ·»åŠ åæ ‡ç³»ç»Ÿå’ŒContainer Parentè§„åˆ™
- ğŸ“‹ **å¼€å‘æ£€æŸ¥æ¸…å•**ï¼šå¢åŠ åæ ‡è®¡ç®—éªŒè¯é¡¹
- ğŸ”— **å®˜æ–¹æ–‡æ¡£å¼•ç”¨**ï¼šæä¾›æƒå¨å‚è€ƒé“¾æ¥

**ç¾½åŒ–è’™ç‰ˆç»„åæ ‡ç³»ç»Ÿé—®é¢˜æ ¹æœ¬ä¿®å¤å®Œæˆï¼** ğŸ‰

è¿™æ¬¡ä¿®å¤ä¸ä»…è§£å†³äº†å…·ä½“çš„ä½ç½®é—®é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯ï¼š
- ğŸ§  **æ·±å…¥ç†è§£**ï¼šæŒæ¡äº†Figmaåæ ‡ç³»ç»Ÿçš„æ ¸å¿ƒæ¦‚å¿µ
- ğŸ“– **æ–‡æ¡£ç ”ç©¶**ï¼šé€šè¿‡MCPå·¥å…·æŸ¥è¯¢å®˜æ–¹APIæ–‡æ¡£æ‰¾åˆ°æ ¹æœ¬åŸå› 
- ğŸ›¡ï¸ **è§„èŒƒå»ºç«‹**ï¼šå°†é‡è¦è§„åˆ™çº³å…¥é¡¹ç›®å¼€å‘è§„èŒƒ
- ğŸ”„ **çŸ¥è¯†ä¼ æ‰¿**ï¼šä¸ºæœªæ¥çš„å¼€å‘å·¥ä½œæä¾›æŒ‡å¯¼

ç°åœ¨H5Toolsé¡¹ç›®å…·å¤‡äº†æ›´ä¸“ä¸šçš„Figmaæ’ä»¶å¼€å‘èƒ½åŠ›ï¼

**ä»£ç ä¸€è‡´æ€§ä¿®æ­£å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolsçš„å®é™…è¿è¡Œä»£ç ä¸åŸå§‹è®¾è®¡ä¿æŒå®Œå…¨ä¸€è‡´ï¼Œç¡®ä¿äº†è®¾è®¡æ„å›¾çš„å‡†ç¡®å®ç°å’Œä»£ç çš„å¯ç»´æŠ¤æ€§ï¼ 

## 2024-12-19 - è‡ªé€‚åº”æ¨¡å—æ¡ä»¶åˆ›å»ºä¼˜åŒ– ğŸ¯ğŸ“¦

### èƒŒæ™¯
ç”¨æˆ·è¦æ±‚ä¸ºè‡ªé€‚åº”æ¨¡å—æ·»åŠ æ¡ä»¶åˆ¤æ–­ï¼Œå½“æ²¡æœ‰æ¨¡å—å†…å®¹æ—¶è·³è¿‡è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„åˆ›å»ºï¼Œä»¥ä¼˜åŒ–H5åŸå‹çš„ç»“æ„å’Œæ€§èƒ½ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **åŸæœ‰é€»è¾‘é—®é¢˜**
- **æ— æ¡ä»¶åˆ›å»º**ï¼šæ— è®ºæ˜¯å¦æœ‰æ¨¡å—å†…å®¹ï¼Œéƒ½ä¼šåˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç©ºå®¹å™¨å­˜åœ¨**ï¼šå½“ç”¨æˆ·åªè®¾ç½®èƒŒæ™¯å›¾ç‰‡è€Œæ²¡æœ‰ä»»ä½•æ¨¡å—å†…å®¹æ—¶ï¼Œä»ä¼šåˆ›å»ºç©ºçš„è‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç»“æ„å†—ä½™**ï¼šç©ºçš„è‡ªé€‚åº”æ¨¡å—å®¹å™¨ä¼šå¢åŠ ä¸å¿…è¦çš„èŠ‚ç‚¹å±‚çº§
- **æ€§èƒ½æµªè´¹**ï¼šæ— æ„ä¹‰çš„å®¹å™¨åˆ›å»ºå’Œå¸ƒå±€è®¡ç®—

#### ğŸ¯ **ä¼˜åŒ–ç›®æ ‡**
- **æ™ºèƒ½åˆ¤æ–­**ï¼šæ ¹æ®é…ç½®å†…å®¹æ™ºèƒ½å†³å®šæ˜¯å¦åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç»“æ„ç²¾ç®€**ï¼šæ²¡æœ‰æ¨¡å—å†…å®¹æ—¶ç›´æ¥ä½¿ç”¨å¤–æ¡†ä½œä¸ºå®¹å™¨
- **æ€§èƒ½æå‡**ï¼šé¿å…ä¸å¿…è¦çš„èŠ‚ç‚¹åˆ›å»ºå’Œå¸ƒå±€è®¡ç®—
- **é€»è¾‘æ¸…æ™°**ï¼šä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤

### ä¿®æ”¹å®æ–½

#### 1. **æ–°å¢å†…å®¹æ£€æµ‹æ–¹æ³•**
**æ–‡ä»¶**: `src/core/builders/h5-prototype-builder.ts`

```typescript
/**
 * æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•æ¨¡å—å†…å®¹éœ€è¦åˆ›å»º
 * @returns boolean å¦‚æœæœ‰ä»»ä½•æ¨¡å—å†…å®¹è¿”å›trueï¼Œå¦åˆ™è¿”å›false
 */
private hasAnyModuleContent(): boolean {
  // æ£€æŸ¥å¤´éƒ¨æ¨¡å—å†…å®¹
  const hasHeaderContent = !!(this.config.headerImage || this.config.titleUpload);
  
  // æ£€æŸ¥æ¸¸æˆä¿¡æ¯æ¨¡å—å†…å®¹
  const hasGameInfoContent = !!(this.config.gameName || this.config.gameDesc || this.config.gameIcon);
  
  // æ£€æŸ¥è‡ªå®šä¹‰æ¨¡å—å†…å®¹
  const hasCustomModules = !!(this.config.modules && this.config.modules.length > 0);
  
  // æ£€æŸ¥è§„åˆ™æ¨¡å—å†…å®¹
  const hasRulesTitle = this.config.rulesTitle && this.config.rulesTitle.trim() !== '';
  const hasRulesBgImage = this.config.rulesBgImage !== null && this.config.rulesBgImage !== undefined;
  const hasRulesContent = this.config.rulesContent && this.config.rulesContent.trim() !== '';
  const hasRulesContent_any = hasRulesTitle || hasRulesBgImage || hasRulesContent;
  
  // æ£€æŸ¥åº•éƒ¨æ¨¡å—å†…å®¹
  const hasFooterContent = !!(this.config.footerLogo || this.config.footerBg);
  
  // å¦‚æœæœ‰ä»»ä½•æ¨¡å—å†…å®¹ï¼Œè¿”å›true
  return hasHeaderContent || hasGameInfoContent || hasCustomModules || hasRulesContent_any || hasFooterContent;
}
```

#### 2. **æ¡ä»¶åŒ–æ¡†æ¶åˆ›å»º**
```typescript
private createBaseFrames(): void {
  // 1. H5åŸå‹å®¹å™¨ä¸éœ€è¦åº”ç”¨è‡ªåŠ¨å¸ƒå±€ï¼Œåªæ˜¯ä¸€ä¸ªç”»æ¿ï¼Œå¹¶è®¾ç½®å†…å®¹è£å‰ª
  this.outerFrame = NodeUtils.createFrame('H5åŸå‹', CONSTANTS.H5_WIDTH, 100);
  this.outerFrame.layoutMode = "NONE"; // ä¸ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€
  this.outerFrame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
  
  // 2. åªæœ‰å½“æœ‰æ¨¡å—å†…å®¹æ—¶æ‰åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
  if (this.hasAnyModuleContent()) {
    this.h5Frame = NodeUtils.createFrame('è‡ªé€‚åº”æ¨¡å—', CONSTANTS.H5_WIDTH, 100);
    this.h5Frame.fills = [];
    
    // è®¾ç½®è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„è‡ªåŠ¨å¸ƒå±€
    NodeUtils.setupAutoLayout(this.h5Frame, 'VERTICAL', 0, 0);
    this.h5Frame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
    this.h5Frame.layoutWrap = "NO_WRAP"; // è®¾ç½®å¸ƒå±€ä¸æ¢è¡Œï¼Œç¡®ä¿æ‰€æœ‰å­å…ƒç´ åœ¨ä¸€åˆ—ä¸­å‚ç›´æ’åˆ—
    
    console.log('æ£€æµ‹åˆ°æ¨¡å—å†…å®¹ï¼Œå·²åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨');
  } else {
    console.log('æœªæ£€æµ‹åˆ°æ¨¡å—å†…å®¹ï¼Œè·³è¿‡è‡ªé€‚åº”æ¨¡å—å®¹å™¨åˆ›å»º');
  }
}
```

#### 3. **é€‚é…èƒŒæ™¯è®¾ç½®é€»è¾‘**
```typescript
private async setupBackground(): Promise<void> {
  // å¦‚æœå­˜åœ¨è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè®¾ç½®å…¶èƒŒæ™¯é¢œè‰²
  if (this.h5Frame) {
    // èƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°è‡ªé€‚åº”æ¨¡å—å®¹å™¨
    if (!isDefaultWhite) {
      const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
      this.h5Frame.fills = [colorFill];
    } else {
      this.h5Frame.fills = [];
    }
  } else {
    // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå°†èƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°å¤–æ¡†
    if (!isDefaultWhite) {
      const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
      this.outerFrame.fills = [colorFill];
    } else {
      this.outerFrame.fills = [];
    }
  }
  
  // èƒŒæ™¯å›¾ç‰‡å¤„ç†é€»è¾‘ä¿æŒä¸å˜...
  
  // è®¾ç½®å®ŒèƒŒæ™¯ä¹‹åï¼Œå¦‚æœå­˜åœ¨è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå°†å…¶æ·»åŠ ä¸ºH5åŸå‹å®¹å™¨çš„å­å…ƒç´ 
  if (this.h5Frame) {
    NodeUtils.safeAppendChild(this.outerFrame, this.h5Frame, 'H5è‡ªé€‚åº”æ¨¡å—å®¹å™¨æ·»åŠ ');
  }
}
```

#### 4. **é€‚é…æ¨¡å—æ·»åŠ é€»è¾‘**
```typescript
private async addModules(): Promise<void> {
  // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè¯´æ˜æ²¡æœ‰æ¨¡å—å†…å®¹ï¼Œç›´æ¥è¿”å›
  if (!this.h5Frame) {
    console.log('æ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè·³è¿‡æ¨¡å—æ·»åŠ ');
    return;
  }
  
  // åˆ›å»ºæ‰€æœ‰æ¨¡å—
  const modules = await this.createAllModules();
  
  // æ‰¹é‡å®‰å…¨æ·»åŠ æ¨¡å—åˆ°H5ç”»æ¿ä¸­
  NodeUtils.safeBatchAppendChildren(this.h5Frame, modules, 'H5æ¨¡å—æ‰¹é‡æ·»åŠ ');
}
```

#### 5. **é€‚é…æœ€ç»ˆå¸ƒå±€é€»è¾‘**
```typescript
private finalizeLayout(): void {
  // è°ƒæ•´H5åŸå‹å®¹å™¨é«˜åº¦
  if (this.h5Frame) {
    // å¦‚æœæœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè°ƒæ•´ä¸ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨é«˜åº¦
    this.outerFrame.resize(CONSTANTS.H5_WIDTH, this.h5Frame.height);
    // æ¨¡å—å®¹å™¨å±‚çº§è°ƒæ•´é€»è¾‘...
  } else {
    // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè®¾ç½®ä¸€ä¸ªæœ€å°é«˜åº¦æˆ–æ ¹æ®èƒŒæ™¯å›¾ç‰‡è°ƒæ•´
    let finalHeight = 100; // é»˜è®¤æœ€å°é«˜åº¦
    
    // å¦‚æœæœ‰èƒŒæ™¯å›¾ç‰‡ï¼Œæ ¹æ®èƒŒæ™¯å›¾ç‰‡é«˜åº¦è°ƒæ•´
    if (this.config.pageBgImage) {
      const bgImageNode = this.outerFrame.findOne(node => node.name === 'é¡µé¢èƒŒæ™¯å›¾ç‰‡');
      if (bgImageNode && 'height' in bgImageNode) {
        finalHeight = Math.max(finalHeight, bgImageNode.height);
      }
    }
    
    this.outerFrame.resize(CONSTANTS.H5_WIDTH, finalHeight);
    console.log(`æ²¡æœ‰æ¨¡å—å†…å®¹ï¼ŒH5åŸå‹è®¾ç½®ä¸ºæœ€å°é«˜åº¦: ${finalHeight}px`);
  }
}
```

### ä¼˜åŒ–æ•ˆæœ

#### ğŸ¯ **æ™ºèƒ½æ£€æµ‹èŒƒå›´**
| æ¨¡å—ç±»å‹ | æ£€æµ‹æ¡ä»¶ | ç¤ºä¾‹ |
|----------|----------|------|
| **å¤´éƒ¨æ¨¡å—** | `headerImage \|\| titleUpload` | å¤´éƒ¨å›¾ç‰‡æˆ–æ ‡é¢˜ä¸Šä¼  |
| **æ¸¸æˆä¿¡æ¯æ¨¡å—** | `gameName \|\| gameDesc \|\| gameIcon` | æ¸¸æˆåç§°ã€æè¿°æˆ–å›¾æ ‡ |
| **è‡ªå®šä¹‰æ¨¡å—** | `modules && modules.length > 0` | è‡ªå®šä¹‰æ¨¡å—æ•°ç»„éç©º |
| **è§„åˆ™æ¨¡å—** | `rulesTitle \|\| rulesBgImage \|\| rulesContent` | è§„åˆ™æ ‡é¢˜ã€èƒŒæ™¯å›¾æˆ–å†…å®¹ |
| **åº•éƒ¨æ¨¡å—** | `footerLogo \|\| footerBg` | åº•éƒ¨Logoæˆ–èƒŒæ™¯ |

#### ğŸ“Š **ç»“æ„å¯¹æ¯”**

**æœ‰æ¨¡å—å†…å®¹æ—¶**ï¼š
```
H5åŸå‹ (1080xåŠ¨æ€é«˜åº¦, æ— èƒŒæ™¯, layoutMode="NONE")
â”œâ”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰)
â””â”€â”€ è‡ªé€‚åº”æ¨¡å— (1080xåŠ¨æ€é«˜åº¦, é…ç½®èƒŒæ™¯è‰², è‡ªåŠ¨å¸ƒå±€)
    â”œâ”€â”€ å¤´éƒ¨æ¨¡å— (å¯é€‰)
    â”œâ”€â”€ æ¸¸æˆä¿¡æ¯æ¨¡å— (å¯é€‰) 
    â”œâ”€â”€ è‡ªå®šä¹‰æ¨¡å—... (å¯é€‰)
    â”œâ”€â”€ è§„åˆ™æ¨¡å— (å¯é€‰)
    â””â”€â”€ åº•éƒ¨æ¨¡å— (å¯é€‰)
```

**æ— æ¨¡å—å†…å®¹æ—¶**ï¼š
```
H5åŸå‹ (1080xèƒŒæ™¯å›¾é«˜åº¦æˆ–100px, é…ç½®èƒŒæ™¯è‰², layoutMode="NONE")
â””â”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰)
```

#### ğŸš€ **æ€§èƒ½æå‡**
- **èŠ‚ç‚¹å‡å°‘**ï¼šæ— å†…å®¹æ—¶å‡å°‘1ä¸ªå®¹å™¨èŠ‚ç‚¹
- **å¸ƒå±€ç®€åŒ–**ï¼šé¿å…ä¸å¿…è¦çš„è‡ªåŠ¨å¸ƒå±€è®¡ç®—
- **å†…å­˜ä¼˜åŒ–**ï¼šå‡å°‘ç©ºå®¹å™¨çš„å†…å­˜å ç”¨
- **æ¸²æŸ“æ•ˆç‡**ï¼šå‡å°‘Figmaæ¸²æŸ“å±‚çº§

#### ğŸ” **ç”¨æˆ·ä½“éªŒæ”¹è¿›**
- **ç»“æ„æ¸…æ™°**ï¼šåªæœ‰èƒŒæ™¯å›¾ç‰‡æ—¶ç»“æ„æ›´ç®€æ´
- **æ€§èƒ½æ›´å¥½**ï¼šå‡å°‘ä¸å¿…è¦çš„èŠ‚ç‚¹æ“ä½œ
- **è°ƒè¯•å‹å¥½**ï¼šæ§åˆ¶å°æ—¥å¿—æ¸…æ™°æ˜¾ç¤ºåˆ›å»ºçŠ¶æ€
- **é€»è¾‘åˆç†**ï¼šç¬¦åˆç”¨æˆ·æœŸæœ›çš„è¡Œä¸º

### éªŒè¯ç»“æœ

#### æ„å»ºçŠ¶æ€
- âœ… **TypeScriptç¼–è¯‘**ï¼šæ— é”™è¯¯
- âœ… **æ„å»ºæˆåŠŸ**ï¼šäº§ç‰©å®Œæ•´
- âœ… **åŠŸèƒ½å®Œæ•´**ï¼šæ‰€æœ‰æ¨¡å—æ£€æµ‹é€»è¾‘æ­£å¸¸å·¥ä½œ
- âœ… **å‘åå…¼å®¹**ï¼šç°æœ‰åŠŸèƒ½ä¿æŒä¸å˜

#### æµ‹è¯•åœºæ™¯
- ğŸ§ª **çº¯èƒŒæ™¯åœºæ™¯**ï¼šåªæœ‰èƒŒæ™¯å›¾ç‰‡/é¢œè‰²ï¼Œæ— æ¨¡å—å†…å®¹
- ğŸ§ª **éƒ¨åˆ†æ¨¡å—åœºæ™¯**ï¼šåªæœ‰éƒ¨åˆ†æ¨¡å—å†…å®¹
- ğŸ§ª **å®Œæ•´æ¨¡å—åœºæ™¯**ï¼šåŒ…å«æ‰€æœ‰ç±»å‹æ¨¡å—å†…å®¹
- ğŸ§ª **ç©ºé…ç½®åœºæ™¯**ï¼šå®Œå…¨ç©ºçš„é…ç½®

### æŠ€æœ¯è¦ç‚¹

#### ğŸ”§ **æ£€æµ‹é€»è¾‘è®¾è®¡**
- **å…¨é¢è¦†ç›–**ï¼šæ£€æµ‹æ‰€æœ‰å¯èƒ½çš„æ¨¡å—ç±»å‹
- **ç²¾ç¡®åˆ¤æ–­**ï¼šä½¿ç”¨ä¸¥æ ¼çš„éç©ºå’Œéç©ºå­—ç¬¦ä¸²æ£€æŸ¥
- **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨çŸ­è·¯é€»è¾‘æé«˜æ£€æµ‹æ•ˆç‡

#### ğŸ›¡ï¸ **å®¹é”™å¤„ç†**
- **ç©ºå€¼å®‰å…¨**ï¼šæ‰€æœ‰æ£€æŸ¥éƒ½åŒ…å«ç©ºå€¼å¤„ç†
- **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptç±»å‹æ£€æŸ¥ç¡®ä¿å®‰å…¨
- **é™çº§å¤„ç†**ï¼šæ£€æµ‹å¤±è´¥æ—¶é‡‡ç”¨ä¿å®ˆç­–ç•¥ï¼ˆåˆ›å»ºå®¹å™¨ï¼‰

#### ğŸ“ **æ—¥å¿—å®Œå–„**
- **çŠ¶æ€è·Ÿè¸ª**ï¼šæ¸…æ™°è®°å½•å®¹å™¨åˆ›å»ºçŠ¶æ€
- **è°ƒè¯•æ”¯æŒ**ï¼šæä¾›è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
- **ç”¨æˆ·åé¦ˆ**ï¼šé€šè¿‡æ—¥å¿—äº†è§£æ’ä»¶è¡Œä¸º

**è‡ªé€‚åº”æ¨¡å—æ¡ä»¶åˆ›å»ºä¼˜åŒ–å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolså…·å¤‡äº†æ™ºèƒ½çš„æ¨¡å—æ£€æµ‹èƒ½åŠ›ï¼Œèƒ½å¤Ÿæ ¹æ®å®é™…å†…å®¹éœ€æ±‚åŠ¨æ€å†³å®šæ˜¯å¦åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå®ç°äº†æ›´ç²¾ç®€çš„ç»“æ„å’Œæ›´å¥½çš„æ€§èƒ½ï¼ 

## 2024-12-19 - è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯å¡«å……ä¼˜åŒ– ğŸ¨ğŸ“¦

### èƒŒæ™¯
ç”¨æˆ·è¦æ±‚å°†è‡ªé€‚åº”æ¨¡å—çš„èƒŒæ™¯å¡«å……æ”¹ä¸ºå§‹ç»ˆé€æ˜å¡«å……ï¼Œä»¥ä¼˜åŒ–H5åŸå‹çš„è§†è§‰å±‚æ¬¡å’ŒèƒŒæ™¯å¤„ç†é€»è¾‘ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **åŸæœ‰èƒŒæ™¯é€»è¾‘é—®é¢˜**
- **åŒé‡èƒŒæ™¯è®¾ç½®**ï¼šèƒŒæ™¯é¢œè‰²å¯èƒ½åŒæ—¶åº”ç”¨åˆ°å¤–æ¡†å’Œè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **é€»è¾‘å¤æ‚**ï¼šæ ¹æ®æ˜¯å¦æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨æ¥å†³å®šèƒŒæ™¯åº”ç”¨ä½ç½®
- **è§†è§‰å†—ä½™**ï¼šè‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„èƒŒæ™¯å¯èƒ½ä¸å¤–æ¡†èƒŒæ™¯é‡å 
- **å±‚æ¬¡ä¸æ¸…**ï¼šèƒŒæ™¯å±‚æ¬¡å…³ç³»ä¸å¤Ÿæ˜ç¡®

#### ğŸ¯ **ä¼˜åŒ–ç›®æ ‡**
- **ç®€åŒ–é€»è¾‘**ï¼šè‡ªé€‚åº”æ¨¡å—å®¹å™¨å§‹ç»ˆé€æ˜ï¼ŒèƒŒæ™¯é¢œè‰²å§‹ç»ˆåº”ç”¨åˆ°å¤–æ¡†
- **æ¸…æ™°å±‚æ¬¡**ï¼šå»ºç«‹æ¸…æ™°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„
- **é¿å…å†—ä½™**ï¼šæ¶ˆé™¤é‡å¤çš„èƒŒæ™¯è®¾ç½®
- **æå‡æ€§èƒ½**ï¼šå‡å°‘ä¸å¿…è¦çš„èƒŒæ™¯è®¡ç®—å’Œæ¸²æŸ“

### ä¿®æ”¹å®æ–½

#### **èƒŒæ™¯è®¾ç½®é€»è¾‘é‡æ„**
**æ–‡ä»¶**: `src/core/builders/h5-prototype-builder.ts`

**ä¿®æ”¹å‰**ï¼š
```typescript
// å¤æ‚çš„æ¡ä»¶åˆ¤æ–­é€»è¾‘
if (this.h5Frame) {
  // æ ¹æ®é¢œè‰²åˆ¤æ–­æ˜¯å¦è®¾ç½®è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯
  if (!isDefaultWhite) {
    const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
    this.h5Frame.fills = [colorFill];
  } else {
    this.h5Frame.fills = [];
  }
} else {
  // æ²¡æœ‰è‡ªé€‚åº”æ¨¡å—æ—¶æ‰è®¾ç½®å¤–æ¡†èƒŒæ™¯
  if (!isDefaultWhite) {
    const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
    this.outerFrame.fills = [colorFill];
  } else {
    this.outerFrame.fills = [];
  }
}
```

**ä¿®æ”¹å**ï¼š
```typescript
// ç®€åŒ–çš„èƒŒæ™¯è®¾ç½®é€»è¾‘
// è‡ªé€‚åº”æ¨¡å—å®¹å™¨å§‹ç»ˆè®¾ç½®ä¸ºé€æ˜å¡«å……
if (this.h5Frame) {
  this.h5Frame.fills = []; // å§‹ç»ˆé€æ˜
  console.log('è‡ªé€‚åº”æ¨¡å—å®¹å™¨è®¾ç½®ä¸ºé€æ˜å¡«å……');
}

// èƒŒæ™¯é¢œè‰²å§‹ç»ˆåº”ç”¨åˆ°å¤–æ¡†ï¼ˆH5åŸå‹å®¹å™¨ï¼‰
if (!isDefaultWhite) {
  const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
  this.outerFrame.fills = [colorFill];
  console.log(`H5åŸå‹å®¹å™¨èƒŒæ™¯è‰²è®¾ç½®ä¸º: ${this.config.pageBgColor}`);
} else {
  // ç™½è‰²æ—¶è®¾ç½®ä¸ºé€æ˜
  this.outerFrame.fills = [];
  console.log('H5åŸå‹å®¹å™¨èƒŒæ™¯è®¾ç½®ä¸ºé€æ˜ï¼ˆç™½è‰²ï¼‰');
}
```

### ä¼˜åŒ–æ•ˆæœ

#### ğŸ¨ **è§†è§‰å±‚æ¬¡ä¼˜åŒ–**

**æ–°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„**ï¼š
```
H5åŸå‹å®¹å™¨ (å¤–æ¡†)
â”œâ”€â”€ èƒŒæ™¯é¢œè‰² (pageBgColor) â† å§‹ç»ˆåœ¨è¿™é‡Œè®¾ç½®
â”œâ”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰) â† åœ¨å¤–æ¡†ä¸­
â””â”€â”€ è‡ªé€‚åº”æ¨¡å—å®¹å™¨ (å§‹ç»ˆé€æ˜) â† ä¸è®¾ç½®èƒŒæ™¯
    â”œâ”€â”€ å¤´éƒ¨æ¨¡å—
    â”œâ”€â”€ æ¸¸æˆä¿¡æ¯æ¨¡å—
    â”œâ”€â”€ è‡ªå®šä¹‰æ¨¡å—...
    â”œâ”€â”€ è§„åˆ™æ¨¡å—
    â””â”€â”€ åº•éƒ¨æ¨¡å—
```

#### ğŸ“Š **é€»è¾‘å¯¹æ¯”**

| æ–¹é¢ | ä¿®æ”¹å‰ | ä¿®æ”¹å | ä¼˜åŠ¿ |
|------|--------|--------|------|
| **èƒŒæ™¯è®¾ç½®ä½ç½®** | æ¡ä»¶åˆ¤æ–­ | å§‹ç»ˆå¤–æ¡† | é€»è¾‘ç»Ÿä¸€ |
| **è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯** | å¯èƒ½æœ‰èƒŒæ™¯ | å§‹ç»ˆé€æ˜ | è§†è§‰æ¸…æ™° |
| **ä»£ç å¤æ‚åº¦** | åŒé‡æ¡ä»¶åˆ¤æ–­ | å•ä¸€é€»è¾‘ | æ˜“ç»´æŠ¤ |
| **æ€§èƒ½** | å¤šæ¬¡èƒŒæ™¯è®¡ç®— | ä¸€æ¬¡è®¾ç½® | æ›´é«˜æ•ˆ |

#### ğŸš€ **æ€§èƒ½æå‡**
- **å‡å°‘èƒŒæ™¯è®¡ç®—**ï¼šåªéœ€è¦ä¸€æ¬¡èƒŒæ™¯é¢œè‰²è®¾ç½®
- **ç®€åŒ–æ¸²æŸ“**ï¼šé¿å…å¤šå±‚èƒŒæ™¯çš„é‡å æ¸²æŸ“
- **å†…å­˜ä¼˜åŒ–**ï¼šå‡å°‘èƒŒæ™¯å¡«å……å¯¹è±¡çš„åˆ›å»º
- **é€»è¾‘æ¸…æ™°**ï¼šä»£ç æ›´æ˜“ç†è§£å’Œç»´æŠ¤

#### ğŸ” **ç”¨æˆ·ä½“éªŒæ”¹è¿›**
- **è§†è§‰ä¸€è‡´æ€§**ï¼šèƒŒæ™¯é¢œè‰²å§‹ç»ˆåœ¨æœ€åº•å±‚
- **é€æ˜åº¦æ§åˆ¶**ï¼šè‡ªé€‚åº”æ¨¡å—é€æ˜ï¼Œä¸å½±å“èƒŒæ™¯æ˜¾ç¤º
- **è°ƒè¯•å‹å¥½**ï¼šæ¸…æ™°çš„æ—¥å¿—æ˜¾ç¤ºèƒŒæ™¯è®¾ç½®çŠ¶æ€
- **é¢„æœŸè¡Œä¸º**ï¼šç¬¦åˆç”¨æˆ·å¯¹èƒŒæ™¯å±‚æ¬¡çš„é¢„æœŸ

### åº”ç”¨åœºæ™¯

#### ğŸ¯ **é€‚ç”¨æƒ…å†µ**
1. **çº¯è‰²èƒŒæ™¯**ï¼šèƒŒæ™¯é¢œè‰²ç›´æ¥åº”ç”¨åˆ°å¤–æ¡†ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
2. **èƒŒæ™¯å›¾ç‰‡**ï¼šå›¾ç‰‡åœ¨å¤–æ¡†ä¸­ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜ä¸é®æŒ¡
3. **æ··åˆèƒŒæ™¯**ï¼šèƒŒæ™¯è‰²+èƒŒæ™¯å›¾ç‰‡ï¼Œå±‚æ¬¡æ¸…æ™°
4. **æ— èƒŒæ™¯å†…å®¹**ï¼šåªæœ‰è‡ªé€‚åº”æ¨¡å—æ—¶ï¼ŒèƒŒæ™¯é€»è¾‘ä¾ç„¶æ¸…æ™°

#### ğŸ“‹ **è§†è§‰æ•ˆæœ**
- **æœ‰èƒŒæ™¯è‰²æ—¶**ï¼šå¤–æ¡†æ˜¾ç¤ºèƒŒæ™¯è‰²ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
- **æœ‰èƒŒæ™¯å›¾æ—¶**ï¼šå›¾ç‰‡åœ¨å¤–æ¡†ä¸­æ˜¾ç¤ºï¼Œè‡ªé€‚åº”æ¨¡å—ä¸é®æŒ¡
- **ç™½è‰²èƒŒæ™¯æ—¶**ï¼šå¤–æ¡†é€æ˜ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜ï¼Œæ•´ä½“é€æ˜
- **æ— æ¨¡å—å†…å®¹æ—¶**ï¼šåªæœ‰å¤–æ¡†ï¼ŒèƒŒæ™¯è®¾ç½®æ­£å¸¸

### éªŒè¯ç»“æœ

#### æ„å»ºçŠ¶æ€
- âœ… **TypeScriptç¼–è¯‘**ï¼šæ— é”™è¯¯
- âœ… **æ„å»ºæˆåŠŸ**ï¼šäº§ç‰©å®Œæ•´
- âœ… **é€»è¾‘ç®€åŒ–**ï¼šèƒŒæ™¯è®¾ç½®é€»è¾‘æ›´æ¸…æ™°
- âœ… **å‘åå…¼å®¹**ï¼šè§†è§‰æ•ˆæœä¿æŒä¸€è‡´

#### æµ‹è¯•åœºæ™¯
- ğŸ§ª **çº¯è‰²èƒŒæ™¯**ï¼šå¤–æ¡†èƒŒæ™¯è‰²ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
- ğŸ§ª **èƒŒæ™¯å›¾ç‰‡**ï¼šå›¾ç‰‡æ˜¾ç¤ºæ­£å¸¸ï¼Œæ¨¡å—ä¸é®æŒ¡
- ğŸ§ª **ç™½è‰²èƒŒæ™¯**ï¼šæ•´ä½“é€æ˜ï¼Œæ— å¤šä½™èƒŒæ™¯
- ğŸ§ª **æ··åˆèƒŒæ™¯**ï¼šè‰²å½©+å›¾ç‰‡å±‚æ¬¡æ¸…æ™°

### æŠ€æœ¯è¦ç‚¹

#### ğŸ”§ **è®¾è®¡åŸåˆ™**
- **å•ä¸€èŒè´£**ï¼šå¤–æ¡†è´Ÿè´£èƒŒæ™¯ï¼Œè‡ªé€‚åº”æ¨¡å—è´Ÿè´£å†…å®¹å¸ƒå±€
- **å±‚æ¬¡åˆ†ç¦»**ï¼šèƒŒæ™¯å±‚ä¸å†…å®¹å±‚æ˜ç¡®åˆ†ç¦»
- **é€»è¾‘ç»Ÿä¸€**ï¼šæ— è®ºä½•ç§æƒ…å†µï¼ŒèƒŒæ™¯é€»è¾‘ä¿æŒä¸€è‡´

#### ğŸ›¡ï¸ **å®¹é”™å¤„ç†**
- **ç©ºå€¼å®‰å…¨**ï¼šèƒŒæ™¯é¢œè‰²è®¾ç½®åŒ…å«é»˜è®¤å€¼å¤„ç†
- **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptç¡®ä¿ç±»å‹æ­£ç¡®
- **æ—¥å¿—å®Œå–„**ï¼šè¯¦ç»†è®°å½•èƒŒæ™¯è®¾ç½®çŠ¶æ€

#### ğŸ“ **æ—¥å¿—ä¼˜åŒ–**
- **çŠ¶æ€è·Ÿè¸ª**ï¼šæ¸…æ™°è®°å½•èƒŒæ™¯è®¾ç½®è¿‡ç¨‹
- **è°ƒè¯•æ”¯æŒ**ï¼šæä¾›è¯¦ç»†çš„èƒŒæ™¯è®¾ç½®ä¿¡æ¯
- **ç”¨æˆ·åé¦ˆ**ï¼šé€šè¿‡æ—¥å¿—äº†è§£èƒŒæ™¯å¤„ç†çŠ¶æ€

**è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯å¡«å……ä¼˜åŒ–å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolså…·å¤‡äº†æ›´æ¸…æ™°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„ï¼Œè‡ªé€‚åº”æ¨¡å—å§‹ç»ˆé€æ˜ï¼ŒèƒŒæ™¯é¢œè‰²ç»Ÿä¸€åº”ç”¨åˆ°å¤–æ¡†ï¼Œå®ç°äº†æ›´ç®€æ´çš„é€»è¾‘å’Œæ›´å¥½çš„è§†è§‰æ•ˆæœï¼ 

## 2024-12-19 - ç¾½åŒ–è’™ç‰ˆç»„åæ ‡ç³»ç»Ÿé—®é¢˜æ ¹æœ¬ä¿®å¤ ğŸ¯ğŸ”§

### é—®é¢˜èƒŒæ™¯
ç”¨æˆ·åé¦ˆç¾½åŒ–è’™ç‰ˆç»„ä¾ç„¶æ²¡æœ‰æ­£ç¡®å±…ä¸­ï¼Œé€šè¿‡MCPå·¥å…·æŸ¥è¯¢Figma Plugin APIæ–‡æ¡£å‘ç°äº†åæ ‡ç³»ç»Ÿçš„æ ¹æœ¬é—®é¢˜ã€‚

### ğŸ” æ ¹æœ¬åŸå› å‘ç°
é€šè¿‡æŸ¥è¯¢Figma Plugin APIå®˜æ–¹æ–‡æ¡£ï¼Œå‘ç°äº†**Container Parentï¼ˆå®¹å™¨çˆ¶çº§ï¼‰**çš„é‡è¦æ¦‚å¿µï¼š

> **Container parent**: The relative transform of a node is shown relative to its container parent, which includes canvas nodes, frame nodes, component nodes, and instance nodes. Just like in the properties panel, it is **not** relative to its direct parent if the parent is a group or a boolean operation.

**å…³é”®å‘ç°**ï¼š
- **ç»„ï¼ˆGroupï¼‰ä¸æ˜¯å®¹å™¨çˆ¶çº§**ï¼šç»„å†…å­å…ƒç´ çš„åæ ‡ä¸æ˜¯ç›¸å¯¹äºç»„ï¼Œè€Œæ˜¯ç›¸å¯¹äºåŒ…å«è¯¥ç»„çš„å®¹å™¨çˆ¶çº§
- **å¤´å›¾ç»„æ˜¯Groupç±»å‹**ï¼šæ‰€ä»¥ç¾½åŒ–è’™ç‰ˆç»„çš„åæ ‡å®é™…ä¸Šæ˜¯ç›¸å¯¹äºåŒ…å«å¤´å›¾ç»„çš„å®¹å™¨
- **ä¹‹å‰çš„å±…ä¸­è®¡ç®—å®Œå…¨é”™è¯¯**ï¼šæˆ‘ä»¬æŒ‰ç…§ç›¸å¯¹äºå¤´å›¾ç»„çš„é€»è¾‘æ¥è®¡ç®—ï¼Œä½†åæ ‡ç³»ç»Ÿæ ¹æœ¬ä¸æ˜¯è¿™æ ·å·¥ä½œçš„

### ğŸš¨ é—®é¢˜åˆ†æ
```
é”™è¯¯ç†è§£çš„åæ ‡ç³»ç»Ÿï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (Group, x: 0)
   â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (x: -120.5) â† ä»¥ä¸ºæ˜¯ç›¸å¯¹äºå¤´å›¾ç»„
   â””â”€ å¤´å›¾èŠ‚ç‚¹ (x: 0) â† ä»¥ä¸ºæ˜¯ç›¸å¯¹äºå¤´å›¾ç»„

å®é™…çš„åæ ‡ç³»ç»Ÿï¼š
é¡µé¢ (Container Parent)
â”œâ”€ å¤´å›¾ç»„ (Group, x: 0) â† ä¸æ˜¯å®¹å™¨çˆ¶çº§
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (x: -120.5) â† å®é™…ç›¸å¯¹äºé¡µé¢ï¼
â””â”€ å¤´å›¾èŠ‚ç‚¹ (x: 0) â† å®é™…ç›¸å¯¹äºé¡µé¢ï¼
```

### âœ… ä¿®å¤æ–¹æ¡ˆ
**ä¿®æ”¹æ–‡ä»¶**ï¼š`src/core/builders/module-builders.ts`

**ä¿®å¤é€»è¾‘**ï¼š
```typescript
// ğŸš¨ é‡è¦ä¿®æ­£ï¼šæ ¹æ®Figma APIæ–‡æ¡£ï¼Œç»„ï¼ˆGroupï¼‰ä¸æ˜¯"å®¹å™¨çˆ¶çº§"
// ç»„å†…å…ƒç´ çš„åæ ‡æ˜¯ç›¸å¯¹äºåŒ…å«è¯¥ç»„çš„å®¹å™¨çˆ¶çº§ï¼Œè€Œä¸æ˜¯ç›¸å¯¹äºç»„æœ¬èº«

// ç¾½åŒ–è’™ç‰ˆç»„çš„ç»å¯¹ä½ç½®åº”è¯¥æ˜¯ï¼šå¤´å›¾ç»„ä½ç½® + ç»„å†…å±…ä¸­åç§»
const headerGroupX = originalX; // å¤´å›¾ç»„åœ¨å®¹å™¨ä¸­çš„Xä½ç½®
const centerOffset = (originalWidth - rectWidth) / 2; // å±…ä¸­åç§»é‡

// ç¾½åŒ–è’™ç‰ˆç»„çš„æœ€ç»ˆä½ç½®
featherMaskGroup.x = headerGroupX + centerOffset; // ç»å¯¹ä½ç½®ï¼šç»„ä½ç½® + å±…ä¸­åç§»
featherMaskGroup.y = originalY - blurRadius; // ç»å¯¹ä½ç½®ï¼šç»„ä½ç½® + Yåç§»

// å¤´å›¾èŠ‚ç‚¹åœ¨å¤´å›¾ç»„å†…çš„ä½ç½®ï¼ˆç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›¸å¯¹äºç»„ï¼‰
headerNode.x = originalX; // ä¿æŒåŸå§‹Xä½ç½®
headerNode.y = originalY; // ä¿æŒåŸå§‹Yä½ç½®
```

### ğŸ“Š ä¿®å¤æ•ˆæœå¯¹æ¯”
```
ä¿®å¤å‰ï¼ˆé”™è¯¯åæ ‡ç³»ç»Ÿï¼‰ï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (1080px, x: 0)
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (1321px, x: -120.5) â† ç›¸å¯¹äºé¡µé¢ï¼Œå¯¼è‡´åç§»
â””â”€ å¤´å›¾èŠ‚ç‚¹ (1080px, x: 0)

ä¿®å¤åï¼ˆæ­£ç¡®åæ ‡ç³»ç»Ÿï¼‰ï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (1080px, x: 0)
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (1321px, x: 0 + (-120.5) = -120.5) â† æ­£ç¡®çš„ç»å¯¹ä½ç½®
â””â”€ å¤´å›¾èŠ‚ç‚¹ (1080px, x: 0)
```

### ğŸ¯ æŠ€æœ¯å­¦ä¹ 
**Figmaåæ ‡ç³»ç»Ÿçš„é‡è¦æ¦‚å¿µ**ï¼š
1. **å®¹å™¨çˆ¶çº§**ï¼šåªæœ‰Canvasã€Frameã€Componentã€Instanceæ˜¯å®¹å™¨çˆ¶çº§
2. **ç»„å’Œå¸ƒå°”è¿ç®—**ï¼šä¸æ˜¯å®¹å™¨çˆ¶çº§ï¼Œå…¶å­å…ƒç´ åæ ‡ç›¸å¯¹äºæ›´ä¸Šå±‚çš„å®¹å™¨
3. **ç›¸å¯¹å˜æ¢**ï¼š`relativeTransform`æ€»æ˜¯ç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›´æ¥çˆ¶çº§
4. **ç»„çš„ç‰¹æ®Šæ€§**ï¼šç»„ä¼šè‡ªåŠ¨è°ƒæ•´å¤§å°ä»¥é€‚åº”å…¶å†…å®¹ï¼Œä½ç½®ç”±å­å…ƒç´ å†³å®š

### ğŸ“š å‚è€ƒæ–‡æ¡£
- **Figma Plugin API - relativeTransform**: https://www.figma.com/plugin-docs/api/properties/nodes-relativetransform/
- **Figma Plugin API - GroupNode**: https://www.figma.com/plugin-docs/api/GroupNode/
- **Container Parentæ¦‚å¿µ**ï¼šç»„å’Œå¸ƒå°”è¿ç®—ä¸æ˜¯å®¹å™¨çˆ¶çº§çš„é‡è¦è¯´æ˜

### ğŸ”§ æ„å»ºéªŒè¯

è¿è¡Œ `npm run build` éªŒè¯ä¿®å¤æ•ˆæœï¼š

**æ„å»ºç»“æœ**ï¼š
- âœ… **TypeScriptç¼–è¯‘**ï¼šæˆåŠŸç¼–è¯‘ï¼Œæœ‰ä¸€äº›é¢„æœŸçš„è­¦å‘Šï¼ˆlocalStorageã€windowç­‰åœ¨æ’ä»¶ç¯å¢ƒä¸­çš„ç±»å‹é—®é¢˜ï¼‰
- âœ… **æ’ä»¶æ„å»º**ï¼š`dist/plugin/code-standalone.js` ç”ŸæˆæˆåŠŸ
- âœ… **UIæ„å»º**ï¼š`dist/ui.html` (192.9KB) ç”ŸæˆæˆåŠŸï¼ŒCSSå’ŒJSå®Œå…¨å†…è”
- âœ… **æ ¸å¿ƒåº“æ„å»º**ï¼šæ¨¡å—åŒ–æ„å»ºå®Œæˆ
- âœ… **æ²™ç›’é€‚é…**ï¼šç¬¦åˆFigmaæ’ä»¶å®‰å…¨ç­–ç•¥

**æ„å»ºäº§ç‰©**ï¼š
```
dist/
â”œâ”€â”€ core/ (æ ¸å¿ƒåº“æ¨¡å—)
â”œâ”€â”€ plugin/ (æ’ä»¶ä¸»ç¨‹åº)
â””â”€â”€ ui.html (192.9KB, å®Œå…¨å†…è”ç‰ˆæœ¬)
```

### ğŸ¯ ä¿®å¤æ€»ç»“

**å…³é”®å‘ç°**ï¼š
- **Container Parentæ¦‚å¿µ**ï¼šFigmaåæ ‡ç³»ç»Ÿçš„æ ¸å¿ƒåŸç†
- **ç»„ä¸æ˜¯å®¹å™¨çˆ¶çº§**ï¼šGroupã€BooleanOperationçš„å­å…ƒç´ åæ ‡ç›¸å¯¹äºæ›´ä¸Šå±‚å®¹å™¨
- **ç›¸å¯¹å˜æ¢**ï¼š`relativeTransform`æ€»æ˜¯ç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›´æ¥çˆ¶çº§

**ä¿®å¤æ•ˆæœ**ï¼š
- âœ… **åæ ‡è®¡ç®—æ­£ç¡®**ï¼šç¾½åŒ–è’™ç‰ˆç»„ä½ç½®åŸºäºæ­£ç¡®çš„åæ ‡ç³»ç»Ÿ
- âœ… **è§„èŒƒæ›´æ–°**ï¼šå°†é‡è¦è§„åˆ™æ·»åŠ åˆ°é¡¹ç›®å¼€å‘è§„èŒƒä¸­
- âœ… **æ–‡æ¡£å®Œå–„**ï¼šè¯¦ç»†è®°å½•é—®é¢˜å‘ç°å’Œè§£å†³è¿‡ç¨‹
- âœ… **çŸ¥è¯†ç§¯ç´¯**ï¼šä¸ºå›¢é˜Ÿæä¾›å®è´µçš„Figma APIä½¿ç”¨ç»éªŒ

**è§„èŒƒæ›´æ–°**ï¼š
- ğŸ“š **Figmaå¼€å‘è§„èŒƒ**ï¼šæ·»åŠ åæ ‡ç³»ç»Ÿå’ŒContainer Parentè§„åˆ™
- ğŸ“‹ **å¼€å‘æ£€æŸ¥æ¸…å•**ï¼šå¢åŠ åæ ‡è®¡ç®—éªŒè¯é¡¹
- ğŸ”— **å®˜æ–¹æ–‡æ¡£å¼•ç”¨**ï¼šæä¾›æƒå¨å‚è€ƒé“¾æ¥

**ç¾½åŒ–è’™ç‰ˆç»„åæ ‡ç³»ç»Ÿé—®é¢˜æ ¹æœ¬ä¿®å¤å®Œæˆï¼** ğŸ‰

è¿™æ¬¡ä¿®å¤ä¸ä»…è§£å†³äº†å…·ä½“çš„ä½ç½®é—®é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯ï¼š
- ğŸ§  **æ·±å…¥ç†è§£**ï¼šæŒæ¡äº†Figmaåæ ‡ç³»ç»Ÿçš„æ ¸å¿ƒæ¦‚å¿µ
- ğŸ“– **æ–‡æ¡£ç ”ç©¶**ï¼šé€šè¿‡MCPå·¥å…·æŸ¥è¯¢å®˜æ–¹APIæ–‡æ¡£æ‰¾åˆ°æ ¹æœ¬åŸå› 
- ğŸ›¡ï¸ **è§„èŒƒå»ºç«‹**ï¼šå°†é‡è¦è§„åˆ™çº³å…¥é¡¹ç›®å¼€å‘è§„èŒƒ
- ğŸ”„ **çŸ¥è¯†ä¼ æ‰¿**ï¼šä¸ºæœªæ¥çš„å¼€å‘å·¥ä½œæä¾›æŒ‡å¯¼

ç°åœ¨H5Toolsé¡¹ç›®å…·å¤‡äº†æ›´ä¸“ä¸šçš„Figmaæ’ä»¶å¼€å‘èƒ½åŠ›ï¼

**ä»£ç ä¸€è‡´æ€§ä¿®æ­£å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolsçš„å®é™…è¿è¡Œä»£ç ä¸åŸå§‹è®¾è®¡ä¿æŒå®Œå…¨ä¸€è‡´ï¼Œç¡®ä¿äº†è®¾è®¡æ„å›¾çš„å‡†ç¡®å®ç°å’Œä»£ç çš„å¯ç»´æŠ¤æ€§ï¼ 

## 2024-12-19 - è‡ªé€‚åº”æ¨¡å—æ¡ä»¶åˆ›å»ºä¼˜åŒ– ğŸ¯ğŸ“¦

### èƒŒæ™¯
ç”¨æˆ·è¦æ±‚ä¸ºè‡ªé€‚åº”æ¨¡å—æ·»åŠ æ¡ä»¶åˆ¤æ–­ï¼Œå½“æ²¡æœ‰æ¨¡å—å†…å®¹æ—¶è·³è¿‡è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„åˆ›å»ºï¼Œä»¥ä¼˜åŒ–H5åŸå‹çš„ç»“æ„å’Œæ€§èƒ½ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **åŸæœ‰é€»è¾‘é—®é¢˜**
- **æ— æ¡ä»¶åˆ›å»º**ï¼šæ— è®ºæ˜¯å¦æœ‰æ¨¡å—å†…å®¹ï¼Œéƒ½ä¼šåˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç©ºå®¹å™¨å­˜åœ¨**ï¼šå½“ç”¨æˆ·åªè®¾ç½®èƒŒæ™¯å›¾ç‰‡è€Œæ²¡æœ‰ä»»ä½•æ¨¡å—å†…å®¹æ—¶ï¼Œä»ä¼šåˆ›å»ºç©ºçš„è‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç»“æ„å†—ä½™**ï¼šç©ºçš„è‡ªé€‚åº”æ¨¡å—å®¹å™¨ä¼šå¢åŠ ä¸å¿…è¦çš„èŠ‚ç‚¹å±‚çº§
- **æ€§èƒ½æµªè´¹**ï¼šæ— æ„ä¹‰çš„å®¹å™¨åˆ›å»ºå’Œå¸ƒå±€è®¡ç®—

#### ğŸ¯ **ä¼˜åŒ–ç›®æ ‡**
- **æ™ºèƒ½åˆ¤æ–­**ï¼šæ ¹æ®é…ç½®å†…å®¹æ™ºèƒ½å†³å®šæ˜¯å¦åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç»“æ„ç²¾ç®€**ï¼šæ²¡æœ‰æ¨¡å—å†…å®¹æ—¶ç›´æ¥ä½¿ç”¨å¤–æ¡†ä½œä¸ºå®¹å™¨
- **æ€§èƒ½æå‡**ï¼šé¿å…ä¸å¿…è¦çš„èŠ‚ç‚¹åˆ›å»ºå’Œå¸ƒå±€è®¡ç®—
- **é€»è¾‘æ¸…æ™°**ï¼šä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤

### ä¿®æ”¹å®æ–½

#### 1. **æ–°å¢å†…å®¹æ£€æµ‹æ–¹æ³•**
**æ–‡ä»¶**: `src/core/builders/h5-prototype-builder.ts`

```typescript
/**
 * æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•æ¨¡å—å†…å®¹éœ€è¦åˆ›å»º
 * @returns boolean å¦‚æœæœ‰ä»»ä½•æ¨¡å—å†…å®¹è¿”å›trueï¼Œå¦åˆ™è¿”å›false
 */
private hasAnyModuleContent(): boolean {
  // æ£€æŸ¥å¤´éƒ¨æ¨¡å—å†…å®¹
  const hasHeaderContent = !!(this.config.headerImage || this.config.titleUpload);
  
  // æ£€æŸ¥æ¸¸æˆä¿¡æ¯æ¨¡å—å†…å®¹
  const hasGameInfoContent = !!(this.config.gameName || this.config.gameDesc || this.config.gameIcon);
  
  // æ£€æŸ¥è‡ªå®šä¹‰æ¨¡å—å†…å®¹
  const hasCustomModules = !!(this.config.modules && this.config.modules.length > 0);
  
  // æ£€æŸ¥è§„åˆ™æ¨¡å—å†…å®¹
  const hasRulesTitle = this.config.rulesTitle && this.config.rulesTitle.trim() !== '';
  const hasRulesBgImage = this.config.rulesBgImage !== null && this.config.rulesBgImage !== undefined;
  const hasRulesContent = this.config.rulesContent && this.config.rulesContent.trim() !== '';
  const hasRulesContent_any = hasRulesTitle || hasRulesBgImage || hasRulesContent;
  
  // æ£€æŸ¥åº•éƒ¨æ¨¡å—å†…å®¹
  const hasFooterContent = !!(this.config.footerLogo || this.config.footerBg);
  
  // å¦‚æœæœ‰ä»»ä½•æ¨¡å—å†…å®¹ï¼Œè¿”å›true
  return hasHeaderContent || hasGameInfoContent || hasCustomModules || hasRulesContent_any || hasFooterContent;
}
```

#### 2. **æ¡ä»¶åŒ–æ¡†æ¶åˆ›å»º**
```typescript
private createBaseFrames(): void {
  // 1. H5åŸå‹å®¹å™¨ä¸éœ€è¦åº”ç”¨è‡ªåŠ¨å¸ƒå±€ï¼Œåªæ˜¯ä¸€ä¸ªç”»æ¿ï¼Œå¹¶è®¾ç½®å†…å®¹è£å‰ª
  this.outerFrame = NodeUtils.createFrame('H5åŸå‹', CONSTANTS.H5_WIDTH, 100);
  this.outerFrame.layoutMode = "NONE"; // ä¸ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€
  this.outerFrame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
  
  // 2. åªæœ‰å½“æœ‰æ¨¡å—å†…å®¹æ—¶æ‰åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
  if (this.hasAnyModuleContent()) {
    this.h5Frame = NodeUtils.createFrame('è‡ªé€‚åº”æ¨¡å—', CONSTANTS.H5_WIDTH, 100);
    this.h5Frame.fills = [];
    
    // è®¾ç½®è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„è‡ªåŠ¨å¸ƒå±€
    NodeUtils.setupAutoLayout(this.h5Frame, 'VERTICAL', 0, 0);
    this.h5Frame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
    this.h5Frame.layoutWrap = "NO_WRAP"; // è®¾ç½®å¸ƒå±€ä¸æ¢è¡Œï¼Œç¡®ä¿æ‰€æœ‰å­å…ƒç´ åœ¨ä¸€åˆ—ä¸­å‚ç›´æ’åˆ—
    
    console.log('æ£€æµ‹åˆ°æ¨¡å—å†…å®¹ï¼Œå·²åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨');
  } else {
    console.log('æœªæ£€æµ‹åˆ°æ¨¡å—å†…å®¹ï¼Œè·³è¿‡è‡ªé€‚åº”æ¨¡å—å®¹å™¨åˆ›å»º');
  }
}
```

#### 3. **é€‚é…èƒŒæ™¯è®¾ç½®é€»è¾‘**
```typescript
private async setupBackground(): Promise<void> {
  // å¦‚æœå­˜åœ¨è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè®¾ç½®å…¶èƒŒæ™¯é¢œè‰²
  if (this.h5Frame) {
    // èƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°è‡ªé€‚åº”æ¨¡å—å®¹å™¨
    if (!isDefaultWhite) {
      const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
      this.h5Frame.fills = [colorFill];
    } else {
      this.h5Frame.fills = [];
    }
  } else {
    // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå°†èƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°å¤–æ¡†
    if (!isDefaultWhite) {
      const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
      this.outerFrame.fills = [colorFill];
    } else {
      this.outerFrame.fills = [];
    }
  }
  
  // èƒŒæ™¯å›¾ç‰‡å¤„ç†é€»è¾‘ä¿æŒä¸å˜...
  
  // è®¾ç½®å®ŒèƒŒæ™¯ä¹‹åï¼Œå¦‚æœå­˜åœ¨è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå°†å…¶æ·»åŠ ä¸ºH5åŸå‹å®¹å™¨çš„å­å…ƒç´ 
  if (this.h5Frame) {
    NodeUtils.safeAppendChild(this.outerFrame, this.h5Frame, 'H5è‡ªé€‚åº”æ¨¡å—å®¹å™¨æ·»åŠ ');
  }
}
```

#### 4. **é€‚é…æ¨¡å—æ·»åŠ é€»è¾‘**
```typescript
private async addModules(): Promise<void> {
  // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè¯´æ˜æ²¡æœ‰æ¨¡å—å†…å®¹ï¼Œç›´æ¥è¿”å›
  if (!this.h5Frame) {
    console.log('æ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè·³è¿‡æ¨¡å—æ·»åŠ ');
    return;
  }
  
  // åˆ›å»ºæ‰€æœ‰æ¨¡å—
  const modules = await this.createAllModules();
  
  // æ‰¹é‡å®‰å…¨æ·»åŠ æ¨¡å—åˆ°H5ç”»æ¿ä¸­
  NodeUtils.safeBatchAppendChildren(this.h5Frame, modules, 'H5æ¨¡å—æ‰¹é‡æ·»åŠ ');
}
```

#### 5. **é€‚é…æœ€ç»ˆå¸ƒå±€é€»è¾‘**
```typescript
private finalizeLayout(): void {
  // è°ƒæ•´H5åŸå‹å®¹å™¨é«˜åº¦
  if (this.h5Frame) {
    // å¦‚æœæœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè°ƒæ•´ä¸ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨é«˜åº¦
    this.outerFrame.resize(CONSTANTS.H5_WIDTH, this.h5Frame.height);
    // æ¨¡å—å®¹å™¨å±‚çº§è°ƒæ•´é€»è¾‘...
  } else {
    // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè®¾ç½®ä¸€ä¸ªæœ€å°é«˜åº¦æˆ–æ ¹æ®èƒŒæ™¯å›¾ç‰‡è°ƒæ•´
    let finalHeight = 100; // é»˜è®¤æœ€å°é«˜åº¦
    
    // å¦‚æœæœ‰èƒŒæ™¯å›¾ç‰‡ï¼Œæ ¹æ®èƒŒæ™¯å›¾ç‰‡é«˜åº¦è°ƒæ•´
    if (this.config.pageBgImage) {
      const bgImageNode = this.outerFrame.findOne(node => node.name === 'é¡µé¢èƒŒæ™¯å›¾ç‰‡');
      if (bgImageNode && 'height' in bgImageNode) {
        finalHeight = Math.max(finalHeight, bgImageNode.height);
      }
    }
    
    this.outerFrame.resize(CONSTANTS.H5_WIDTH, finalHeight);
    console.log(`æ²¡æœ‰æ¨¡å—å†…å®¹ï¼ŒH5åŸå‹è®¾ç½®ä¸ºæœ€å°é«˜åº¦: ${finalHeight}px`);
  }
}
```

### ä¼˜åŒ–æ•ˆæœ

#### ğŸ¯ **æ™ºèƒ½æ£€æµ‹èŒƒå›´**
| æ¨¡å—ç±»å‹ | æ£€æµ‹æ¡ä»¶ | ç¤ºä¾‹ |
|----------|----------|------|
| **å¤´éƒ¨æ¨¡å—** | `headerImage \|\| titleUpload` | å¤´éƒ¨å›¾ç‰‡æˆ–æ ‡é¢˜ä¸Šä¼  |
| **æ¸¸æˆä¿¡æ¯æ¨¡å—** | `gameName \|\| gameDesc \|\| gameIcon` | æ¸¸æˆåç§°ã€æè¿°æˆ–å›¾æ ‡ |
| **è‡ªå®šä¹‰æ¨¡å—** | `modules && modules.length > 0` | è‡ªå®šä¹‰æ¨¡å—æ•°ç»„éç©º |
| **è§„åˆ™æ¨¡å—** | `rulesTitle \|\| rulesBgImage \|\| rulesContent` | è§„åˆ™æ ‡é¢˜ã€èƒŒæ™¯å›¾æˆ–å†…å®¹ |
| **åº•éƒ¨æ¨¡å—** | `footerLogo \|\| footerBg` | åº•éƒ¨Logoæˆ–èƒŒæ™¯ |

#### ğŸ“Š **ç»“æ„å¯¹æ¯”**

**æœ‰æ¨¡å—å†…å®¹æ—¶**ï¼š
```
H5åŸå‹ (1080xåŠ¨æ€é«˜åº¦, æ— èƒŒæ™¯, layoutMode="NONE")
â”œâ”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰)
â””â”€â”€ è‡ªé€‚åº”æ¨¡å— (1080xåŠ¨æ€é«˜åº¦, é…ç½®èƒŒæ™¯è‰², è‡ªåŠ¨å¸ƒå±€)
    â”œâ”€â”€ å¤´éƒ¨æ¨¡å— (å¯é€‰)
    â”œâ”€â”€ æ¸¸æˆä¿¡æ¯æ¨¡å— (å¯é€‰) 
    â”œâ”€â”€ è‡ªå®šä¹‰æ¨¡å—... (å¯é€‰)
    â”œâ”€â”€ è§„åˆ™æ¨¡å— (å¯é€‰)
    â””â”€â”€ åº•éƒ¨æ¨¡å— (å¯é€‰)
```

**æ— æ¨¡å—å†…å®¹æ—¶**ï¼š
```
H5åŸå‹ (1080xèƒŒæ™¯å›¾é«˜åº¦æˆ–100px, é…ç½®èƒŒæ™¯è‰², layoutMode="NONE")
â””â”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰)
```

#### ğŸš€ **æ€§èƒ½æå‡**
- **èŠ‚ç‚¹å‡å°‘**ï¼šæ— å†…å®¹æ—¶å‡å°‘1ä¸ªå®¹å™¨èŠ‚ç‚¹
- **å¸ƒå±€ç®€åŒ–**ï¼šé¿å…ä¸å¿…è¦çš„è‡ªåŠ¨å¸ƒå±€è®¡ç®—
- **å†…å­˜ä¼˜åŒ–**ï¼šå‡å°‘ç©ºå®¹å™¨çš„å†…å­˜å ç”¨
- **æ¸²æŸ“æ•ˆç‡**ï¼šå‡å°‘Figmaæ¸²æŸ“å±‚çº§

#### ğŸ” **ç”¨æˆ·ä½“éªŒæ”¹è¿›**
- **ç»“æ„æ¸…æ™°**ï¼šåªæœ‰èƒŒæ™¯å›¾ç‰‡æ—¶ç»“æ„æ›´ç®€æ´
- **æ€§èƒ½æ›´å¥½**ï¼šå‡å°‘ä¸å¿…è¦çš„èŠ‚ç‚¹æ“ä½œ
- **è°ƒè¯•å‹å¥½**ï¼šæ§åˆ¶å°æ—¥å¿—æ¸…æ™°æ˜¾ç¤ºåˆ›å»ºçŠ¶æ€
- **é€»è¾‘åˆç†**ï¼šç¬¦åˆç”¨æˆ·æœŸæœ›çš„è¡Œä¸º

### éªŒè¯ç»“æœ

#### æ„å»ºçŠ¶æ€
- âœ… **TypeScriptç¼–è¯‘**ï¼šæ— é”™è¯¯
- âœ… **æ„å»ºæˆåŠŸ**ï¼šäº§ç‰©å®Œæ•´
- âœ… **åŠŸèƒ½å®Œæ•´**ï¼šæ‰€æœ‰æ¨¡å—æ£€æµ‹é€»è¾‘æ­£å¸¸å·¥ä½œ
- âœ… **å‘åå…¼å®¹**ï¼šç°æœ‰åŠŸèƒ½ä¿æŒä¸å˜

#### æµ‹è¯•åœºæ™¯
- ğŸ§ª **çº¯èƒŒæ™¯åœºæ™¯**ï¼šåªæœ‰èƒŒæ™¯å›¾ç‰‡/é¢œè‰²ï¼Œæ— æ¨¡å—å†…å®¹
- ğŸ§ª **éƒ¨åˆ†æ¨¡å—åœºæ™¯**ï¼šåªæœ‰éƒ¨åˆ†æ¨¡å—å†…å®¹
- ğŸ§ª **å®Œæ•´æ¨¡å—åœºæ™¯**ï¼šåŒ…å«æ‰€æœ‰ç±»å‹æ¨¡å—å†…å®¹
- ğŸ§ª **ç©ºé…ç½®åœºæ™¯**ï¼šå®Œå…¨ç©ºçš„é…ç½®

### æŠ€æœ¯è¦ç‚¹

#### ğŸ”§ **æ£€æµ‹é€»è¾‘è®¾è®¡**
- **å…¨é¢è¦†ç›–**ï¼šæ£€æµ‹æ‰€æœ‰å¯èƒ½çš„æ¨¡å—ç±»å‹
- **ç²¾ç¡®åˆ¤æ–­**ï¼šä½¿ç”¨ä¸¥æ ¼çš„éç©ºå’Œéç©ºå­—ç¬¦ä¸²æ£€æŸ¥
- **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨çŸ­è·¯é€»è¾‘æé«˜æ£€æµ‹æ•ˆç‡

#### ğŸ›¡ï¸ **å®¹é”™å¤„ç†**
- **ç©ºå€¼å®‰å…¨**ï¼šæ‰€æœ‰æ£€æŸ¥éƒ½åŒ…å«ç©ºå€¼å¤„ç†
- **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptç±»å‹æ£€æŸ¥ç¡®ä¿å®‰å…¨
- **é™çº§å¤„ç†**ï¼šæ£€æµ‹å¤±è´¥æ—¶é‡‡ç”¨ä¿å®ˆç­–ç•¥ï¼ˆåˆ›å»ºå®¹å™¨ï¼‰

#### ğŸ“ **æ—¥å¿—å®Œå–„**
- **çŠ¶æ€è·Ÿè¸ª**ï¼šæ¸…æ™°è®°å½•å®¹å™¨åˆ›å»ºçŠ¶æ€
- **è°ƒè¯•æ”¯æŒ**ï¼šæä¾›è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
- **ç”¨æˆ·åé¦ˆ**ï¼šé€šè¿‡æ—¥å¿—äº†è§£æ’ä»¶è¡Œä¸º

**è‡ªé€‚åº”æ¨¡å—æ¡ä»¶åˆ›å»ºä¼˜åŒ–å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolså…·å¤‡äº†æ™ºèƒ½çš„æ¨¡å—æ£€æµ‹èƒ½åŠ›ï¼Œèƒ½å¤Ÿæ ¹æ®å®é™…å†…å®¹éœ€æ±‚åŠ¨æ€å†³å®šæ˜¯å¦åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå®ç°äº†æ›´ç²¾ç®€çš„ç»“æ„å’Œæ›´å¥½çš„æ€§èƒ½ï¼ 

## 2024-12-19 - è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯å¡«å……ä¼˜åŒ– ğŸ¨ğŸ“¦

### èƒŒæ™¯
ç”¨æˆ·è¦æ±‚å°†è‡ªé€‚åº”æ¨¡å—çš„èƒŒæ™¯å¡«å……æ”¹ä¸ºå§‹ç»ˆé€æ˜å¡«å……ï¼Œä»¥ä¼˜åŒ–H5åŸå‹çš„è§†è§‰å±‚æ¬¡å’ŒèƒŒæ™¯å¤„ç†é€»è¾‘ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **åŸæœ‰èƒŒæ™¯é€»è¾‘é—®é¢˜**
- **åŒé‡èƒŒæ™¯è®¾ç½®**ï¼šèƒŒæ™¯é¢œè‰²å¯èƒ½åŒæ—¶åº”ç”¨åˆ°å¤–æ¡†å’Œè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **é€»è¾‘å¤æ‚**ï¼šæ ¹æ®æ˜¯å¦æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨æ¥å†³å®šèƒŒæ™¯åº”ç”¨ä½ç½®
- **è§†è§‰å†—ä½™**ï¼šè‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„èƒŒæ™¯å¯èƒ½ä¸å¤–æ¡†èƒŒæ™¯é‡å 
- **å±‚æ¬¡ä¸æ¸…**ï¼šèƒŒæ™¯å±‚æ¬¡å…³ç³»ä¸å¤Ÿæ˜ç¡®

#### ğŸ¯ **ä¼˜åŒ–ç›®æ ‡**
- **ç®€åŒ–é€»è¾‘**ï¼šè‡ªé€‚åº”æ¨¡å—å®¹å™¨å§‹ç»ˆé€æ˜ï¼ŒèƒŒæ™¯é¢œè‰²å§‹ç»ˆåº”ç”¨åˆ°å¤–æ¡†
- **æ¸…æ™°å±‚æ¬¡**ï¼šå»ºç«‹æ¸…æ™°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„
- **é¿å…å†—ä½™**ï¼šæ¶ˆé™¤é‡å¤çš„èƒŒæ™¯è®¾ç½®
- **æå‡æ€§èƒ½**ï¼šå‡å°‘ä¸å¿…è¦çš„èƒŒæ™¯è®¡ç®—å’Œæ¸²æŸ“

### ä¿®æ”¹å®æ–½

#### **èƒŒæ™¯è®¾ç½®é€»è¾‘é‡æ„**
**æ–‡ä»¶**: `src/core/builders/h5-prototype-builder.ts`

**ä¿®æ”¹å‰**ï¼š
```typescript
// å¤æ‚çš„æ¡ä»¶åˆ¤æ–­é€»è¾‘
if (this.h5Frame) {
  // æ ¹æ®é¢œè‰²åˆ¤æ–­æ˜¯å¦è®¾ç½®è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯
  if (!isDefaultWhite) {
    const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
    this.h5Frame.fills = [colorFill];
  } else {
    this.h5Frame.fills = [];
  }
} else {
  // æ²¡æœ‰è‡ªé€‚åº”æ¨¡å—æ—¶æ‰è®¾ç½®å¤–æ¡†èƒŒæ™¯
  if (!isDefaultWhite) {
    const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
    this.outerFrame.fills = [colorFill];
  } else {
    this.outerFrame.fills = [];
  }
}
```

**ä¿®æ”¹å**ï¼š
```typescript
// ç®€åŒ–çš„èƒŒæ™¯è®¾ç½®é€»è¾‘
// è‡ªé€‚åº”æ¨¡å—å®¹å™¨å§‹ç»ˆè®¾ç½®ä¸ºé€æ˜å¡«å……
if (this.h5Frame) {
  this.h5Frame.fills = []; // å§‹ç»ˆé€æ˜
  console.log('è‡ªé€‚åº”æ¨¡å—å®¹å™¨è®¾ç½®ä¸ºé€æ˜å¡«å……');
}

// èƒŒæ™¯é¢œè‰²å§‹ç»ˆåº”ç”¨åˆ°å¤–æ¡†ï¼ˆH5åŸå‹å®¹å™¨ï¼‰
if (!isDefaultWhite) {
  const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
  this.outerFrame.fills = [colorFill];
  console.log(`H5åŸå‹å®¹å™¨èƒŒæ™¯è‰²è®¾ç½®ä¸º: ${this.config.pageBgColor}`);
} else {
  // ç™½è‰²æ—¶è®¾ç½®ä¸ºé€æ˜
  this.outerFrame.fills = [];
  console.log('H5åŸå‹å®¹å™¨èƒŒæ™¯è®¾ç½®ä¸ºé€æ˜ï¼ˆç™½è‰²ï¼‰');
}
```

### ä¼˜åŒ–æ•ˆæœ

#### ğŸ¨ **è§†è§‰å±‚æ¬¡ä¼˜åŒ–**

**æ–°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„**ï¼š
```
H5åŸå‹å®¹å™¨ (å¤–æ¡†)
â”œâ”€â”€ èƒŒæ™¯é¢œè‰² (pageBgColor) â† å§‹ç»ˆåœ¨è¿™é‡Œè®¾ç½®
â”œâ”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰) â† åœ¨å¤–æ¡†ä¸­
â””â”€â”€ è‡ªé€‚åº”æ¨¡å—å®¹å™¨ (å§‹ç»ˆé€æ˜) â† ä¸è®¾ç½®èƒŒæ™¯
    â”œâ”€â”€ å¤´éƒ¨æ¨¡å—
    â”œâ”€â”€ æ¸¸æˆä¿¡æ¯æ¨¡å—
    â”œâ”€â”€ è‡ªå®šä¹‰æ¨¡å—...
    â”œâ”€â”€ è§„åˆ™æ¨¡å—
    â””â”€â”€ åº•éƒ¨æ¨¡å—
```

#### ğŸ“Š **é€»è¾‘å¯¹æ¯”**

| æ–¹é¢ | ä¿®æ”¹å‰ | ä¿®æ”¹å | ä¼˜åŠ¿ |
|------|--------|--------|------|
| **èƒŒæ™¯è®¾ç½®ä½ç½®** | æ¡ä»¶åˆ¤æ–­ | å§‹ç»ˆå¤–æ¡† | é€»è¾‘ç»Ÿä¸€ |
| **è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯** | å¯èƒ½æœ‰èƒŒæ™¯ | å§‹ç»ˆé€æ˜ | è§†è§‰æ¸…æ™° |
| **ä»£ç å¤æ‚åº¦** | åŒé‡æ¡ä»¶åˆ¤æ–­ | å•ä¸€é€»è¾‘ | æ˜“ç»´æŠ¤ |
| **æ€§èƒ½** | å¤šæ¬¡èƒŒæ™¯è®¡ç®— | ä¸€æ¬¡è®¾ç½® | æ›´é«˜æ•ˆ |

#### ğŸš€ **æ€§èƒ½æå‡**
- **å‡å°‘èƒŒæ™¯è®¡ç®—**ï¼šåªéœ€è¦ä¸€æ¬¡èƒŒæ™¯é¢œè‰²è®¾ç½®
- **ç®€åŒ–æ¸²æŸ“**ï¼šé¿å…å¤šå±‚èƒŒæ™¯çš„é‡å æ¸²æŸ“
- **å†…å­˜ä¼˜åŒ–**ï¼šå‡å°‘èƒŒæ™¯å¡«å……å¯¹è±¡çš„åˆ›å»º
- **é€»è¾‘æ¸…æ™°**ï¼šä»£ç æ›´æ˜“ç†è§£å’Œç»´æŠ¤

#### ğŸ” **ç”¨æˆ·ä½“éªŒæ”¹è¿›**
- **è§†è§‰ä¸€è‡´æ€§**ï¼šèƒŒæ™¯é¢œè‰²å§‹ç»ˆåœ¨æœ€åº•å±‚
- **é€æ˜åº¦æ§åˆ¶**ï¼šè‡ªé€‚åº”æ¨¡å—é€æ˜ï¼Œä¸å½±å“èƒŒæ™¯æ˜¾ç¤º
- **è°ƒè¯•å‹å¥½**ï¼šæ¸…æ™°çš„æ—¥å¿—æ˜¾ç¤ºèƒŒæ™¯è®¾ç½®çŠ¶æ€
- **é¢„æœŸè¡Œä¸º**ï¼šç¬¦åˆç”¨æˆ·å¯¹èƒŒæ™¯å±‚æ¬¡çš„é¢„æœŸ

### åº”ç”¨åœºæ™¯

#### ğŸ¯ **é€‚ç”¨æƒ…å†µ**
1. **çº¯è‰²èƒŒæ™¯**ï¼šèƒŒæ™¯é¢œè‰²ç›´æ¥åº”ç”¨åˆ°å¤–æ¡†ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
2. **èƒŒæ™¯å›¾ç‰‡**ï¼šå›¾ç‰‡åœ¨å¤–æ¡†ä¸­ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜ä¸é®æŒ¡
3. **æ··åˆèƒŒæ™¯**ï¼šèƒŒæ™¯è‰²+èƒŒæ™¯å›¾ç‰‡ï¼Œå±‚æ¬¡æ¸…æ™°
4. **æ— èƒŒæ™¯å†…å®¹**ï¼šåªæœ‰è‡ªé€‚åº”æ¨¡å—æ—¶ï¼ŒèƒŒæ™¯é€»è¾‘ä¾ç„¶æ¸…æ™°

#### ğŸ“‹ **è§†è§‰æ•ˆæœ**
- **æœ‰èƒŒæ™¯è‰²æ—¶**ï¼šå¤–æ¡†æ˜¾ç¤ºèƒŒæ™¯è‰²ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
- **æœ‰èƒŒæ™¯å›¾æ—¶**ï¼šå›¾ç‰‡åœ¨å¤–æ¡†ä¸­æ˜¾ç¤ºï¼Œè‡ªé€‚åº”æ¨¡å—ä¸é®æŒ¡
- **ç™½è‰²èƒŒæ™¯æ—¶**ï¼šå¤–æ¡†é€æ˜ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜ï¼Œæ•´ä½“é€æ˜
- **æ— æ¨¡å—å†…å®¹æ—¶**ï¼šåªæœ‰å¤–æ¡†ï¼ŒèƒŒæ™¯è®¾ç½®æ­£å¸¸

### éªŒè¯ç»“æœ

#### æ„å»ºçŠ¶æ€
- âœ… **TypeScriptç¼–è¯‘**ï¼šæ— é”™è¯¯
- âœ… **æ„å»ºæˆåŠŸ**ï¼šäº§ç‰©å®Œæ•´
- âœ… **é€»è¾‘ç®€åŒ–**ï¼šèƒŒæ™¯è®¾ç½®é€»è¾‘æ›´æ¸…æ™°
- âœ… **å‘åå…¼å®¹**ï¼šè§†è§‰æ•ˆæœä¿æŒä¸€è‡´

#### æµ‹è¯•åœºæ™¯
- ğŸ§ª **çº¯è‰²èƒŒæ™¯**ï¼šå¤–æ¡†èƒŒæ™¯è‰²ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
- ğŸ§ª **èƒŒæ™¯å›¾ç‰‡**ï¼šå›¾ç‰‡æ˜¾ç¤ºæ­£å¸¸ï¼Œæ¨¡å—ä¸é®æŒ¡
- ğŸ§ª **ç™½è‰²èƒŒæ™¯**ï¼šæ•´ä½“é€æ˜ï¼Œæ— å¤šä½™èƒŒæ™¯
- ğŸ§ª **æ··åˆèƒŒæ™¯**ï¼šè‰²å½©+å›¾ç‰‡å±‚æ¬¡æ¸…æ™°

### æŠ€æœ¯è¦ç‚¹

#### ğŸ”§ **è®¾è®¡åŸåˆ™**
- **å•ä¸€èŒè´£**ï¼šå¤–æ¡†è´Ÿè´£èƒŒæ™¯ï¼Œè‡ªé€‚åº”æ¨¡å—è´Ÿè´£å†…å®¹å¸ƒå±€
- **å±‚æ¬¡åˆ†ç¦»**ï¼šèƒŒæ™¯å±‚ä¸å†…å®¹å±‚æ˜ç¡®åˆ†ç¦»
- **é€»è¾‘ç»Ÿä¸€**ï¼šæ— è®ºä½•ç§æƒ…å†µï¼ŒèƒŒæ™¯é€»è¾‘ä¿æŒä¸€è‡´

#### ğŸ›¡ï¸ **å®¹é”™å¤„ç†**
- **ç©ºå€¼å®‰å…¨**ï¼šèƒŒæ™¯é¢œè‰²è®¾ç½®åŒ…å«é»˜è®¤å€¼å¤„ç†
- **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptç¡®ä¿ç±»å‹æ­£ç¡®
- **æ—¥å¿—å®Œå–„**ï¼šè¯¦ç»†è®°å½•èƒŒæ™¯è®¾ç½®çŠ¶æ€

#### ğŸ“ **æ—¥å¿—ä¼˜åŒ–**
- **çŠ¶æ€è·Ÿè¸ª**ï¼šæ¸…æ™°è®°å½•èƒŒæ™¯è®¾ç½®è¿‡ç¨‹
- **è°ƒè¯•æ”¯æŒ**ï¼šæä¾›è¯¦ç»†çš„èƒŒæ™¯è®¾ç½®ä¿¡æ¯
- **ç”¨æˆ·åé¦ˆ**ï¼šé€šè¿‡æ—¥å¿—äº†è§£èƒŒæ™¯å¤„ç†çŠ¶æ€

**è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯å¡«å……ä¼˜åŒ–å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolså…·å¤‡äº†æ›´æ¸…æ™°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„ï¼Œè‡ªé€‚åº”æ¨¡å—å§‹ç»ˆé€æ˜ï¼ŒèƒŒæ™¯é¢œè‰²ç»Ÿä¸€åº”ç”¨åˆ°å¤–æ¡†ï¼Œå®ç°äº†æ›´ç®€æ´çš„é€»è¾‘å’Œæ›´å¥½çš„è§†è§‰æ•ˆæœï¼ 

## 2024-12-19 - ç¾½åŒ–è’™ç‰ˆç»„åæ ‡ç³»ç»Ÿé—®é¢˜æ ¹æœ¬ä¿®å¤ ğŸ¯ğŸ”§

### é—®é¢˜èƒŒæ™¯
ç”¨æˆ·åé¦ˆç¾½åŒ–è’™ç‰ˆç»„ä¾ç„¶æ²¡æœ‰æ­£ç¡®å±…ä¸­ï¼Œé€šè¿‡MCPå·¥å…·æŸ¥è¯¢Figma Plugin APIæ–‡æ¡£å‘ç°äº†åæ ‡ç³»ç»Ÿçš„æ ¹æœ¬é—®é¢˜ã€‚

### ğŸ” æ ¹æœ¬åŸå› å‘ç°
é€šè¿‡æŸ¥è¯¢Figma Plugin APIå®˜æ–¹æ–‡æ¡£ï¼Œå‘ç°äº†**Container Parentï¼ˆå®¹å™¨çˆ¶çº§ï¼‰**çš„é‡è¦æ¦‚å¿µï¼š

> **Container parent**: The relative transform of a node is shown relative to its container parent, which includes canvas nodes, frame nodes, component nodes, and instance nodes. Just like in the properties panel, it is **not** relative to its direct parent if the parent is a group or a boolean operation.

**å…³é”®å‘ç°**ï¼š
- **ç»„ï¼ˆGroupï¼‰ä¸æ˜¯å®¹å™¨çˆ¶çº§**ï¼šç»„å†…å­å…ƒç´ çš„åæ ‡ä¸æ˜¯ç›¸å¯¹äºç»„ï¼Œè€Œæ˜¯ç›¸å¯¹äºåŒ…å«è¯¥ç»„çš„å®¹å™¨çˆ¶çº§
- **å¤´å›¾ç»„æ˜¯Groupç±»å‹**ï¼šæ‰€ä»¥ç¾½åŒ–è’™ç‰ˆç»„çš„åæ ‡å®é™…ä¸Šæ˜¯ç›¸å¯¹äºåŒ…å«å¤´å›¾ç»„çš„å®¹å™¨
- **ä¹‹å‰çš„å±…ä¸­è®¡ç®—å®Œå…¨é”™è¯¯**ï¼šæˆ‘ä»¬æŒ‰ç…§ç›¸å¯¹äºå¤´å›¾ç»„çš„é€»è¾‘æ¥è®¡ç®—ï¼Œä½†åæ ‡ç³»ç»Ÿæ ¹æœ¬ä¸æ˜¯è¿™æ ·å·¥ä½œçš„

### ğŸš¨ é—®é¢˜åˆ†æ
```
é”™è¯¯ç†è§£çš„åæ ‡ç³»ç»Ÿï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (Group, x: 0)
   â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (x: -120.5) â† ä»¥ä¸ºæ˜¯ç›¸å¯¹äºå¤´å›¾ç»„
   â””â”€ å¤´å›¾èŠ‚ç‚¹ (x: 0) â† ä»¥ä¸ºæ˜¯ç›¸å¯¹äºå¤´å›¾ç»„

å®é™…çš„åæ ‡ç³»ç»Ÿï¼š
é¡µé¢ (Container Parent)
â”œâ”€ å¤´å›¾ç»„ (Group, x: 0) â† ä¸æ˜¯å®¹å™¨çˆ¶çº§
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (x: -120.5) â† å®é™…ç›¸å¯¹äºé¡µé¢ï¼
â””â”€ å¤´å›¾èŠ‚ç‚¹ (x: 0) â† å®é™…ç›¸å¯¹äºé¡µé¢ï¼
```

### âœ… ä¿®å¤æ–¹æ¡ˆ
**ä¿®æ”¹æ–‡ä»¶**ï¼š`src/core/builders/module-builders.ts`

**ä¿®å¤é€»è¾‘**ï¼š
```typescript
// ğŸš¨ é‡è¦ä¿®æ­£ï¼šæ ¹æ®Figma APIæ–‡æ¡£ï¼Œç»„ï¼ˆGroupï¼‰ä¸æ˜¯"å®¹å™¨çˆ¶çº§"
// ç»„å†…å…ƒç´ çš„åæ ‡æ˜¯ç›¸å¯¹äºåŒ…å«è¯¥ç»„çš„å®¹å™¨çˆ¶çº§ï¼Œè€Œä¸æ˜¯ç›¸å¯¹äºç»„æœ¬èº«

// ç¾½åŒ–è’™ç‰ˆç»„çš„ç»å¯¹ä½ç½®åº”è¯¥æ˜¯ï¼šå¤´å›¾ç»„ä½ç½® + ç»„å†…å±…ä¸­åç§»
const headerGroupX = originalX; // å¤´å›¾ç»„åœ¨å®¹å™¨ä¸­çš„Xä½ç½®
const centerOffset = (originalWidth - rectWidth) / 2; // å±…ä¸­åç§»é‡

// ç¾½åŒ–è’™ç‰ˆç»„çš„æœ€ç»ˆä½ç½®
featherMaskGroup.x = headerGroupX + centerOffset; // ç»å¯¹ä½ç½®ï¼šç»„ä½ç½® + å±…ä¸­åç§»
featherMaskGroup.y = originalY - blurRadius; // ç»å¯¹ä½ç½®ï¼šç»„ä½ç½® + Yåç§»

// å¤´å›¾èŠ‚ç‚¹åœ¨å¤´å›¾ç»„å†…çš„ä½ç½®ï¼ˆç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›¸å¯¹äºç»„ï¼‰
headerNode.x = originalX; // ä¿æŒåŸå§‹Xä½ç½®
headerNode.y = originalY; // ä¿æŒåŸå§‹Yä½ç½®
```

### ğŸ“Š ä¿®å¤æ•ˆæœå¯¹æ¯”
```
ä¿®å¤å‰ï¼ˆé”™è¯¯åæ ‡ç³»ç»Ÿï¼‰ï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (1080px, x: 0)
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (1321px, x: -120.5) â† ç›¸å¯¹äºé¡µé¢ï¼Œå¯¼è‡´åç§»
â””â”€ å¤´å›¾èŠ‚ç‚¹ (1080px, x: 0)

ä¿®å¤åï¼ˆæ­£ç¡®åæ ‡ç³»ç»Ÿï¼‰ï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (1080px, x: 0)
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (1321px, x: 0 + (-120.5) = -120.5) â† æ­£ç¡®çš„ç»å¯¹ä½ç½®
â””â”€ å¤´å›¾èŠ‚ç‚¹ (1080px, x: 0)
```

### ğŸ¯ æŠ€æœ¯å­¦ä¹ 
**Figmaåæ ‡ç³»ç»Ÿçš„é‡è¦æ¦‚å¿µ**ï¼š
1. **å®¹å™¨çˆ¶çº§**ï¼šåªæœ‰Canvasã€Frameã€Componentã€Instanceæ˜¯å®¹å™¨çˆ¶çº§
2. **ç»„å’Œå¸ƒå°”è¿ç®—**ï¼šä¸æ˜¯å®¹å™¨çˆ¶çº§ï¼Œå…¶å­å…ƒç´ åæ ‡ç›¸å¯¹äºæ›´ä¸Šå±‚çš„å®¹å™¨
3. **ç›¸å¯¹å˜æ¢**ï¼š`relativeTransform`æ€»æ˜¯ç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›´æ¥çˆ¶çº§
4. **ç»„çš„ç‰¹æ®Šæ€§**ï¼šç»„ä¼šè‡ªåŠ¨è°ƒæ•´å¤§å°ä»¥é€‚åº”å…¶å†…å®¹ï¼Œä½ç½®ç”±å­å…ƒç´ å†³å®š

### ğŸ“š å‚è€ƒæ–‡æ¡£
- **Figma Plugin API - relativeTransform**: https://www.figma.com/plugin-docs/api/properties/nodes-relativetransform/
- **Figma Plugin API - GroupNode**: https://www.figma.com/plugin-docs/api/GroupNode/
- **Container Parentæ¦‚å¿µ**ï¼šç»„å’Œå¸ƒå°”è¿ç®—ä¸æ˜¯å®¹å™¨çˆ¶çº§çš„é‡è¦è¯´æ˜

### ğŸ”§ æ„å»ºéªŒè¯

è¿è¡Œ `npm run build` éªŒè¯ä¿®å¤æ•ˆæœï¼š

**æ„å»ºç»“æœ**ï¼š
- âœ… **TypeScriptç¼–è¯‘**ï¼šæˆåŠŸç¼–è¯‘ï¼Œæœ‰ä¸€äº›é¢„æœŸçš„è­¦å‘Šï¼ˆlocalStorageã€windowç­‰åœ¨æ’ä»¶ç¯å¢ƒä¸­çš„ç±»å‹é—®é¢˜ï¼‰
- âœ… **æ’ä»¶æ„å»º**ï¼š`dist/plugin/code-standalone.js` ç”ŸæˆæˆåŠŸ
- âœ… **UIæ„å»º**ï¼š`dist/ui.html` (192.9KB) ç”ŸæˆæˆåŠŸï¼ŒCSSå’ŒJSå®Œå…¨å†…è”
- âœ… **æ ¸å¿ƒåº“æ„å»º**ï¼šæ¨¡å—åŒ–æ„å»ºå®Œæˆ
- âœ… **æ²™ç›’é€‚é…**ï¼šç¬¦åˆFigmaæ’ä»¶å®‰å…¨ç­–ç•¥

**æ„å»ºäº§ç‰©**ï¼š
```
dist/
â”œâ”€â”€ core/ (æ ¸å¿ƒåº“æ¨¡å—)
â”œâ”€â”€ plugin/ (æ’ä»¶ä¸»ç¨‹åº)
â””â”€â”€ ui.html (192.9KB, å®Œå…¨å†…è”ç‰ˆæœ¬)
```

### ğŸ¯ ä¿®å¤æ€»ç»“

**å…³é”®å‘ç°**ï¼š
- **Container Parentæ¦‚å¿µ**ï¼šFigmaåæ ‡ç³»ç»Ÿçš„æ ¸å¿ƒåŸç†
- **ç»„ä¸æ˜¯å®¹å™¨çˆ¶çº§**ï¼šGroupã€BooleanOperationçš„å­å…ƒç´ åæ ‡ç›¸å¯¹äºæ›´ä¸Šå±‚å®¹å™¨
- **ç›¸å¯¹å˜æ¢**ï¼š`relativeTransform`æ€»æ˜¯ç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›´æ¥çˆ¶çº§

**ä¿®å¤æ•ˆæœ**ï¼š
- âœ… **åæ ‡è®¡ç®—æ­£ç¡®**ï¼šç¾½åŒ–è’™ç‰ˆç»„ä½ç½®åŸºäºæ­£ç¡®çš„åæ ‡ç³»ç»Ÿ
- âœ… **è§„èŒƒæ›´æ–°**ï¼šå°†é‡è¦è§„åˆ™æ·»åŠ åˆ°é¡¹ç›®å¼€å‘è§„èŒƒä¸­
- âœ… **æ–‡æ¡£å®Œå–„**ï¼šè¯¦ç»†è®°å½•é—®é¢˜å‘ç°å’Œè§£å†³è¿‡ç¨‹
- âœ… **çŸ¥è¯†ç§¯ç´¯**ï¼šä¸ºå›¢é˜Ÿæä¾›å®è´µçš„Figma APIä½¿ç”¨ç»éªŒ

**è§„èŒƒæ›´æ–°**ï¼š
- ğŸ“š **Figmaå¼€å‘è§„èŒƒ**ï¼šæ·»åŠ åæ ‡ç³»ç»Ÿå’ŒContainer Parentè§„åˆ™
- ğŸ“‹ **å¼€å‘æ£€æŸ¥æ¸…å•**ï¼šå¢åŠ åæ ‡è®¡ç®—éªŒè¯é¡¹
- ğŸ”— **å®˜æ–¹æ–‡æ¡£å¼•ç”¨**ï¼šæä¾›æƒå¨å‚è€ƒé“¾æ¥

**ç¾½åŒ–è’™ç‰ˆç»„åæ ‡ç³»ç»Ÿé—®é¢˜æ ¹æœ¬ä¿®å¤å®Œæˆï¼** ğŸ‰

è¿™æ¬¡ä¿®å¤ä¸ä»…è§£å†³äº†å…·ä½“çš„ä½ç½®é—®é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯ï¼š
- ğŸ§  **æ·±å…¥ç†è§£**ï¼šæŒæ¡äº†Figmaåæ ‡ç³»ç»Ÿçš„æ ¸å¿ƒæ¦‚å¿µ
- ğŸ“– **æ–‡æ¡£ç ”ç©¶**ï¼šé€šè¿‡MCPå·¥å…·æŸ¥è¯¢å®˜æ–¹APIæ–‡æ¡£æ‰¾åˆ°æ ¹æœ¬åŸå› 
- ğŸ›¡ï¸ **è§„èŒƒå»ºç«‹**ï¼šå°†é‡è¦è§„åˆ™çº³å…¥é¡¹ç›®å¼€å‘è§„èŒƒ
- ğŸ”„ **çŸ¥è¯†ä¼ æ‰¿**ï¼šä¸ºæœªæ¥çš„å¼€å‘å·¥ä½œæä¾›æŒ‡å¯¼

ç°åœ¨H5Toolsé¡¹ç›®å…·å¤‡äº†æ›´ä¸“ä¸šçš„Figmaæ’ä»¶å¼€å‘èƒ½åŠ›ï¼

**ä»£ç ä¸€è‡´æ€§ä¿®æ­£å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolsçš„å®é™…è¿è¡Œä»£ç ä¸åŸå§‹è®¾è®¡ä¿æŒå®Œå…¨ä¸€è‡´ï¼Œç¡®ä¿äº†è®¾è®¡æ„å›¾çš„å‡†ç¡®å®ç°å’Œä»£ç çš„å¯ç»´æŠ¤æ€§ï¼ 

## 2024-12-19 - è‡ªé€‚åº”æ¨¡å—æ¡ä»¶åˆ›å»ºä¼˜åŒ– ğŸ¯ğŸ“¦

### èƒŒæ™¯
ç”¨æˆ·è¦æ±‚ä¸ºè‡ªé€‚åº”æ¨¡å—æ·»åŠ æ¡ä»¶åˆ¤æ–­ï¼Œå½“æ²¡æœ‰æ¨¡å—å†…å®¹æ—¶è·³è¿‡è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„åˆ›å»ºï¼Œä»¥ä¼˜åŒ–H5åŸå‹çš„ç»“æ„å’Œæ€§èƒ½ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **åŸæœ‰é€»è¾‘é—®é¢˜**
- **æ— æ¡ä»¶åˆ›å»º**ï¼šæ— è®ºæ˜¯å¦æœ‰æ¨¡å—å†…å®¹ï¼Œéƒ½ä¼šåˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç©ºå®¹å™¨å­˜åœ¨**ï¼šå½“ç”¨æˆ·åªè®¾ç½®èƒŒæ™¯å›¾ç‰‡è€Œæ²¡æœ‰ä»»ä½•æ¨¡å—å†…å®¹æ—¶ï¼Œä»ä¼šåˆ›å»ºç©ºçš„è‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç»“æ„å†—ä½™**ï¼šç©ºçš„è‡ªé€‚åº”æ¨¡å—å®¹å™¨ä¼šå¢åŠ ä¸å¿…è¦çš„èŠ‚ç‚¹å±‚çº§
- **æ€§èƒ½æµªè´¹**ï¼šæ— æ„ä¹‰çš„å®¹å™¨åˆ›å»ºå’Œå¸ƒå±€è®¡ç®—

#### ğŸ¯ **ä¼˜åŒ–ç›®æ ‡**
- **æ™ºèƒ½åˆ¤æ–­**ï¼šæ ¹æ®é…ç½®å†…å®¹æ™ºèƒ½å†³å®šæ˜¯å¦åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç»“æ„ç²¾ç®€**ï¼šæ²¡æœ‰æ¨¡å—å†…å®¹æ—¶ç›´æ¥ä½¿ç”¨å¤–æ¡†ä½œä¸ºå®¹å™¨
- **æ€§èƒ½æå‡**ï¼šé¿å…ä¸å¿…è¦çš„èŠ‚ç‚¹åˆ›å»ºå’Œå¸ƒå±€è®¡ç®—
- **é€»è¾‘æ¸…æ™°**ï¼šä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤

### ä¿®æ”¹å®æ–½

#### 1. **æ–°å¢å†…å®¹æ£€æµ‹æ–¹æ³•**
**æ–‡ä»¶**: `src/core/builders/h5-prototype-builder.ts`

```typescript
/**
 * æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•æ¨¡å—å†…å®¹éœ€è¦åˆ›å»º
 * @returns boolean å¦‚æœæœ‰ä»»ä½•æ¨¡å—å†…å®¹è¿”å›trueï¼Œå¦åˆ™è¿”å›false
 */
private hasAnyModuleContent(): boolean {
  // æ£€æŸ¥å¤´éƒ¨æ¨¡å—å†…å®¹
  const hasHeaderContent = !!(this.config.headerImage || this.config.titleUpload);
  
  // æ£€æŸ¥æ¸¸æˆä¿¡æ¯æ¨¡å—å†…å®¹
  const hasGameInfoContent = !!(this.config.gameName || this.config.gameDesc || this.config.gameIcon);
  
  // æ£€æŸ¥è‡ªå®šä¹‰æ¨¡å—å†…å®¹
  const hasCustomModules = !!(this.config.modules && this.config.modules.length > 0);
  
  // æ£€æŸ¥è§„åˆ™æ¨¡å—å†…å®¹
  const hasRulesTitle = this.config.rulesTitle && this.config.rulesTitle.trim() !== '';
  const hasRulesBgImage = this.config.rulesBgImage !== null && this.config.rulesBgImage !== undefined;
  const hasRulesContent = this.config.rulesContent && this.config.rulesContent.trim() !== '';
  const hasRulesContent_any = hasRulesTitle || hasRulesBgImage || hasRulesContent;
  
  // æ£€æŸ¥åº•éƒ¨æ¨¡å—å†…å®¹
  const hasFooterContent = !!(this.config.footerLogo || this.config.footerBg);
  
  // å¦‚æœæœ‰ä»»ä½•æ¨¡å—å†…å®¹ï¼Œè¿”å›true
  return hasHeaderContent || hasGameInfoContent || hasCustomModules || hasRulesContent_any || hasFooterContent;
}
```

#### 2. **æ¡ä»¶åŒ–æ¡†æ¶åˆ›å»º**
```typescript
private createBaseFrames(): void {
  // 1. H5åŸå‹å®¹å™¨ä¸éœ€è¦åº”ç”¨è‡ªåŠ¨å¸ƒå±€ï¼Œåªæ˜¯ä¸€ä¸ªç”»æ¿ï¼Œå¹¶è®¾ç½®å†…å®¹è£å‰ª
  this.outerFrame = NodeUtils.createFrame('H5åŸå‹', CONSTANTS.H5_WIDTH, 100);
  this.outerFrame.layoutMode = "NONE"; // ä¸ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€
  this.outerFrame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
  
  // 2. åªæœ‰å½“æœ‰æ¨¡å—å†…å®¹æ—¶æ‰åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
  if (this.hasAnyModuleContent()) {
    this.h5Frame = NodeUtils.createFrame('è‡ªé€‚åº”æ¨¡å—', CONSTANTS.H5_WIDTH, 100);
    this.h5Frame.fills = [];
    
    // è®¾ç½®è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„è‡ªåŠ¨å¸ƒå±€
    NodeUtils.setupAutoLayout(this.h5Frame, 'VERTICAL', 0, 0);
    this.h5Frame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
    this.h5Frame.layoutWrap = "NO_WRAP"; // è®¾ç½®å¸ƒå±€ä¸æ¢è¡Œï¼Œç¡®ä¿æ‰€æœ‰å­å…ƒç´ åœ¨ä¸€åˆ—ä¸­å‚ç›´æ’åˆ—
    
    console.log('æ£€æµ‹åˆ°æ¨¡å—å†…å®¹ï¼Œå·²åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨');
  } else {
    console.log('æœªæ£€æµ‹åˆ°æ¨¡å—å†…å®¹ï¼Œè·³è¿‡è‡ªé€‚åº”æ¨¡å—å®¹å™¨åˆ›å»º');
  }
}
```

#### 3. **é€‚é…èƒŒæ™¯è®¾ç½®é€»è¾‘**
```typescript
private async setupBackground(): Promise<void> {
  // å¦‚æœå­˜åœ¨è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè®¾ç½®å…¶èƒŒæ™¯é¢œè‰²
  if (this.h5Frame) {
    // èƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°è‡ªé€‚åº”æ¨¡å—å®¹å™¨
    if (!isDefaultWhite) {
      const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
      this.h5Frame.fills = [colorFill];
    } else {
      this.h5Frame.fills = [];
    }
  } else {
    // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå°†èƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°å¤–æ¡†
    if (!isDefaultWhite) {
      const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
      this.outerFrame.fills = [colorFill];
    } else {
      this.outerFrame.fills = [];
    }
  }
  
  // èƒŒæ™¯å›¾ç‰‡å¤„ç†é€»è¾‘ä¿æŒä¸å˜...
  
  // è®¾ç½®å®ŒèƒŒæ™¯ä¹‹åï¼Œå¦‚æœå­˜åœ¨è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå°†å…¶æ·»åŠ ä¸ºH5åŸå‹å®¹å™¨çš„å­å…ƒç´ 
  if (this.h5Frame) {
    NodeUtils.safeAppendChild(this.outerFrame, this.h5Frame, 'H5è‡ªé€‚åº”æ¨¡å—å®¹å™¨æ·»åŠ ');
  }
}
```

#### 4. **é€‚é…æ¨¡å—æ·»åŠ é€»è¾‘**
```typescript
private async addModules(): Promise<void> {
  // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè¯´æ˜æ²¡æœ‰æ¨¡å—å†…å®¹ï¼Œç›´æ¥è¿”å›
  if (!this.h5Frame) {
    console.log('æ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè·³è¿‡æ¨¡å—æ·»åŠ ');
    return;
  }
  
  // åˆ›å»ºæ‰€æœ‰æ¨¡å—
  const modules = await this.createAllModules();
  
  // æ‰¹é‡å®‰å…¨æ·»åŠ æ¨¡å—åˆ°H5ç”»æ¿ä¸­
  NodeUtils.safeBatchAppendChildren(this.h5Frame, modules, 'H5æ¨¡å—æ‰¹é‡æ·»åŠ ');
}
```

#### 5. **é€‚é…æœ€ç»ˆå¸ƒå±€é€»è¾‘**
```typescript
private finalizeLayout(): void {
  // è°ƒæ•´H5åŸå‹å®¹å™¨é«˜åº¦
  if (this.h5Frame) {
    // å¦‚æœæœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè°ƒæ•´ä¸ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨é«˜åº¦
    this.outerFrame.resize(CONSTANTS.H5_WIDTH, this.h5Frame.height);
    // æ¨¡å—å®¹å™¨å±‚çº§è°ƒæ•´é€»è¾‘...
  } else {
    // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè®¾ç½®ä¸€ä¸ªæœ€å°é«˜åº¦æˆ–æ ¹æ®èƒŒæ™¯å›¾ç‰‡è°ƒæ•´
    let finalHeight = 100; // é»˜è®¤æœ€å°é«˜åº¦
    
    // å¦‚æœæœ‰èƒŒæ™¯å›¾ç‰‡ï¼Œæ ¹æ®èƒŒæ™¯å›¾ç‰‡é«˜åº¦è°ƒæ•´
    if (this.config.pageBgImage) {
      const bgImageNode = this.outerFrame.findOne(node => node.name === 'é¡µé¢èƒŒæ™¯å›¾ç‰‡');
      if (bgImageNode && 'height' in bgImageNode) {
        finalHeight = Math.max(finalHeight, bgImageNode.height);
      }
    }
    
    this.outerFrame.resize(CONSTANTS.H5_WIDTH, finalHeight);
    console.log(`æ²¡æœ‰æ¨¡å—å†…å®¹ï¼ŒH5åŸå‹è®¾ç½®ä¸ºæœ€å°é«˜åº¦: ${finalHeight}px`);
  }
}
```

### ä¼˜åŒ–æ•ˆæœ

#### ğŸ¯ **æ™ºèƒ½æ£€æµ‹èŒƒå›´**
| æ¨¡å—ç±»å‹ | æ£€æµ‹æ¡ä»¶ | ç¤ºä¾‹ |
|----------|----------|------|
| **å¤´éƒ¨æ¨¡å—** | `headerImage \|\| titleUpload` | å¤´éƒ¨å›¾ç‰‡æˆ–æ ‡é¢˜ä¸Šä¼  |
| **æ¸¸æˆä¿¡æ¯æ¨¡å—** | `gameName \|\| gameDesc \|\| gameIcon` | æ¸¸æˆåç§°ã€æè¿°æˆ–å›¾æ ‡ |
| **è‡ªå®šä¹‰æ¨¡å—** | `modules && modules.length > 0` | è‡ªå®šä¹‰æ¨¡å—æ•°ç»„éç©º |
| **è§„åˆ™æ¨¡å—** | `rulesTitle \|\| rulesBgImage \|\| rulesContent` | è§„åˆ™æ ‡é¢˜ã€èƒŒæ™¯å›¾æˆ–å†…å®¹ |
| **åº•éƒ¨æ¨¡å—** | `footerLogo \|\| footerBg` | åº•éƒ¨Logoæˆ–èƒŒæ™¯ |

#### ğŸ“Š **ç»“æ„å¯¹æ¯”**

**æœ‰æ¨¡å—å†…å®¹æ—¶**ï¼š
```
H5åŸå‹ (1080xåŠ¨æ€é«˜åº¦, æ— èƒŒæ™¯, layoutMode="NONE")
â”œâ”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰)
â””â”€â”€ è‡ªé€‚åº”æ¨¡å— (1080xåŠ¨æ€é«˜åº¦, é…ç½®èƒŒæ™¯è‰², è‡ªåŠ¨å¸ƒå±€)
    â”œâ”€â”€ å¤´éƒ¨æ¨¡å— (å¯é€‰)
    â”œâ”€â”€ æ¸¸æˆä¿¡æ¯æ¨¡å— (å¯é€‰) 
    â”œâ”€â”€ è‡ªå®šä¹‰æ¨¡å—... (å¯é€‰)
    â”œâ”€â”€ è§„åˆ™æ¨¡å— (å¯é€‰)
    â””â”€â”€ åº•éƒ¨æ¨¡å— (å¯é€‰)
```

**æ— æ¨¡å—å†…å®¹æ—¶**ï¼š
```
H5åŸå‹ (1080xèƒŒæ™¯å›¾é«˜åº¦æˆ–100px, é…ç½®èƒŒæ™¯è‰², layoutMode="NONE")
â””â”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰)
```

#### ğŸš€ **æ€§èƒ½æå‡**
- **èŠ‚ç‚¹å‡å°‘**ï¼šæ— å†…å®¹æ—¶å‡å°‘1ä¸ªå®¹å™¨èŠ‚ç‚¹
- **å¸ƒå±€ç®€åŒ–**ï¼šé¿å…ä¸å¿…è¦çš„è‡ªåŠ¨å¸ƒå±€è®¡ç®—
- **å†…å­˜ä¼˜åŒ–**ï¼šå‡å°‘ç©ºå®¹å™¨çš„å†…å­˜å ç”¨
- **æ¸²æŸ“æ•ˆç‡**ï¼šå‡å°‘Figmaæ¸²æŸ“å±‚çº§

#### ğŸ” **ç”¨æˆ·ä½“éªŒæ”¹è¿›**
- **ç»“æ„æ¸…æ™°**ï¼šåªæœ‰èƒŒæ™¯å›¾ç‰‡æ—¶ç»“æ„æ›´ç®€æ´
- **æ€§èƒ½æ›´å¥½**ï¼šå‡å°‘ä¸å¿…è¦çš„èŠ‚ç‚¹æ“ä½œ
- **è°ƒè¯•å‹å¥½**ï¼šæ§åˆ¶å°æ—¥å¿—æ¸…æ™°æ˜¾ç¤ºåˆ›å»ºçŠ¶æ€
- **é€»è¾‘åˆç†**ï¼šç¬¦åˆç”¨æˆ·æœŸæœ›çš„è¡Œä¸º

### éªŒè¯ç»“æœ

#### æ„å»ºçŠ¶æ€
- âœ… **TypeScriptç¼–è¯‘**ï¼šæ— é”™è¯¯
- âœ… **æ„å»ºæˆåŠŸ**ï¼šäº§ç‰©å®Œæ•´
- âœ… **åŠŸèƒ½å®Œæ•´**ï¼šæ‰€æœ‰æ¨¡å—æ£€æµ‹é€»è¾‘æ­£å¸¸å·¥ä½œ
- âœ… **å‘åå…¼å®¹**ï¼šç°æœ‰åŠŸèƒ½ä¿æŒä¸å˜

#### æµ‹è¯•åœºæ™¯
- ğŸ§ª **çº¯èƒŒæ™¯åœºæ™¯**ï¼šåªæœ‰èƒŒæ™¯å›¾ç‰‡/é¢œè‰²ï¼Œæ— æ¨¡å—å†…å®¹
- ğŸ§ª **éƒ¨åˆ†æ¨¡å—åœºæ™¯**ï¼šåªæœ‰éƒ¨åˆ†æ¨¡å—å†…å®¹
- ğŸ§ª **å®Œæ•´æ¨¡å—åœºæ™¯**ï¼šåŒ…å«æ‰€æœ‰ç±»å‹æ¨¡å—å†…å®¹
- ğŸ§ª **ç©ºé…ç½®åœºæ™¯**ï¼šå®Œå…¨ç©ºçš„é…ç½®

### æŠ€æœ¯è¦ç‚¹

#### ğŸ”§ **æ£€æµ‹é€»è¾‘è®¾è®¡**
- **å…¨é¢è¦†ç›–**ï¼šæ£€æµ‹æ‰€æœ‰å¯èƒ½çš„æ¨¡å—ç±»å‹
- **ç²¾ç¡®åˆ¤æ–­**ï¼šä½¿ç”¨ä¸¥æ ¼çš„éç©ºå’Œéç©ºå­—ç¬¦ä¸²æ£€æŸ¥
- **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨çŸ­è·¯é€»è¾‘æé«˜æ£€æµ‹æ•ˆç‡

#### ğŸ›¡ï¸ **å®¹é”™å¤„ç†**
- **ç©ºå€¼å®‰å…¨**ï¼šæ‰€æœ‰æ£€æŸ¥éƒ½åŒ…å«ç©ºå€¼å¤„ç†
- **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptç±»å‹æ£€æŸ¥ç¡®ä¿å®‰å…¨
- **é™çº§å¤„ç†**ï¼šæ£€æµ‹å¤±è´¥æ—¶é‡‡ç”¨ä¿å®ˆç­–ç•¥ï¼ˆåˆ›å»ºå®¹å™¨ï¼‰

#### ğŸ“ **æ—¥å¿—å®Œå–„**
- **çŠ¶æ€è·Ÿè¸ª**ï¼šæ¸…æ™°è®°å½•å®¹å™¨åˆ›å»ºçŠ¶æ€
- **è°ƒè¯•æ”¯æŒ**ï¼šæä¾›è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
- **ç”¨æˆ·åé¦ˆ**ï¼šé€šè¿‡æ—¥å¿—äº†è§£æ’ä»¶è¡Œä¸º

**è‡ªé€‚åº”æ¨¡å—æ¡ä»¶åˆ›å»ºä¼˜åŒ–å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolså…·å¤‡äº†æ™ºèƒ½çš„æ¨¡å—æ£€æµ‹èƒ½åŠ›ï¼Œèƒ½å¤Ÿæ ¹æ®å®é™…å†…å®¹éœ€æ±‚åŠ¨æ€å†³å®šæ˜¯å¦åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå®ç°äº†æ›´ç²¾ç®€çš„ç»“æ„å’Œæ›´å¥½çš„æ€§èƒ½ï¼ 

## 2024-12-19 - è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯å¡«å……ä¼˜åŒ– ğŸ¨ğŸ“¦

### èƒŒæ™¯
ç”¨æˆ·è¦æ±‚å°†è‡ªé€‚åº”æ¨¡å—çš„èƒŒæ™¯å¡«å……æ”¹ä¸ºå§‹ç»ˆé€æ˜å¡«å……ï¼Œä»¥ä¼˜åŒ–H5åŸå‹çš„è§†è§‰å±‚æ¬¡å’ŒèƒŒæ™¯å¤„ç†é€»è¾‘ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **åŸæœ‰èƒŒæ™¯é€»è¾‘é—®é¢˜**
- **åŒé‡èƒŒæ™¯è®¾ç½®**ï¼šèƒŒæ™¯é¢œè‰²å¯èƒ½åŒæ—¶åº”ç”¨åˆ°å¤–æ¡†å’Œè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **é€»è¾‘å¤æ‚**ï¼šæ ¹æ®æ˜¯å¦æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨æ¥å†³å®šèƒŒæ™¯åº”ç”¨ä½ç½®
- **è§†è§‰å†—ä½™**ï¼šè‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„èƒŒæ™¯å¯èƒ½ä¸å¤–æ¡†èƒŒæ™¯é‡å 
- **å±‚æ¬¡ä¸æ¸…**ï¼šèƒŒæ™¯å±‚æ¬¡å…³ç³»ä¸å¤Ÿæ˜ç¡®

#### ğŸ¯ **ä¼˜åŒ–ç›®æ ‡**
- **ç®€åŒ–é€»è¾‘**ï¼šè‡ªé€‚åº”æ¨¡å—å®¹å™¨å§‹ç»ˆé€æ˜ï¼ŒèƒŒæ™¯é¢œè‰²å§‹ç»ˆåº”ç”¨åˆ°å¤–æ¡†
- **æ¸…æ™°å±‚æ¬¡**ï¼šå»ºç«‹æ¸…æ™°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„
- **é¿å…å†—ä½™**ï¼šæ¶ˆé™¤é‡å¤çš„èƒŒæ™¯è®¾ç½®
- **æå‡æ€§èƒ½**ï¼šå‡å°‘ä¸å¿…è¦çš„èƒŒæ™¯è®¡ç®—å’Œæ¸²æŸ“

### ä¿®æ”¹å®æ–½

#### **èƒŒæ™¯è®¾ç½®é€»è¾‘é‡æ„**
**æ–‡ä»¶**: `src/core/builders/h5-prototype-builder.ts`

**ä¿®æ”¹å‰**ï¼š
```typescript
// å¤æ‚çš„æ¡ä»¶åˆ¤æ–­é€»è¾‘
if (this.h5Frame) {
  // æ ¹æ®é¢œè‰²åˆ¤æ–­æ˜¯å¦è®¾ç½®è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯
  if (!isDefaultWhite) {
    const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
    this.h5Frame.fills = [colorFill];
  } else {
    this.h5Frame.fills = [];
  }
} else {
  // æ²¡æœ‰è‡ªé€‚åº”æ¨¡å—æ—¶æ‰è®¾ç½®å¤–æ¡†èƒŒæ™¯
  if (!isDefaultWhite) {
    const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
    this.outerFrame.fills = [colorFill];
  } else {
    this.outerFrame.fills = [];
  }
}
```

**ä¿®æ”¹å**ï¼š
```typescript
// ç®€åŒ–çš„èƒŒæ™¯è®¾ç½®é€»è¾‘
// è‡ªé€‚åº”æ¨¡å—å®¹å™¨å§‹ç»ˆè®¾ç½®ä¸ºé€æ˜å¡«å……
if (this.h5Frame) {
  this.h5Frame.fills = []; // å§‹ç»ˆé€æ˜
  console.log('è‡ªé€‚åº”æ¨¡å—å®¹å™¨è®¾ç½®ä¸ºé€æ˜å¡«å……');
}

// èƒŒæ™¯é¢œè‰²å§‹ç»ˆåº”ç”¨åˆ°å¤–æ¡†ï¼ˆH5åŸå‹å®¹å™¨ï¼‰
if (!isDefaultWhite) {
  const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
  this.outerFrame.fills = [colorFill];
  console.log(`H5åŸå‹å®¹å™¨èƒŒæ™¯è‰²è®¾ç½®ä¸º: ${this.config.pageBgColor}`);
} else {
  // ç™½è‰²æ—¶è®¾ç½®ä¸ºé€æ˜
  this.outerFrame.fills = [];
  console.log('H5åŸå‹å®¹å™¨èƒŒæ™¯è®¾ç½®ä¸ºé€æ˜ï¼ˆç™½è‰²ï¼‰');
}
```

### ä¼˜åŒ–æ•ˆæœ

#### ğŸ¨ **è§†è§‰å±‚æ¬¡ä¼˜åŒ–**

**æ–°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„**ï¼š
```
H5åŸå‹å®¹å™¨ (å¤–æ¡†)
â”œâ”€â”€ èƒŒæ™¯é¢œè‰² (pageBgColor) â† å§‹ç»ˆåœ¨è¿™é‡Œè®¾ç½®
â”œâ”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰) â† åœ¨å¤–æ¡†ä¸­
â””â”€â”€ è‡ªé€‚åº”æ¨¡å—å®¹å™¨ (å§‹ç»ˆé€æ˜) â† ä¸è®¾ç½®èƒŒæ™¯
    â”œâ”€â”€ å¤´éƒ¨æ¨¡å—
    â”œâ”€â”€ æ¸¸æˆä¿¡æ¯æ¨¡å—
    â”œâ”€â”€ è‡ªå®šä¹‰æ¨¡å—...
    â”œâ”€â”€ è§„åˆ™æ¨¡å—
    â””â”€â”€ åº•éƒ¨æ¨¡å—
```

#### ğŸ“Š **é€»è¾‘å¯¹æ¯”**

| æ–¹é¢ | ä¿®æ”¹å‰ | ä¿®æ”¹å | ä¼˜åŠ¿ |
|------|--------|--------|------|
| **èƒŒæ™¯è®¾ç½®ä½ç½®** | æ¡ä»¶åˆ¤æ–­ | å§‹ç»ˆå¤–æ¡† | é€»è¾‘ç»Ÿä¸€ |
| **è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯** | å¯èƒ½æœ‰èƒŒæ™¯ | å§‹ç»ˆé€æ˜ | è§†è§‰æ¸…æ™° |
| **ä»£ç å¤æ‚åº¦** | åŒé‡æ¡ä»¶åˆ¤æ–­ | å•ä¸€é€»è¾‘ | æ˜“ç»´æŠ¤ |
| **æ€§èƒ½** | å¤šæ¬¡èƒŒæ™¯è®¡ç®— | ä¸€æ¬¡è®¾ç½® | æ›´é«˜æ•ˆ |

#### ğŸš€ **æ€§èƒ½æå‡**
- **å‡å°‘èƒŒæ™¯è®¡ç®—**ï¼šåªéœ€è¦ä¸€æ¬¡èƒŒæ™¯é¢œè‰²è®¾ç½®
- **ç®€åŒ–æ¸²æŸ“**ï¼šé¿å…å¤šå±‚èƒŒæ™¯çš„é‡å æ¸²æŸ“
- **å†…å­˜ä¼˜åŒ–**ï¼šå‡å°‘èƒŒæ™¯å¡«å……å¯¹è±¡çš„åˆ›å»º
- **é€»è¾‘æ¸…æ™°**ï¼šä»£ç æ›´æ˜“ç†è§£å’Œç»´æŠ¤

#### ğŸ” **ç”¨æˆ·ä½“éªŒæ”¹è¿›**
- **è§†è§‰ä¸€è‡´æ€§**ï¼šèƒŒæ™¯é¢œè‰²å§‹ç»ˆåœ¨æœ€åº•å±‚
- **é€æ˜åº¦æ§åˆ¶**ï¼šè‡ªé€‚åº”æ¨¡å—é€æ˜ï¼Œä¸å½±å“èƒŒæ™¯æ˜¾ç¤º
- **è°ƒè¯•å‹å¥½**ï¼šæ¸…æ™°çš„æ—¥å¿—æ˜¾ç¤ºèƒŒæ™¯è®¾ç½®çŠ¶æ€
- **é¢„æœŸè¡Œä¸º**ï¼šç¬¦åˆç”¨æˆ·å¯¹èƒŒæ™¯å±‚æ¬¡çš„é¢„æœŸ

### åº”ç”¨åœºæ™¯

#### ğŸ¯ **é€‚ç”¨æƒ…å†µ**
1. **çº¯è‰²èƒŒæ™¯**ï¼šèƒŒæ™¯é¢œè‰²ç›´æ¥åº”ç”¨åˆ°å¤–æ¡†ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
2. **èƒŒæ™¯å›¾ç‰‡**ï¼šå›¾ç‰‡åœ¨å¤–æ¡†ä¸­ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜ä¸é®æŒ¡
3. **æ··åˆèƒŒæ™¯**ï¼šèƒŒæ™¯è‰²+èƒŒæ™¯å›¾ç‰‡ï¼Œå±‚æ¬¡æ¸…æ™°
4. **æ— èƒŒæ™¯å†…å®¹**ï¼šåªæœ‰è‡ªé€‚åº”æ¨¡å—æ—¶ï¼ŒèƒŒæ™¯é€»è¾‘ä¾ç„¶æ¸…æ™°

#### ğŸ“‹ **è§†è§‰æ•ˆæœ**
- **æœ‰èƒŒæ™¯è‰²æ—¶**ï¼šå¤–æ¡†æ˜¾ç¤ºèƒŒæ™¯è‰²ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
- **æœ‰èƒŒæ™¯å›¾æ—¶**ï¼šå›¾ç‰‡åœ¨å¤–æ¡†ä¸­æ˜¾ç¤ºï¼Œè‡ªé€‚åº”æ¨¡å—ä¸é®æŒ¡
- **ç™½è‰²èƒŒæ™¯æ—¶**ï¼šå¤–æ¡†é€æ˜ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜ï¼Œæ•´ä½“é€æ˜
- **æ— æ¨¡å—å†…å®¹æ—¶**ï¼šåªæœ‰å¤–æ¡†ï¼ŒèƒŒæ™¯è®¾ç½®æ­£å¸¸

### éªŒè¯ç»“æœ

#### æ„å»ºçŠ¶æ€
- âœ… **TypeScriptç¼–è¯‘**ï¼šæ— é”™è¯¯
- âœ… **æ„å»ºæˆåŠŸ**ï¼šäº§ç‰©å®Œæ•´
- âœ… **é€»è¾‘ç®€åŒ–**ï¼šèƒŒæ™¯è®¾ç½®é€»è¾‘æ›´æ¸…æ™°
- âœ… **å‘åå…¼å®¹**ï¼šè§†è§‰æ•ˆæœä¿æŒä¸€è‡´

#### æµ‹è¯•åœºæ™¯
- ğŸ§ª **çº¯è‰²èƒŒæ™¯**ï¼šå¤–æ¡†èƒŒæ™¯è‰²ï¼Œè‡ªé€‚åº”æ¨¡å—é€æ˜
- ğŸ§ª **èƒŒæ™¯å›¾ç‰‡**ï¼šå›¾ç‰‡æ˜¾ç¤ºæ­£å¸¸ï¼Œæ¨¡å—ä¸é®æŒ¡
- ğŸ§ª **ç™½è‰²èƒŒæ™¯**ï¼šæ•´ä½“é€æ˜ï¼Œæ— å¤šä½™èƒŒæ™¯
- ğŸ§ª **æ··åˆèƒŒæ™¯**ï¼šè‰²å½©+å›¾ç‰‡å±‚æ¬¡æ¸…æ™°

### æŠ€æœ¯è¦ç‚¹

#### ğŸ”§ **è®¾è®¡åŸåˆ™**
- **å•ä¸€èŒè´£**ï¼šå¤–æ¡†è´Ÿè´£èƒŒæ™¯ï¼Œè‡ªé€‚åº”æ¨¡å—è´Ÿè´£å†…å®¹å¸ƒå±€
- **å±‚æ¬¡åˆ†ç¦»**ï¼šèƒŒæ™¯å±‚ä¸å†…å®¹å±‚æ˜ç¡®åˆ†ç¦»
- **é€»è¾‘ç»Ÿä¸€**ï¼šæ— è®ºä½•ç§æƒ…å†µï¼ŒèƒŒæ™¯é€»è¾‘ä¿æŒä¸€è‡´

#### ğŸ›¡ï¸ **å®¹é”™å¤„ç†**
- **ç©ºå€¼å®‰å…¨**ï¼šèƒŒæ™¯é¢œè‰²è®¾ç½®åŒ…å«é»˜è®¤å€¼å¤„ç†
- **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptç¡®ä¿ç±»å‹æ­£ç¡®
- **æ—¥å¿—å®Œå–„**ï¼šè¯¦ç»†è®°å½•èƒŒæ™¯è®¾ç½®çŠ¶æ€

#### ğŸ“ **æ—¥å¿—ä¼˜åŒ–**
- **çŠ¶æ€è·Ÿè¸ª**ï¼šæ¸…æ™°è®°å½•èƒŒæ™¯è®¾ç½®è¿‡ç¨‹
- **è°ƒè¯•æ”¯æŒ**ï¼šæä¾›è¯¦ç»†çš„èƒŒæ™¯è®¾ç½®ä¿¡æ¯
- **ç”¨æˆ·åé¦ˆ**ï¼šé€šè¿‡æ—¥å¿—äº†è§£èƒŒæ™¯å¤„ç†çŠ¶æ€

**è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯å¡«å……ä¼˜åŒ–å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolså…·å¤‡äº†æ›´æ¸…æ™°çš„èƒŒæ™¯å±‚æ¬¡ç»“æ„ï¼Œè‡ªé€‚åº”æ¨¡å—å§‹ç»ˆé€æ˜ï¼ŒèƒŒæ™¯é¢œè‰²ç»Ÿä¸€åº”ç”¨åˆ°å¤–æ¡†ï¼Œå®ç°äº†æ›´ç®€æ´çš„é€»è¾‘å’Œæ›´å¥½çš„è§†è§‰æ•ˆæœï¼ 

## 2024-12-19 - ç¾½åŒ–è’™ç‰ˆç»„åæ ‡ç³»ç»Ÿé—®é¢˜æ ¹æœ¬ä¿®å¤ ğŸ¯ğŸ”§

### é—®é¢˜èƒŒæ™¯
ç”¨æˆ·åé¦ˆç¾½åŒ–è’™ç‰ˆç»„ä¾ç„¶æ²¡æœ‰æ­£ç¡®å±…ä¸­ï¼Œé€šè¿‡MCPå·¥å…·æŸ¥è¯¢Figma Plugin APIæ–‡æ¡£å‘ç°äº†åæ ‡ç³»ç»Ÿçš„æ ¹æœ¬é—®é¢˜ã€‚

### ğŸ” æ ¹æœ¬åŸå› å‘ç°
é€šè¿‡æŸ¥è¯¢Figma Plugin APIå®˜æ–¹æ–‡æ¡£ï¼Œå‘ç°äº†**Container Parentï¼ˆå®¹å™¨çˆ¶çº§ï¼‰**çš„é‡è¦æ¦‚å¿µï¼š

> **Container parent**: The relative transform of a node is shown relative to its container parent, which includes canvas nodes, frame nodes, component nodes, and instance nodes. Just like in the properties panel, it is **not** relative to its direct parent if the parent is a group or a boolean operation.

**å…³é”®å‘ç°**ï¼š
- **ç»„ï¼ˆGroupï¼‰ä¸æ˜¯å®¹å™¨çˆ¶çº§**ï¼šç»„å†…å­å…ƒç´ çš„åæ ‡ä¸æ˜¯ç›¸å¯¹äºç»„ï¼Œè€Œæ˜¯ç›¸å¯¹äºåŒ…å«è¯¥ç»„çš„å®¹å™¨çˆ¶çº§
- **å¤´å›¾ç»„æ˜¯Groupç±»å‹**ï¼šæ‰€ä»¥ç¾½åŒ–è’™ç‰ˆç»„çš„åæ ‡å®é™…ä¸Šæ˜¯ç›¸å¯¹äºåŒ…å«å¤´å›¾ç»„çš„å®¹å™¨
- **ä¹‹å‰çš„å±…ä¸­è®¡ç®—å®Œå…¨é”™è¯¯**ï¼šæˆ‘ä»¬æŒ‰ç…§ç›¸å¯¹äºå¤´å›¾ç»„çš„é€»è¾‘æ¥è®¡ç®—ï¼Œä½†åæ ‡ç³»ç»Ÿæ ¹æœ¬ä¸æ˜¯è¿™æ ·å·¥ä½œçš„

### ğŸš¨ é—®é¢˜åˆ†æ
```
é”™è¯¯ç†è§£çš„åæ ‡ç³»ç»Ÿï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (Group, x: 0)
   â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (x: -120.5) â† ä»¥ä¸ºæ˜¯ç›¸å¯¹äºå¤´å›¾ç»„
   â””â”€ å¤´å›¾èŠ‚ç‚¹ (x: 0) â† ä»¥ä¸ºæ˜¯ç›¸å¯¹äºå¤´å›¾ç»„

å®é™…çš„åæ ‡ç³»ç»Ÿï¼š
é¡µé¢ (Container Parent)
â”œâ”€ å¤´å›¾ç»„ (Group, x: 0) â† ä¸æ˜¯å®¹å™¨çˆ¶çº§
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (x: -120.5) â† å®é™…ç›¸å¯¹äºé¡µé¢ï¼
â””â”€ å¤´å›¾èŠ‚ç‚¹ (x: 0) â† å®é™…ç›¸å¯¹äºé¡µé¢ï¼
```

### âœ… ä¿®å¤æ–¹æ¡ˆ
**ä¿®æ”¹æ–‡ä»¶**ï¼š`src/core/builders/module-builders.ts`

**ä¿®å¤é€»è¾‘**ï¼š
```typescript
// ğŸš¨ é‡è¦ä¿®æ­£ï¼šæ ¹æ®Figma APIæ–‡æ¡£ï¼Œç»„ï¼ˆGroupï¼‰ä¸æ˜¯"å®¹å™¨çˆ¶çº§"
// ç»„å†…å…ƒç´ çš„åæ ‡æ˜¯ç›¸å¯¹äºåŒ…å«è¯¥ç»„çš„å®¹å™¨çˆ¶çº§ï¼Œè€Œä¸æ˜¯ç›¸å¯¹äºç»„æœ¬èº«

// ç¾½åŒ–è’™ç‰ˆç»„çš„ç»å¯¹ä½ç½®åº”è¯¥æ˜¯ï¼šå¤´å›¾ç»„ä½ç½® + ç»„å†…å±…ä¸­åç§»
const headerGroupX = originalX; // å¤´å›¾ç»„åœ¨å®¹å™¨ä¸­çš„Xä½ç½®
const centerOffset = (originalWidth - rectWidth) / 2; // å±…ä¸­åç§»é‡

// ç¾½åŒ–è’™ç‰ˆç»„çš„æœ€ç»ˆä½ç½®
featherMaskGroup.x = headerGroupX + centerOffset; // ç»å¯¹ä½ç½®ï¼šç»„ä½ç½® + å±…ä¸­åç§»
featherMaskGroup.y = originalY - blurRadius; // ç»å¯¹ä½ç½®ï¼šç»„ä½ç½® + Yåç§»

// å¤´å›¾èŠ‚ç‚¹åœ¨å¤´å›¾ç»„å†…çš„ä½ç½®ï¼ˆç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›¸å¯¹äºç»„ï¼‰
headerNode.x = originalX; // ä¿æŒåŸå§‹Xä½ç½®
headerNode.y = originalY; // ä¿æŒåŸå§‹Yä½ç½®
```

### ğŸ“Š ä¿®å¤æ•ˆæœå¯¹æ¯”
```
ä¿®å¤å‰ï¼ˆé”™è¯¯åæ ‡ç³»ç»Ÿï¼‰ï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (1080px, x: 0)
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (1321px, x: -120.5) â† ç›¸å¯¹äºé¡µé¢ï¼Œå¯¼è‡´åç§»
â””â”€ å¤´å›¾èŠ‚ç‚¹ (1080px, x: 0)

ä¿®å¤åï¼ˆæ­£ç¡®åæ ‡ç³»ç»Ÿï¼‰ï¼š
é¡µé¢
â”œâ”€ å¤´å›¾ç»„ (1080px, x: 0)
â”œâ”€ ç¾½åŒ–è’™ç‰ˆç»„ (1321px, x: 0 + (-120.5) = -120.5) â† æ­£ç¡®çš„ç»å¯¹ä½ç½®
â””â”€ å¤´å›¾èŠ‚ç‚¹ (1080px, x: 0)
```

### ğŸ¯ æŠ€æœ¯å­¦ä¹ 
**Figmaåæ ‡ç³»ç»Ÿçš„é‡è¦æ¦‚å¿µ**ï¼š
1. **å®¹å™¨çˆ¶çº§**ï¼šåªæœ‰Canvasã€Frameã€Componentã€Instanceæ˜¯å®¹å™¨çˆ¶çº§
2. **ç»„å’Œå¸ƒå°”è¿ç®—**ï¼šä¸æ˜¯å®¹å™¨çˆ¶çº§ï¼Œå…¶å­å…ƒç´ åæ ‡ç›¸å¯¹äºæ›´ä¸Šå±‚çš„å®¹å™¨
3. **ç›¸å¯¹å˜æ¢**ï¼š`relativeTransform`æ€»æ˜¯ç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›´æ¥çˆ¶çº§
4. **ç»„çš„ç‰¹æ®Šæ€§**ï¼šç»„ä¼šè‡ªåŠ¨è°ƒæ•´å¤§å°ä»¥é€‚åº”å…¶å†…å®¹ï¼Œä½ç½®ç”±å­å…ƒç´ å†³å®š

### ğŸ“š å‚è€ƒæ–‡æ¡£
- **Figma Plugin API - relativeTransform**: https://www.figma.com/plugin-docs/api/properties/nodes-relativetransform/
- **Figma Plugin API - GroupNode**: https://www.figma.com/plugin-docs/api/GroupNode/
- **Container Parentæ¦‚å¿µ**ï¼šç»„å’Œå¸ƒå°”è¿ç®—ä¸æ˜¯å®¹å™¨çˆ¶çº§çš„é‡è¦è¯´æ˜

### ğŸ”§ æ„å»ºéªŒè¯

è¿è¡Œ `npm run build` éªŒè¯ä¿®å¤æ•ˆæœï¼š

**æ„å»ºç»“æœ**ï¼š
- âœ… **TypeScriptç¼–è¯‘**ï¼šæˆåŠŸç¼–è¯‘ï¼Œæœ‰ä¸€äº›é¢„æœŸçš„è­¦å‘Šï¼ˆlocalStorageã€windowç­‰åœ¨æ’ä»¶ç¯å¢ƒä¸­çš„ç±»å‹é—®é¢˜ï¼‰
- âœ… **æ’ä»¶æ„å»º**ï¼š`dist/plugin/code-standalone.js` ç”ŸæˆæˆåŠŸ
- âœ… **UIæ„å»º**ï¼š`dist/ui.html` (192.9KB) ç”ŸæˆæˆåŠŸï¼ŒCSSå’ŒJSå®Œå…¨å†…è”
- âœ… **æ ¸å¿ƒåº“æ„å»º**ï¼šæ¨¡å—åŒ–æ„å»ºå®Œæˆ
- âœ… **æ²™ç›’é€‚é…**ï¼šç¬¦åˆFigmaæ’ä»¶å®‰å…¨ç­–ç•¥

**æ„å»ºäº§ç‰©**ï¼š
```
dist/
â”œâ”€â”€ core/ (æ ¸å¿ƒåº“æ¨¡å—)
â”œâ”€â”€ plugin/ (æ’ä»¶ä¸»ç¨‹åº)
â””â”€â”€ ui.html (192.9KB, å®Œå…¨å†…è”ç‰ˆæœ¬)
```

### ğŸ¯ ä¿®å¤æ€»ç»“

**å…³é”®å‘ç°**ï¼š
- **Container Parentæ¦‚å¿µ**ï¼šFigmaåæ ‡ç³»ç»Ÿçš„æ ¸å¿ƒåŸç†
- **ç»„ä¸æ˜¯å®¹å™¨çˆ¶çº§**ï¼šGroupã€BooleanOperationçš„å­å…ƒç´ åæ ‡ç›¸å¯¹äºæ›´ä¸Šå±‚å®¹å™¨
- **ç›¸å¯¹å˜æ¢**ï¼š`relativeTransform`æ€»æ˜¯ç›¸å¯¹äºå®¹å™¨çˆ¶çº§ï¼Œä¸æ˜¯ç›´æ¥çˆ¶çº§

**ä¿®å¤æ•ˆæœ**ï¼š
- âœ… **åæ ‡è®¡ç®—æ­£ç¡®**ï¼šç¾½åŒ–è’™ç‰ˆç»„ä½ç½®åŸºäºæ­£ç¡®çš„åæ ‡ç³»ç»Ÿ
- âœ… **è§„èŒƒæ›´æ–°**ï¼šå°†é‡è¦è§„åˆ™æ·»åŠ åˆ°é¡¹ç›®å¼€å‘è§„èŒƒä¸­
- âœ… **æ–‡æ¡£å®Œå–„**ï¼šè¯¦ç»†è®°å½•é—®é¢˜å‘ç°å’Œè§£å†³è¿‡ç¨‹
- âœ… **çŸ¥è¯†ç§¯ç´¯**ï¼šä¸ºå›¢é˜Ÿæä¾›å®è´µçš„Figma APIä½¿ç”¨ç»éªŒ

**è§„èŒƒæ›´æ–°**ï¼š
- ğŸ“š **Figmaå¼€å‘è§„èŒƒ**ï¼šæ·»åŠ åæ ‡ç³»ç»Ÿå’ŒContainer Parentè§„åˆ™
- ğŸ“‹ **å¼€å‘æ£€æŸ¥æ¸…å•**ï¼šå¢åŠ åæ ‡è®¡ç®—éªŒè¯é¡¹
- ğŸ”— **å®˜æ–¹æ–‡æ¡£å¼•ç”¨**ï¼šæä¾›æƒå¨å‚è€ƒé“¾æ¥

**ç¾½åŒ–è’™ç‰ˆç»„åæ ‡ç³»ç»Ÿé—®é¢˜æ ¹æœ¬ä¿®å¤å®Œæˆï¼** ğŸ‰

è¿™æ¬¡ä¿®å¤ä¸ä»…è§£å†³äº†å…·ä½“çš„ä½ç½®é—®é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯ï¼š
- ğŸ§  **æ·±å…¥ç†è§£**ï¼šæŒæ¡äº†Figmaåæ ‡ç³»ç»Ÿçš„æ ¸å¿ƒæ¦‚å¿µ
- ğŸ“– **æ–‡æ¡£ç ”ç©¶**ï¼šé€šè¿‡MCPå·¥å…·æŸ¥è¯¢å®˜æ–¹APIæ–‡æ¡£æ‰¾åˆ°æ ¹æœ¬åŸå› 
- ğŸ›¡ï¸ **è§„èŒƒå»ºç«‹**ï¼šå°†é‡è¦è§„åˆ™çº³å…¥é¡¹ç›®å¼€å‘è§„èŒƒ
- ğŸ”„ **çŸ¥è¯†ä¼ æ‰¿**ï¼šä¸ºæœªæ¥çš„å¼€å‘å·¥ä½œæä¾›æŒ‡å¯¼

ç°åœ¨H5Toolsé¡¹ç›®å…·å¤‡äº†æ›´ä¸“ä¸šçš„Figmaæ’ä»¶å¼€å‘èƒ½åŠ›ï¼

**ä»£ç ä¸€è‡´æ€§ä¿®æ­£å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolsçš„å®é™…è¿è¡Œä»£ç ä¸åŸå§‹è®¾è®¡ä¿æŒå®Œå…¨ä¸€è‡´ï¼Œç¡®ä¿äº†è®¾è®¡æ„å›¾çš„å‡†ç¡®å®ç°å’Œä»£ç çš„å¯ç»´æŠ¤æ€§ï¼ 

## 2024-12-19 - è‡ªé€‚åº”æ¨¡å—æ¡ä»¶åˆ›å»ºä¼˜åŒ– ğŸ¯ğŸ“¦

### èƒŒæ™¯
ç”¨æˆ·è¦æ±‚ä¸ºè‡ªé€‚åº”æ¨¡å—æ·»åŠ æ¡ä»¶åˆ¤æ–­ï¼Œå½“æ²¡æœ‰æ¨¡å—å†…å®¹æ—¶è·³è¿‡è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„åˆ›å»ºï¼Œä»¥ä¼˜åŒ–H5åŸå‹çš„ç»“æ„å’Œæ€§èƒ½ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **åŸæœ‰é€»è¾‘é—®é¢˜**
- **æ— æ¡ä»¶åˆ›å»º**ï¼šæ— è®ºæ˜¯å¦æœ‰æ¨¡å—å†…å®¹ï¼Œéƒ½ä¼šåˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç©ºå®¹å™¨å­˜åœ¨**ï¼šå½“ç”¨æˆ·åªè®¾ç½®èƒŒæ™¯å›¾ç‰‡è€Œæ²¡æœ‰ä»»ä½•æ¨¡å—å†…å®¹æ—¶ï¼Œä»ä¼šåˆ›å»ºç©ºçš„è‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç»“æ„å†—ä½™**ï¼šç©ºçš„è‡ªé€‚åº”æ¨¡å—å®¹å™¨ä¼šå¢åŠ ä¸å¿…è¦çš„èŠ‚ç‚¹å±‚çº§
- **æ€§èƒ½æµªè´¹**ï¼šæ— æ„ä¹‰çš„å®¹å™¨åˆ›å»ºå’Œå¸ƒå±€è®¡ç®—

#### ğŸ¯ **ä¼˜åŒ–ç›®æ ‡**
- **æ™ºèƒ½åˆ¤æ–­**ï¼šæ ¹æ®é…ç½®å†…å®¹æ™ºèƒ½å†³å®šæ˜¯å¦åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **ç»“æ„ç²¾ç®€**ï¼šæ²¡æœ‰æ¨¡å—å†…å®¹æ—¶ç›´æ¥ä½¿ç”¨å¤–æ¡†ä½œä¸ºå®¹å™¨
- **æ€§èƒ½æå‡**ï¼šé¿å…ä¸å¿…è¦çš„èŠ‚ç‚¹åˆ›å»ºå’Œå¸ƒå±€è®¡ç®—
- **é€»è¾‘æ¸…æ™°**ï¼šä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°å’Œå¯ç»´æŠ¤

### ä¿®æ”¹å®æ–½

#### 1. **æ–°å¢å†…å®¹æ£€æµ‹æ–¹æ³•**
**æ–‡ä»¶**: `src/core/builders/h5-prototype-builder.ts`

```typescript
/**
 * æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•æ¨¡å—å†…å®¹éœ€è¦åˆ›å»º
 * @returns boolean å¦‚æœæœ‰ä»»ä½•æ¨¡å—å†…å®¹è¿”å›trueï¼Œå¦åˆ™è¿”å›false
 */
private hasAnyModuleContent(): boolean {
  // æ£€æŸ¥å¤´éƒ¨æ¨¡å—å†…å®¹
  const hasHeaderContent = !!(this.config.headerImage || this.config.titleUpload);
  
  // æ£€æŸ¥æ¸¸æˆä¿¡æ¯æ¨¡å—å†…å®¹
  const hasGameInfoContent = !!(this.config.gameName || this.config.gameDesc || this.config.gameIcon);
  
  // æ£€æŸ¥è‡ªå®šä¹‰æ¨¡å—å†…å®¹
  const hasCustomModules = !!(this.config.modules && this.config.modules.length > 0);
  
  // æ£€æŸ¥è§„åˆ™æ¨¡å—å†…å®¹
  const hasRulesTitle = this.config.rulesTitle && this.config.rulesTitle.trim() !== '';
  const hasRulesBgImage = this.config.rulesBgImage !== null && this.config.rulesBgImage !== undefined;
  const hasRulesContent = this.config.rulesContent && this.config.rulesContent.trim() !== '';
  const hasRulesContent_any = hasRulesTitle || hasRulesBgImage || hasRulesContent;
  
  // æ£€æŸ¥åº•éƒ¨æ¨¡å—å†…å®¹
  const hasFooterContent = !!(this.config.footerLogo || this.config.footerBg);
  
  // å¦‚æœæœ‰ä»»ä½•æ¨¡å—å†…å®¹ï¼Œè¿”å›true
  return hasHeaderContent || hasGameInfoContent || hasCustomModules || hasRulesContent_any || hasFooterContent;
}
```

#### 2. **æ¡ä»¶åŒ–æ¡†æ¶åˆ›å»º**
```typescript
private createBaseFrames(): void {
  // 1. H5åŸå‹å®¹å™¨ä¸éœ€è¦åº”ç”¨è‡ªåŠ¨å¸ƒå±€ï¼Œåªæ˜¯ä¸€ä¸ªç”»æ¿ï¼Œå¹¶è®¾ç½®å†…å®¹è£å‰ª
  this.outerFrame = NodeUtils.createFrame('H5åŸå‹', CONSTANTS.H5_WIDTH, 100);
  this.outerFrame.layoutMode = "NONE"; // ä¸ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€
  this.outerFrame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
  
  // 2. åªæœ‰å½“æœ‰æ¨¡å—å†…å®¹æ—¶æ‰åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨
  if (this.hasAnyModuleContent()) {
    this.h5Frame = NodeUtils.createFrame('è‡ªé€‚åº”æ¨¡å—', CONSTANTS.H5_WIDTH, 100);
    this.h5Frame.fills = [];
    
    // è®¾ç½®è‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„è‡ªåŠ¨å¸ƒå±€
    NodeUtils.setupAutoLayout(this.h5Frame, 'VERTICAL', 0, 0);
    this.h5Frame.clipsContent = true; // è®¾ç½®å†…å®¹è£å‰ª
    this.h5Frame.layoutWrap = "NO_WRAP"; // è®¾ç½®å¸ƒå±€ä¸æ¢è¡Œï¼Œç¡®ä¿æ‰€æœ‰å­å…ƒç´ åœ¨ä¸€åˆ—ä¸­å‚ç›´æ’åˆ—
    
    console.log('æ£€æµ‹åˆ°æ¨¡å—å†…å®¹ï¼Œå·²åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨');
  } else {
    console.log('æœªæ£€æµ‹åˆ°æ¨¡å—å†…å®¹ï¼Œè·³è¿‡è‡ªé€‚åº”æ¨¡å—å®¹å™¨åˆ›å»º');
  }
}
```

#### 3. **é€‚é…èƒŒæ™¯è®¾ç½®é€»è¾‘**
```typescript
private async setupBackground(): Promise<void> {
  // å¦‚æœå­˜åœ¨è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè®¾ç½®å…¶èƒŒæ™¯é¢œè‰²
  if (this.h5Frame) {
    // èƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°è‡ªé€‚åº”æ¨¡å—å®¹å™¨
    if (!isDefaultWhite) {
      const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
      this.h5Frame.fills = [colorFill];
    } else {
      this.h5Frame.fills = [];
    }
  } else {
    // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå°†èƒŒæ™¯é¢œè‰²åº”ç”¨åˆ°å¤–æ¡†
    if (!isDefaultWhite) {
      const colorFill = ColorUtils.createSolidFill(ColorUtils.hexToRgb(this.config.pageBgColor || '#FFFFFF'));
      this.outerFrame.fills = [colorFill];
    } else {
      this.outerFrame.fills = [];
    }
  }
  
  // èƒŒæ™¯å›¾ç‰‡å¤„ç†é€»è¾‘ä¿æŒä¸å˜...
  
  // è®¾ç½®å®ŒèƒŒæ™¯ä¹‹åï¼Œå¦‚æœå­˜åœ¨è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå°†å…¶æ·»åŠ ä¸ºH5åŸå‹å®¹å™¨çš„å­å…ƒç´ 
  if (this.h5Frame) {
    NodeUtils.safeAppendChild(this.outerFrame, this.h5Frame, 'H5è‡ªé€‚åº”æ¨¡å—å®¹å™¨æ·»åŠ ');
  }
}
```

#### 4. **é€‚é…æ¨¡å—æ·»åŠ é€»è¾‘**
```typescript
private async addModules(): Promise<void> {
  // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè¯´æ˜æ²¡æœ‰æ¨¡å—å†…å®¹ï¼Œç›´æ¥è¿”å›
  if (!this.h5Frame) {
    console.log('æ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè·³è¿‡æ¨¡å—æ·»åŠ ');
    return;
  }
  
  // åˆ›å»ºæ‰€æœ‰æ¨¡å—
  const modules = await this.createAllModules();
  
  // æ‰¹é‡å®‰å…¨æ·»åŠ æ¨¡å—åˆ°H5ç”»æ¿ä¸­
  NodeUtils.safeBatchAppendChildren(this.h5Frame, modules, 'H5æ¨¡å—æ‰¹é‡æ·»åŠ ');
}
```

#### 5. **é€‚é…æœ€ç»ˆå¸ƒå±€é€»è¾‘**
```typescript
private finalizeLayout(): void {
  // è°ƒæ•´H5åŸå‹å®¹å™¨é«˜åº¦
  if (this.h5Frame) {
    // å¦‚æœæœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè°ƒæ•´ä¸ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨é«˜åº¦
    this.outerFrame.resize(CONSTANTS.H5_WIDTH, this.h5Frame.height);
    // æ¨¡å—å®¹å™¨å±‚çº§è°ƒæ•´é€»è¾‘...
  } else {
    // å¦‚æœæ²¡æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œè®¾ç½®ä¸€ä¸ªæœ€å°é«˜åº¦æˆ–æ ¹æ®èƒŒæ™¯å›¾ç‰‡è°ƒæ•´
    let finalHeight = 100; // é»˜è®¤æœ€å°é«˜åº¦
    
    // å¦‚æœæœ‰èƒŒæ™¯å›¾ç‰‡ï¼Œæ ¹æ®èƒŒæ™¯å›¾ç‰‡é«˜åº¦è°ƒæ•´
    if (this.config.pageBgImage) {
      const bgImageNode = this.outerFrame.findOne(node => node.name === 'é¡µé¢èƒŒæ™¯å›¾ç‰‡');
      if (bgImageNode && 'height' in bgImageNode) {
        finalHeight = Math.max(finalHeight, bgImageNode.height);
      }
    }
    
    this.outerFrame.resize(CONSTANTS.H5_WIDTH, finalHeight);
    console.log(`æ²¡æœ‰æ¨¡å—å†…å®¹ï¼ŒH5åŸå‹è®¾ç½®ä¸ºæœ€å°é«˜åº¦: ${finalHeight}px`);
  }
}
```

### ä¼˜åŒ–æ•ˆæœ

#### ğŸ¯ **æ™ºèƒ½æ£€æµ‹èŒƒå›´**
| æ¨¡å—ç±»å‹ | æ£€æµ‹æ¡ä»¶ | ç¤ºä¾‹ |
|----------|----------|------|
| **å¤´éƒ¨æ¨¡å—** | `headerImage \|\| titleUpload` | å¤´éƒ¨å›¾ç‰‡æˆ–æ ‡é¢˜ä¸Šä¼  |
| **æ¸¸æˆä¿¡æ¯æ¨¡å—** | `gameName \|\| gameDesc \|\| gameIcon` | æ¸¸æˆåç§°ã€æè¿°æˆ–å›¾æ ‡ |
| **è‡ªå®šä¹‰æ¨¡å—** | `modules && modules.length > 0` | è‡ªå®šä¹‰æ¨¡å—æ•°ç»„éç©º |
| **è§„åˆ™æ¨¡å—** | `rulesTitle \|\| rulesBgImage \|\| rulesContent` | è§„åˆ™æ ‡é¢˜ã€èƒŒæ™¯å›¾æˆ–å†…å®¹ |
| **åº•éƒ¨æ¨¡å—** | `footerLogo \|\| footerBg` | åº•éƒ¨Logoæˆ–èƒŒæ™¯ |

#### ğŸ“Š **ç»“æ„å¯¹æ¯”**

**æœ‰æ¨¡å—å†…å®¹æ—¶**ï¼š
```
H5åŸå‹ (1080xåŠ¨æ€é«˜åº¦, æ— èƒŒæ™¯, layoutMode="NONE")
â”œâ”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰)
â””â”€â”€ è‡ªé€‚åº”æ¨¡å— (1080xåŠ¨æ€é«˜åº¦, é…ç½®èƒŒæ™¯è‰², è‡ªåŠ¨å¸ƒå±€)
    â”œâ”€â”€ å¤´éƒ¨æ¨¡å— (å¯é€‰)
    â”œâ”€â”€ æ¸¸æˆä¿¡æ¯æ¨¡å— (å¯é€‰) 
    â”œâ”€â”€ è‡ªå®šä¹‰æ¨¡å—... (å¯é€‰)
    â”œâ”€â”€ è§„åˆ™æ¨¡å— (å¯é€‰)
    â””â”€â”€ åº•éƒ¨æ¨¡å— (å¯é€‰)
```

**æ— æ¨¡å—å†…å®¹æ—¶**ï¼š
```
H5åŸå‹ (1080xèƒŒæ™¯å›¾é«˜åº¦æˆ–100px, é…ç½®èƒŒæ™¯è‰², layoutMode="NONE")
â””â”€â”€ é¡µé¢èƒŒæ™¯å›¾ç‰‡ (å¯é€‰)
```

#### ğŸš€ **æ€§èƒ½æå‡**
- **èŠ‚ç‚¹å‡å°‘**ï¼šæ— å†…å®¹æ—¶å‡å°‘1ä¸ªå®¹å™¨èŠ‚ç‚¹
- **å¸ƒå±€ç®€åŒ–**ï¼šé¿å…ä¸å¿…è¦çš„è‡ªåŠ¨å¸ƒå±€è®¡ç®—
- **å†…å­˜ä¼˜åŒ–**ï¼šå‡å°‘ç©ºå®¹å™¨çš„å†…å­˜å ç”¨
- **æ¸²æŸ“æ•ˆç‡**ï¼šå‡å°‘Figmaæ¸²æŸ“å±‚çº§

#### ğŸ” **ç”¨æˆ·ä½“éªŒæ”¹è¿›**
- **ç»“æ„æ¸…æ™°**ï¼šåªæœ‰èƒŒæ™¯å›¾ç‰‡æ—¶ç»“æ„æ›´ç®€æ´
- **æ€§èƒ½æ›´å¥½**ï¼šå‡å°‘ä¸å¿…è¦çš„èŠ‚ç‚¹æ“ä½œ
- **è°ƒè¯•å‹å¥½**ï¼šæ§åˆ¶å°æ—¥å¿—æ¸…æ™°æ˜¾ç¤ºåˆ›å»ºçŠ¶æ€
- **é€»è¾‘åˆç†**ï¼šç¬¦åˆç”¨æˆ·æœŸæœ›çš„è¡Œä¸º

### éªŒè¯ç»“æœ

#### æ„å»ºçŠ¶æ€
- âœ… **TypeScriptç¼–è¯‘**ï¼šæ— é”™è¯¯
- âœ… **æ„å»ºæˆåŠŸ**ï¼šäº§ç‰©å®Œæ•´
- âœ… **åŠŸèƒ½å®Œæ•´**ï¼šæ‰€æœ‰æ¨¡å—æ£€æµ‹é€»è¾‘æ­£å¸¸å·¥ä½œ
- âœ… **å‘åå…¼å®¹**ï¼šç°æœ‰åŠŸèƒ½ä¿æŒä¸å˜

#### æµ‹è¯•åœºæ™¯
- ğŸ§ª **çº¯èƒŒæ™¯åœºæ™¯**ï¼šåªæœ‰èƒŒæ™¯å›¾ç‰‡/é¢œè‰²ï¼Œæ— æ¨¡å—å†…å®¹
- ğŸ§ª **éƒ¨åˆ†æ¨¡å—åœºæ™¯**ï¼šåªæœ‰éƒ¨åˆ†æ¨¡å—å†…å®¹
- ğŸ§ª **å®Œæ•´æ¨¡å—åœºæ™¯**ï¼šåŒ…å«æ‰€æœ‰ç±»å‹æ¨¡å—å†…å®¹
- ğŸ§ª **ç©ºé…ç½®åœºæ™¯**ï¼šå®Œå…¨ç©ºçš„é…ç½®

### æŠ€æœ¯è¦ç‚¹

#### ğŸ”§ **æ£€æµ‹é€»è¾‘è®¾è®¡**
- **å…¨é¢è¦†ç›–**ï¼šæ£€æµ‹æ‰€æœ‰å¯èƒ½çš„æ¨¡å—ç±»å‹
- **ç²¾ç¡®åˆ¤æ–­**ï¼šä½¿ç”¨ä¸¥æ ¼çš„éç©ºå’Œéç©ºå­—ç¬¦ä¸²æ£€æŸ¥
- **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨çŸ­è·¯é€»è¾‘æé«˜æ£€æµ‹æ•ˆç‡

#### ğŸ›¡ï¸ **å®¹é”™å¤„ç†**
- **ç©ºå€¼å®‰å…¨**ï¼šæ‰€æœ‰æ£€æŸ¥éƒ½åŒ…å«ç©ºå€¼å¤„ç†
- **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨TypeScriptç±»å‹æ£€æŸ¥ç¡®ä¿å®‰å…¨
- **é™çº§å¤„ç†**ï¼šæ£€æµ‹å¤±è´¥æ—¶é‡‡ç”¨ä¿å®ˆç­–ç•¥ï¼ˆåˆ›å»ºå®¹å™¨ï¼‰

#### ğŸ“ **æ—¥å¿—å®Œå–„**
- **çŠ¶æ€è·Ÿè¸ª**ï¼šæ¸…æ™°è®°å½•å®¹å™¨åˆ›å»ºçŠ¶æ€
- **è°ƒè¯•æ”¯æŒ**ï¼šæä¾›è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
- **ç”¨æˆ·åé¦ˆ**ï¼šé€šè¿‡æ—¥å¿—äº†è§£æ’ä»¶è¡Œä¸º

**è‡ªé€‚åº”æ¨¡å—æ¡ä»¶åˆ›å»ºä¼˜åŒ–å®Œæˆï¼** ğŸ‰

ç°åœ¨H5Toolså…·å¤‡äº†æ™ºèƒ½çš„æ¨¡å—æ£€æµ‹èƒ½åŠ›ï¼Œèƒ½å¤Ÿæ ¹æ®å®é™…å†…å®¹éœ€æ±‚åŠ¨æ€å†³å®šæ˜¯å¦åˆ›å»ºè‡ªé€‚åº”æ¨¡å—å®¹å™¨ï¼Œå®ç°äº†æ›´ç²¾ç®€çš„ç»“æ„å’Œæ›´å¥½çš„æ€§èƒ½ï¼ 

## 2024-12-19 - è‡ªé€‚åº”æ¨¡å—èƒŒæ™¯å¡«å……ä¼˜åŒ– ğŸ¨ğŸ“¦

### èƒŒæ™¯
ç”¨æˆ·è¦æ±‚å°†è‡ªé€‚åº”æ¨¡å—çš„èƒŒæ™¯å¡«å……æ”¹ä¸ºå§‹ç»ˆé€æ˜å¡«å……ï¼Œä»¥ä¼˜åŒ–H5åŸå‹çš„è§†è§‰å±‚æ¬¡å’ŒèƒŒæ™¯å¤„ç†é€»è¾‘ã€‚

### é—®é¢˜åˆ†æ

#### ğŸ” **åŸæœ‰èƒŒæ™¯é€»è¾‘é—®é¢˜**
- **åŒé‡èƒŒæ™¯è®¾ç½®**ï¼šèƒŒæ™¯é¢œè‰²å¯èƒ½åŒæ—¶åº”ç”¨åˆ°å¤–æ¡†å’Œè‡ªé€‚åº”æ¨¡å—å®¹å™¨
- **é€»è¾‘å¤æ‚**ï¼šæ ¹æ®æ˜¯å¦æœ‰è‡ªé€‚åº”æ¨¡å—å®¹å™¨æ¥å†³å®šèƒŒæ™¯åº”ç”¨ä½ç½®
- **è§†è§‰å†—ä½™**ï¼šè‡ªé€‚åº”æ¨¡å—å®¹å™¨çš„èƒŒæ™¯å¯èƒ½ä¸å¤–æ¡†èƒŒæ™¯é‡å 
- **å±‚æ¬¡ä¸æ¸…**ï¼šèƒŒæ™¯å±‚æ¬¡å…³ç³»ä¸å¤Ÿæ˜ç¡®

#### ğŸ¯ **ä¼˜åŒ–ç›®æ ‡**
- **ç®€åŒ–é€»è¾‘**ï¼šè‡ªé€‚åº”æ¨¡å—å®¹å™¨å§‹ç»ˆé€æ˜ï¼ŒèƒŒæ™¯é¢œè‰²å§‹ç»ˆåº”ç”¨åˆ°å¤–
 
 # # #     (u7bï¿½[bï¿½Õ‹ï¿½Ockï¿½Í‘ï¿½ï¿½ï¿½Sï¿½s	ï¿½
 
 