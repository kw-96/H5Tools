import{__awaiter as t}from"../../node_modules/tslib/tslib.es6.js";class e{static delay(e){return t(this,void 0,void 0,function*(){return new Promise(t=>setTimeout(t,e))})}static extractUint8Array(t){return t?t instanceof Uint8Array?t:"object"==typeof t&&"data"in t?t.data:null:null}static hexToRgb(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16)/255,g:parseInt(e[2],16)/255,b:parseInt(e[3],16)/255}:{r:0,g:0,b:0}}static calculateSliceStrategy(t,e,i){const o=t*e,s=i*i;if(o<=s)return{needsSlicing:!1,slices:[]};const c=Math.ceil(Math.sqrt(o/s)),r=Math.ceil(t/c),l=Math.ceil(e/c),a=[];for(let i=0;i<c;i++)for(let o=0;o<c;o++){const s=o*r,c=i*l,n=Math.min(r,t-s),g=Math.min(l,e-c);n>0&&g>0&&a.push({x:s,y:c,width:n,height:g,row:i,col:o})}return{needsSlicing:!0,slices:a,totalWidth:t,totalHeight:e,sliceWidth:r,sliceHeight:l,rows:c,cols:c}}static getPrizePosition(t){return[{row:0,col:0},{row:0,col:1},{row:0,col:2},{row:1,col:2},{row:2,col:2},{row:2,col:1},{row:2,col:0},{row:1,col:0}][t]||{row:0,col:0}}static safeNumber(t,e=0){const i=Number(t);return isNaN(i)?e:i}static safeString(t,e=""){return null!=t?String(t):e}static generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}static deepClone(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array)return t.map(t=>e.deepClone(t));if("object"==typeof t){const i={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(i[o]=e.deepClone(t[o]));return i}return t}}class i{static isValidImageType(t){return-1!==["image/png","image/jpeg","image/jpg","image/gif","image/webp"].indexOf(t.toLowerCase())}static getImageExtension(t){return{"image/png":"png","image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/webp":"webp"}[t.toLowerCase()]||"png"}static calculateScale(t,e,i,o,s="fit"){const c=i/t,r=o/e;let l;return l="fit"===s?Math.min(c,r):Math.max(c,r),{scale:l,width:t*l,height:e*l}}static isOversized(t,e,i=4096){return t>i||e>i}static calculateSliceStrategy(t,e,i=4096){const o={direction:"none",sliceWidth:t,sliceHeight:e,slicesCount:1,description:"",cols:1,rows:1,totalSlices:1},s=t>i,c=e>i;return s||c?(s&&!c?(o.direction="vertical",o.sliceWidth=Math.floor(.9*i),o.sliceHeight=e,o.cols=Math.ceil(t/o.sliceWidth),o.rows=1,o.slicesCount=o.cols,o.totalSlices=o.cols,o.description=`宽度超限，垂直切割为${o.slicesCount}片，每片${o.sliceWidth}×${e}`):!s&&c?(o.direction="horizontal",o.sliceWidth=t,o.sliceHeight=Math.floor(.9*i),o.cols=1,o.rows=Math.ceil(e/o.sliceHeight),o.slicesCount=o.rows,o.totalSlices=o.rows,o.description=`高度超限，水平切割为${o.slicesCount}片，每片${t}×${o.sliceHeight}`):(o.direction="both",o.sliceWidth=Math.floor(.9*i),o.sliceHeight=Math.floor(.9*i),o.cols=Math.ceil(t/o.sliceWidth),o.rows=Math.ceil(e/o.sliceHeight),o.slicesCount=o.cols*o.rows,o.totalSlices=o.cols*o.rows,o.description=`宽高都超限，网格切割为${o.cols}×${o.rows}=${o.slicesCount}片`),o):(o.description="图片尺寸正常，无需切割",o)}}export{i as ImageUtils,e as Utils};
//# sourceMappingURL=index.js.map
