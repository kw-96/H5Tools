{"version":3,"file":"h5-prototype-builder.js","sources":["../../../../../src/core/builders/h5-prototype-builder.ts"],"sourcesContent":[null],"names":["H5PrototypeBuilder","constructor","config","this","build","console","log","FontManager","loadAll","createBaseFrames","setupBackground","addModules","finalizeLayout","outerFrame","error","hasAnyModuleContent","hasHeaderContent","headerImage","titleUpload","hasGameInfoContent","gameName","gameDesc","gameIcon","hasCustomModules","modules","length","hasRulesTitle","rulesTitle","trim","hasRulesBgImage","rulesBgImage","undefined","hasRulesContent","rulesContent","hasRulesContent_any","hasFooterContent","footerLogo","footerBg","NodeUtils","createFrame","CONSTANTS","H5_WIDTH","layoutMode","clipsContent","fills","h5Frame","setupAutoLayout","layoutWrap","pageBgColor","pageBgImage","isDefaultWhite","toLowerCase","rgbColor","ColorUtils","hexToRgb","colorFill","createSolidFill","Utils","extractUint8Array","bgImageNode","ImageNodeBuilder","insertImage","x","width","y","constraints","horizontal","vertical","safeAppendChild","createAllModules","safeBatchAppendChildren","Promise","all","createHeaderModuleIfNeeded","createGameInfoModuleIfNeeded","createCustomModules","createRulesModuleIfNeeded","createFooterModuleIfNeeded","module","createHeaderModule","createGameInfoModule","_a","map","__awaiter","createCustomModule","createRulesModule","createFooterModule","resize","height","parent","childrenCount","children","insertChild","reorderError","finalHeight","findOne","node","name","Math","max","figma","currentPage","viewport","scrollAndZoomIntoView","createH5Prototype"],"mappings":"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"}