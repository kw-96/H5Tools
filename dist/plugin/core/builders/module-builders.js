import{__awaiter as t}from"../../node_modules/tslib/tslib.es6.js";import{CONSTANTS as e,ModuleType as i}from"../types/index.js";import{NodeUtils as o,ImageNodeBuilder as n,ColorUtils as r,createTitleContainer as s}from"./figma-utils.js";function l(e,i){return t(this,void 0,void 0,function*(){if(!e&&i)return null;if(!e&&!i)return null;const s=o.createFrame("å¤´å›¾",1080,1080);s.clipsContent=!0,s.fills=[],s.layoutMode="NONE";let l=0,c=null,a=null;if(e)try{const t=yield n.insertImage(e,"å¤´å›¾å›¾ç‰‡");c=t&&"strokeCap"in t?t:null,c&&(o.safeAppendChild(s,c,"å¤´å›¾å›¾ç‰‡æ·»åŠ åˆ°ç”»æ¿"),c.constraints={horizontal:"CENTER",vertical:"MIN"},c.x=(s.width-c.width)/2,c.y=l,l=c.height)}catch(t){console.error("å¤´å›¾åˆ›å»ºå¤±è´¥:",t)}if(function(t,e,i){e&&!i?t.resize(1080,e.height):e&&i&&(t.resize(1080,e.height),i.y=e.height-i.height,i.constraints={horizontal:"CENTER",vertical:"MAX"})}(s,c,a),c)try{yield function(e,i){return t(this,void 0,void 0,function*(){try{if(!e||!e.parent)return void console.warn("å¤´å›¾èŠ‚ç‚¹ä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤ï¼Œè·³è¿‡ç¾½åŒ–è’™ç‰ˆå¤„ç†");const t=e.x,n=e.y,s=e.constraints,l=e.width,c=e.height,a=e.clone();a.name="å¤´å›¾å›¾ç‰‡";const d=.1*l,h=c-d,u=l+2*d+25,g=figma.createRectangle();let f,y;g.name="è’™ç‰ˆ",g.fills=[r.createSolidFill({r:1,g:1,b:1})],g.resize(u,h),o.safeAppendChild(i,g,"ç¾½åŒ–è’™ç‰ˆçŸ©å½¢æ·»åŠ åˆ°frame"),yield new Promise(t=>setTimeout(t,0));try{f=figma.group([g],i),f.name="ç¾½åŒ–è’™ç‰ˆ"}catch(t){return void console.error("åˆ›å»ºç¾½åŒ–è’™ç‰ˆç»„å¤±è´¥:",t)}try{const t={type:"LAYER_BLUR",radius:d,visible:!0};void 0!==f.effects&&(f.effects=[t])}catch(t){console.warn("è®¾ç½®æ¨¡ç³Šæ•ˆæœå¤±è´¥:",t)}try{"isMask"in f&&(f.isMask=!0)}catch(t){console.warn("è®¾ç½®å‰ªåˆ‡è’™ç‰ˆå¤±è´¥:",t)}try{y=figma.group([f,e],i),y.name="å¤´å›¾"}catch(t){return void console.error("åˆ›å»ºå¤´å›¾ç»„å¤±è´¥:",t)}const m=(l-u)/2;g.x=t+m,g.y=0,e.x=t,e.y=n,e.constraints=s;try{e&&e.parent&&e.remove()}catch(t){console.warn("åˆ é™¤åŸå¤´å›¾èŠ‚ç‚¹å¤±è´¥:",t)}try{o.safeAppendChild(y,a,"å¤åˆ¶çš„å¤´å›¾å›¾ç‰‡èŠ‚ç‚¹æ·»åŠ åˆ°å¤´å›¾ç»„"),a.x=t,a.y=n,a.constraints=s}catch(t){console.error("å°†å¤åˆ¶çš„å¤´å›¾å›¾ç‰‡èŠ‚ç‚¹æ·»åŠ åˆ°å¤´å›¾ç»„å¤±è´¥:",t)}}catch(t){console.error("ä¸ºå¤´å›¾å›¾ç‰‡æ·»åŠ ç¾½åŒ–è’™ç‰ˆå¤±è´¥:",t)}})}(c,s)}catch(t){console.error("å¤´å›¾å›¾ç‰‡æ·»åŠ ç¾½åŒ–è’™ç‰ˆå¤±è´¥:",t)}if(i)try{const t=yield n.insertImage(i,"æ ‡é¢˜å›¾ç‰‡");a=t&&"strokeCap"in t?t:null,a&&(o.safeAppendChild(s,a,"æ ‡é¢˜å›¾ç‰‡æ·»åŠ åˆ°ç”»æ¿"),a.constraints={horizontal:"CENTER",vertical:"MAX"},a.x=(s.width-a.width)/2,a.y=s.height-a.height)}catch(t){console.error("æ ‡é¢˜å›¾ç‰‡åˆ›å»ºå¤±è´¥:",t)}return s})}function c(i){return t(this,void 0,void 0,function*(){let t=210;"doubleButton"===i.buttonVersion&&(t=250);const n=o.createFrame("æ¸¸æˆä¿¡æ¯",e.H5_WIDTH,t);n.fills=[];const r=new a(n,i);return yield r.build(),n})}class a{constructor(t,e){this.frame=t,this.config=e}build(){return t(this,void 0,void 0,function*(){"imageButton"===this.config.buttonVersion&&(yield this.addGameIcon(),yield this.addGameInfo()),yield this.addButtons()})}addGameIcon(){return t(this,void 0,void 0,function*(){if(!this.config.gameIcon)return;const t=yield n.insertImage(this.config.gameIcon,"æ¸¸æˆå›¾æ ‡",190,190);t&&(t.resize(190,190),"cornerRadius"in t&&(t.cornerRadius=40),"strokes"in t&&(t.strokes=[{type:"SOLID",color:{r:1,g:1,b:1},opacity:.2}]),"strokeWeight"in t&&(t.strokeWeight=1),t.x=70,t.y=(this.frame.height-190)/2,o.safeAppendChild(this.frame,t,"æ¸¸æˆå›¾æ ‡æ·»åŠ "))})}addGameInfo(){return t(this,void 0,void 0,function*(){const t=this.config.gameTextColor?r.hexToRgb(this.config.gameTextColor):{r:1,g:1,b:1};if(this.config.gameName){const e=yield o.createText(this.config.gameName,48,"Medium");e.x=285,e.y=49,e.textAlignHorizontal="LEFT",e.fills=[r.createSolidFill(t)],o.safeAppendChild(this.frame,e,"æ¸¸æˆåç§°æ–‡æœ¬æ·»åŠ ")}if(this.config.gameDesc){const e=yield o.createText(this.config.gameDesc,32,"Regular");e.x=285,e.y=122,e.resize(300,e.height),e.textAutoResize="HEIGHT",e.textAlignHorizontal="LEFT",e.fills=[r.createSolidFill(t)],o.safeAppendChild(this.frame,e,"æ¸¸æˆæè¿°æ–‡æœ¬æ·»åŠ ")}})}addButtons(){return t(this,void 0,void 0,function*(){switch(this.config.buttonVersion){case"imageButton":yield this.addIconButton();break;case"singleButton":yield this.addSingleButton();break;case"doubleButton":yield this.addDoubleButtons()}})}addIconButton(){return t(this,void 0,void 0,function*(){if(!this.config.iconButtonBg)return;const t=o.createFrame("ä¸‹è½½æŒ‰é’®",344,103);if(t.x=666,t.y=(this.frame.height-103)/2,t.fills=[],this.config.iconButtonBg)try{const e=yield n.insertImage(this.config.iconButtonBg,"æŒ‰é’®åº•å›¾",344,103);e?(e.x=0,e.y=0,o.safeAppendChild(t,e,"å›¾æ ‡æŒ‰é’®åº•å›¾æ·»åŠ ")):(t.fills=[r.createSolidFill({r:0,g:.44,b:.89})],t.cornerRadius=30)}catch(e){console.error("æŒ‰é’®åº•å›¾åˆ›å»ºå¤±è´¥:",e),t.fills=[r.createSolidFill({r:0,g:.44,b:.89})],t.cornerRadius=30}else t.fills=[r.createSolidFill({r:0,g:.44,b:.89})],t.cornerRadius=30;const e=this.config.iconButtonText||"ç«‹å³ä¸‹è½½";{const i=this.config.iconButtonTextColor?r.hexToRgb(this.config.iconButtonTextColor):{r:1,g:1,b:1};try{const n=yield o.createText(e,36,"Bold");n.fills=[r.createSolidFill(i)],n.resize(t.width,n.height),n.textAlignHorizontal="CENTER",n.y=(t.height-n.height)/2,o.safeAppendChild(t,n,"å›¾æ ‡æŒ‰é’®æ–‡æœ¬æ·»åŠ ")}catch(t){console.error("åˆ›å»ºæŒ‰é’®æ–‡æœ¬å¤±è´¥:",t)}}o.safeAppendChild(this.frame,t,"å›¾æ ‡æŒ‰é’®æ¡†æ¶æ·»åŠ ")})}addSingleButton(){return t(this,void 0,void 0,function*(){if(!this.config.singleButtonBg)return;const t=o.createFrame("å•æŒ‰é’®",600,80);t.x=(e.H5_WIDTH-600)/2,t.y=(this.frame.height-80)/2,t.cornerRadius=40;try{yield n.setImageFill(t,this.config.singleButtonBg)}catch(t){return void console.error("å•æŒ‰é’®åº•å›¾è®¾ç½®å¤±è´¥:",t)}const i=this.config.singleButtonText||"ç«‹å³ä¸‹è½½";{const e=this.config.singleButtonTextColor?r.hexToRgb(this.config.singleButtonTextColor):{r:1,g:1,b:1};try{const n=yield o.createText(i,32,"Bold");n.fills=[r.createSolidFill(e)],n.resize(t.width,n.height),n.textAlignHorizontal="CENTER",n.y=(t.height-n.height)/2,o.safeAppendChild(t,n,"å•æŒ‰é’®æ–‡æœ¬æ·»åŠ ")}catch(t){console.error("åˆ›å»ºå•æŒ‰é’®æ–‡æœ¬å¤±è´¥:",t)}}o.safeAppendChild(this.frame,t,"å•æŒ‰é’®æ¡†æ¶æ·»åŠ ")})}addDoubleButtons(){return t(this,void 0,void 0,function*(){const t=this.config.leftButtonBg,i=this.config.rightButtonBg;if(!t&&!i)return;const n=this.config.buttonSpacing||10,r=(800-n)/2,s=(e.H5_WIDTH-800)/2,l=(this.frame.height-80)/2;if(t)try{const t=yield this.createButton("å·¦ä¾§æŒ‰é’®",this.config.leftButtonText||"å·¦ä¾§æŒ‰é’®",this.config.leftButtonTextColor,this.config.leftButtonBg,r,80);t&&(t.x=s,t.y=l,o.safeAppendChild(this.frame,t,"å·¦ä¾§æŒ‰é’®æ·»åŠ "))}catch(t){console.error("åˆ›å»ºå·¦ä¾§æŒ‰é’®å¤±è´¥:",t)}if(i)try{const t=yield this.createButton("å³ä¾§æŒ‰é’®",this.config.rightButtonText||"å³ä¾§æŒ‰é’®",this.config.rightButtonTextColor,this.config.rightButtonBg,r,80);t&&(t.x=s+r+n,t.y=l,o.safeAppendChild(this.frame,t,"å³ä¾§æŒ‰é’®æ·»åŠ "))}catch(t){console.error("åˆ›å»ºå³ä¾§æŒ‰é’®å¤±è´¥:",t)}})}createButton(e,i,s,l,c,a){return t(this,void 0,void 0,function*(){if(!l)return null;const t=o.createFrame(e,c,a);t.cornerRadius=a/2;try{yield n.setImageFill(t,l)}catch(t){return console.error(`${e}åº•å›¾è®¾ç½®å¤±è´¥:`,t),null}if(i)try{const n=s?r.hexToRgb(s):{r:1,g:1,b:1},l=yield o.createText(i,24,"Bold");l.fills=[r.createSolidFill(n)],l.resize(c,l.height),l.textAlignHorizontal="CENTER",l.y=(a-l.height)/2,o.safeAppendChild(t,l,`${e}æŒ‰é’®æ–‡æœ¬æ·»åŠ `)}catch(t){console.error(`åˆ›å»º${e}æ–‡æœ¬å¤±è´¥:`,t)}return t})}}function d(e){return t(this,void 0,void 0,function*(){return(new h).createModule(e)})}class h{createModule(e){return t(this,void 0,void 0,function*(){try{let t;const o=(e.type,e.type);switch(console.log("ğŸ­ [æ¨¡å—å·¥å‚] å¼€å§‹åˆ›å»ºæ¨¡å—:",{"æ¨¡å—ID":e.id,"æ¨¡å—ç±»å‹":o,"æ¨¡å—æ ‡é¢˜":e.title,"å†…å®¹é”®":Object.keys(e.content||{})}),o){case"activityContent":case i.ACTIVITY_CONTENT:t=yield this.createActivityContentModule(e.content);break;case"signIn":case i.SIGN_IN:t=yield this.createSignInModule(e.content);break;case"collectCards":case i.COLLECT_CARDS:t=yield this.createCollectCardsModule(e.content);break;case"nineGrid":case i.NINE_GRID:t=yield this.createNineGridModule(e.content);break;case"carousel":case i.CAROUSEL:t=yield this.createCarouselModule(e.content);break;default:return console.warn(`æœªçŸ¥çš„æ¨¡å—ç±»å‹: ${o}`),this.createErrorModule(e,`æœªçŸ¥çš„æ¨¡å—ç±»å‹: ${o}`)}return t.name=e.title||`${o}æ¨¡å—`,console.log("âœ… [æ¨¡å—å·¥å‚] æ¨¡å—åˆ›å»ºæˆåŠŸ:",{"æ¨¡å—åç§°":t.name,"æ¨¡å—å¤§å°":`${t.width}x${t.height}`}),t}catch(t){return console.error(`âŒ [æ¨¡å—å·¥å‚] åˆ›å»ºæ¨¡å—å¤±è´¥: ${e.type}`,t),this.createErrorModule(e,t)}})}createActivityContentModule(i){return t(this,void 0,void 0,function*(){console.log("ğŸ­ [æ´»åŠ¨å†…å®¹æ¨¡å—] å¼€å§‹åˆ›å»º:",{"ä¸»æ ‡é¢˜":i.mainTitle,"å‰¯æ ‡é¢˜":i.subTitle,"æ­£æ–‡å†…å®¹":i.text,"ä¸»æ ‡é¢˜èƒŒæ™¯":!!i.mainTitleBg,"å‰¯æ ‡é¢˜èƒŒæ™¯":!!i.subTitleBg,"æ’å›¾":!!i.image});const t=o.createFrame("æ´»åŠ¨å†…å®¹æ¨¡å—",e.H5_WIDTH,1e3);t.fills=[];try{const e=new C(t,i);return yield e.build(),console.log("âœ… [æ´»åŠ¨å†…å®¹æ¨¡å—] åˆ›å»ºå®Œæˆï¼Œæœ€ç»ˆé«˜åº¦ï¼š",t.height),t}catch(e){console.error("âŒ [æ´»åŠ¨å†…å®¹æ¨¡å—] åˆ›å»ºå¤±è´¥ï¼š",e);const i=yield o.createText(`æ´»åŠ¨å†…å®¹æ¨¡å—åˆ›å»ºå¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`,16);return i.x=20,i.y=20,i.fills=[r.createSolidFill({r:1,g:0,b:0})],o.safeAppendChild(t,i,"æ´»åŠ¨å†…å®¹æ¨¡å—é”™è¯¯æ–‡æœ¬æ·»åŠ "),t.resize(1080,100),t}})}createSignInModule(i){return t(this,void 0,void 0,function*(){const t=o.createFrame("ç­¾åˆ°æ¨¡å—",e.H5_WIDTH,460),n=new T(t,i);return yield n.build(),t})}createCollectCardsModule(i){return t(this,void 0,void 0,function*(){const t=o.createFrame("é›†å¡æ¨¡å—",e.H5_WIDTH,300),n=new p(t,i);return yield n.build(),t})}createNineGridModule(e){return t(this,void 0,void 0,function*(){return new m(e).build()})}createCarouselModule(i){return t(this,void 0,void 0,function*(){const t=o.createFrame("è½®æ’­æ¨¡å—",e.H5_WIDTH,800),n=new I(t,i);return yield n.build(),t})}createErrorModule(i,n){return t(this,void 0,void 0,function*(){const t=o.createFrame(`é”™è¯¯æ¨¡å—-${i.type}`,e.H5_WIDTH,100);t.fills=[r.createSolidFill({r:1,g:.9,b:.9})];const s=yield o.createText(`æ¨¡å—åˆ›å»ºå¤±è´¥: ${i.type}\n${n}`,14,"Regular");return s.x=20,s.y=20,o.safeAppendChild(t,s,"é”™è¯¯ä¿¡æ¯æ·»åŠ "),t})}}function u(e){return t(this,void 0,void 0,function*(){console.log("å¼€å§‹åˆ›å»ºæ´»åŠ¨è§„åˆ™æ¨¡å—ï¼Œå†…å®¹ï¼š",{rulesTitle:e.rulesTitle,rulesBgImage:!!e.rulesBgImage,rulesContent:e.rulesContent});const t=o.createFrame("æ´»åŠ¨è§„åˆ™",1080,1e3);t.fills=[];try{const i={rulesTitle:e.rulesTitle||"",rulesBgImage:e.rulesBgImage,rulesContent:e.rulesContent||""},o=new g(t,i);return yield o.build(),console.log("æ´»åŠ¨è§„åˆ™æ¨¡å—åˆ›å»ºå®Œæˆï¼Œæœ€ç»ˆé«˜åº¦ï¼š",t.height),t}catch(e){console.error("æ´»åŠ¨è§„åˆ™æ¨¡å—åˆ›å»ºå¤±è´¥ï¼š",e);const i=yield o.createText(`æ´»åŠ¨è§„åˆ™æ¨¡å—åˆ›å»ºå¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`,16);return i.x=20,i.y=20,i.fills=[r.createSolidFill({r:1,g:0,b:0})],o.safeAppendChild(t,i,"æ´»åŠ¨è§„åˆ™æ¨¡å—é”™è¯¯æ–‡æœ¬æ·»åŠ "),t.resize(1080,100),t}})}class g{constructor(t,e){this.currentY=0,this.frame=t,this.content=e}build(){return t(this,void 0,void 0,function*(){console.log("å¼€å§‹æ„å»ºæ´»åŠ¨è§„åˆ™æ¨¡å—");try{const t=this.content.rulesTitle&&""!==this.content.rulesTitle.trim(),e=null!==this.content.rulesBgImage&&void 0!==this.content.rulesBgImage,i=this.content.rulesContent&&""!==this.content.rulesContent.trim();if(!t&&!e&&!i)return console.log("æ´»åŠ¨è§„åˆ™æ¨¡å—ï¼šæ²¡æœ‰ä»»ä½•å†…å®¹éœ€è¦æ„å»ºï¼Œè·³è¿‡"),void this.frame.resize(1080,0);(t||e)&&(console.log("æ·»åŠ æ´»åŠ¨è§„åˆ™æ ‡é¢˜..."),yield this.addTitle()),i&&(console.log("æ·»åŠ æ´»åŠ¨è§„åˆ™å†…å®¹..."),yield this.addRulesContent()),console.log("è°ƒæ•´æ¨¡å—é«˜åº¦..."),this.adjustFrameHeight(),console.log("æ´»åŠ¨è§„åˆ™æ¨¡å—æ„å»ºå®Œæˆ")}catch(t){throw console.error("æ´»åŠ¨è§„åˆ™æ¨¡å—æ„å»ºè¿‡ç¨‹ä¸­å‡ºé”™ï¼š",t),t}})}addTitle(){return t(this,void 0,void 0,function*(){const t=this.content.rulesTitle&&""!==this.content.rulesTitle.trim(),e=null!==this.content.rulesBgImage&&void 0!==this.content.rulesBgImage;if(!t&&!e)return;this.currentY+=90;const i=t?this.content.rulesTitle:"",n=yield s(i,this.content.rulesBgImage,1080,120,48,"Bold");n.x=0,n.y=this.currentY,o.safeAppendChild(this.frame,n,"æ´»åŠ¨è§„åˆ™æ ‡é¢˜å®¹å™¨æ·»åŠ "),this.currentY+=120})}addRulesContent(){return t(this,void 0,void 0,function*(){if(!this.content.rulesContent)return;console.log("æ·»åŠ è§„åˆ™å†…å®¹..."),this.currentY+=90;const t=yield o.createText(this.content.rulesContent,28,"Regular");t.fills=[r.createSolidFill({r:0,g:0,b:0})],t.lineHeight={unit:"AUTO"},t.resize(950,t.height),t.textAlignHorizontal="LEFT",t.x=65,t.y=this.currentY,o.safeAppendChild(this.frame,t,"æ´»åŠ¨è§„åˆ™å†…å®¹æ–‡æœ¬æ·»åŠ "),this.currentY+=t.height})}adjustFrameHeight(){this.currentY+=90,this.frame.resize(1080,this.currentY)}}function f(i){return t(this,void 0,void 0,function*(){if(!i.footerLogo&&!i.footerBg)return console.log("è·³è¿‡å°¾ç‰ˆæ¨¡å—åˆ›å»ºï¼šæ²¡æœ‰LOGOå›¾ç‰‡å’Œå°¾ç‰ˆèƒŒæ™¯å›¾ç‰‡"),null;const t=o.createFrame("å°¾ç‰ˆ",e.H5_WIDTH,480),n=new y(t,i);return yield n.build(),t})}class y{constructor(t,e){this.frame=t,this.config=e}build(){return t(this,void 0,void 0,function*(){yield this.setupBackground(),yield this.addContent()})}setupBackground(){return t(this,void 0,void 0,function*(){this.config.footerBg?yield n.setImageFill(this.frame,this.config.footerBg):this.frame.fills=[]})}addContent(){return t(this,void 0,void 0,function*(){this.config.footerLogo&&(yield this.addLogo())})}addLogo(){return t(this,void 0,void 0,function*(){if(this.config.footerLogo){console.log("å¼€å§‹åˆ›å»ºLogoï¼Œä½¿ç”¨ImageNodeBuilder");try{const t=yield n.insertImage(this.config.footerLogo,"LOGO");if(!t)return void console.log("Logoå›¾ç‰‡èŠ‚ç‚¹åˆ›å»ºå¤±è´¥");const i=t.width,r=t.height,s=i/r;let l,c;console.log(`LogoåŸå§‹å°ºå¯¸: ${i}x${r}, å®½é«˜æ¯”: ${s.toFixed(2)}`),l=340,c=l/s,c>250&&(c=250,l=c*s),t.resize(l,c),t.x=(e.H5_WIDTH-l)/2,t.y=(this.frame.height-c)/2,"constraints"in t&&(t.constraints={horizontal:"SCALE",vertical:"SCALE"}),o.safeAppendChild(this.frame,t,"å°¾ç‰ˆLogoå›¾ç‰‡æ·»åŠ "),console.log(`Logoåˆ›å»ºæˆåŠŸ: æœ€ç»ˆå°ºå¯¸=${l.toFixed(1)}x${c.toFixed(1)}, ä½ç½®=(${t.x.toFixed(1)}, ${t.y.toFixed(1)})`)}catch(t){console.error("Logoåˆ›å»ºå¤±è´¥:",t)}}else console.log("è·³è¿‡Logoåˆ›å»ºï¼šæ²¡æœ‰ä¸Šä¼ Logoå›¾ç‰‡")})}}class m{constructor(t){this.CELL_SIZE=270,this.CELL_SPACING=24,this.currentY=0,this.content=t,this.frame=o.createFrame("ä¹å®«æ ¼æŠ½å¥–",e.H5_WIDTH,1e3),this.frame.fills=[]}build(){return t(this,void 0,void 0,function*(){try{return yield this.addTitle(),yield this.addNineGrid(),this.adjustFrameHeight(),this.frame}catch(t){throw console.error("ä¹å®«æ ¼æ¨¡å—æ„å»ºè¿‡ç¨‹ä¸­å‡ºé”™ï¼š",t),t}})}addTitle(){return t(this,void 0,void 0,function*(){if(!this.content.mainTitle)return;const t=o.createFrame("ä¹å®«æ ¼æ ‡é¢˜",e.H5_WIDTH,120);if(t.x=0,t.y=this.currentY+90,t.fills=[],this.content.titleBgImage)try{const i=yield n.insertImage(this.content.titleBgImage,"æ ‡é¢˜èƒŒæ™¯å›¾ç‰‡",e.H5_WIDTH,120);i&&(i.x=0,i.y=0,o.safeAppendChild(t,i,"æ ‡é¢˜èƒŒæ™¯å›¾ç‰‡æ·»åŠ "))}catch(t){console.error("æ ‡é¢˜èƒŒæ™¯å›¾ç‰‡åˆ›å»ºå¤±è´¥:",t)}const i=yield o.createText(this.content.mainTitle,48,"Bold");i.fills=[r.createSolidFill({r:1,g:1,b:1})],i.resize(e.H5_WIDTH,i.height),i.textAlignHorizontal="CENTER",i.x=0,i.y=(120-i.height)/2,o.safeAppendChild(t,i,"æ ‡é¢˜æ–‡æœ¬æ·»åŠ "),o.safeAppendChild(this.frame,t,"æ ‡é¢˜å®¹å™¨æ·»åŠ "),this.currentY+=120})}addNineGrid(){return t(this,void 0,void 0,function*(){const t=3*this.CELL_SIZE+4*this.CELL_SPACING+180,i=o.createFrame("ä¹å®«æ ¼ä¸»ä½“",e.H5_WIDTH,t);if(i.x=0,i.y=this.currentY+90,i.fills=[],this.content.gridBgImage)try{const r=yield n.insertImage(this.content.gridBgImage,"ä¹å®«æ ¼èƒŒæ™¯",930,930);r&&(r.x=(e.H5_WIDTH-930)/2,r.y=(t-930)/2,o.safeAppendChild(i,r,"ä¹å®«æ ¼èƒŒæ™¯å›¾ç‰‡æ·»åŠ "))}catch(t){console.error("ä¹å®«æ ¼èƒŒæ™¯å›¾ç‰‡åˆ›å»ºå¤±è´¥:",t)}for(let t=0;t<3;t++)for(let e=0;e<3;e++){const n=3*t+e,r=yield this.createGridCell(t,e,n);o.safeAppendChild(i,r,`ä¹å®«æ ¼å•å…ƒæ ¼${n+1}æ·»åŠ `)}o.safeAppendChild(this.frame,i,"ä¹å®«æ ¼å®¹å™¨æ·»åŠ "),this.currentY+=t})}createGridCell(i,o,n){return t(this,void 0,void 0,function*(){const t=3*this.CELL_SIZE+2*this.CELL_SPACING,r=(e.H5_WIDTH-t)/2+o*(this.CELL_SIZE+this.CELL_SPACING),s=90+this.CELL_SPACING+i*(this.CELL_SIZE+this.CELL_SPACING);return 4===n?this.createDrawButton(r,s):this.createPrizeCell(r,s,n)})}createDrawButton(e,i){return t(this,void 0,void 0,function*(){const t=o.createFrame("æŠ½å¥–æŒ‰é’®å®¹å™¨",this.CELL_SIZE,this.CELL_SIZE);t.x=e,t.y=i,t.fills=[];try{if(this.content.drawButtonImage)try{const e=yield n.insertImage(this.content.drawButtonImage,"æŠ½å¥–æŒ‰é’®å›¾ç‰‡",this.CELL_SIZE,this.CELL_SIZE);e?(e.x=0,e.y=0,o.safeAppendChild(t,e,"æŠ½å¥–æŒ‰é’®å›¾ç‰‡æ·»åŠ ")):(console.warn("æŠ½å¥–æŒ‰é’®å›¾ç‰‡æ’å…¥å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ ·å¼"),yield this.addDefaultButtonStyle(t))}catch(e){console.error("æŠ½å¥–æŒ‰é’®å›¾ç‰‡åˆ›å»ºå¤±è´¥ï¼š",e),yield this.addDefaultButtonStyle(t)}else yield this.addDefaultButtonStyle(t)}catch(e){console.error("åˆ›å»ºæŠ½å¥–æŒ‰é’®å¤±è´¥ï¼š",e),yield this.addDefaultButtonStyle(t)}return t})}addDefaultButtonStyle(e){return t(this,void 0,void 0,function*(){e.fills=[r.createSolidFill({r:1,g:.3,b:.3})],e.cornerRadius=10;const t=yield o.createText("æŠ½å¥–",24,"Bold");t.fills=[r.createSolidFill({r:1,g:1,b:1})],t.resize(this.CELL_SIZE,t.height),t.textAlignHorizontal="CENTER",t.y=(this.CELL_SIZE-t.height)/2,o.safeAppendChild(e,t,"æŠ½å¥–æŒ‰é’®é»˜è®¤æ–‡æœ¬æ·»åŠ ")})}createPrizeCell(e,i,s){return t(this,void 0,void 0,function*(){var t;const l=this.getPrizeIndex(Math.floor(s/3),s%3),c=null===(t=this.content.prizes)||void 0===t?void 0:t[l],a=(l+1).toString(),d=a.length<2?"0"+a:a,h=(null==c?void 0:c.name)||`å¥–å“${d}`,u=o.createFrame(h,this.CELL_SIZE,this.CELL_SIZE);u.x=e,u.y=i,u.fills=[];try{if(this.content.prizeBgImage)try{const t=yield n.insertImage(this.content.prizeBgImage,"å¥–å“èƒŒæ™¯å›¾ç‰‡",this.CELL_SIZE,this.CELL_SIZE);t&&(t.x=0,t.y=0,o.safeAppendChild(u,t,"å¥–å“èƒŒæ™¯å›¾ç‰‡æ·»åŠ "))}catch(t){console.error("å¥–å“èƒŒæ™¯å›¾ç‰‡åˆ›å»ºå¤±è´¥:",t)}if(null==c?void 0:c.image)try{const t=yield n.insertImage(c.image,"å¥–å“å›¾ç‰‡",180,180);t&&(t.x=45,t.y=11,o.safeAppendChild(u,t,"å¥–å“å›¾ç‰‡æ·»åŠ "))}catch(t){console.error("å¥–å“å›¾ç‰‡åˆ›å»ºå¤±è´¥:",t);const e=o.createFrame("å ä½ç¬¦",180,180);e.x=45,e.y=11,e.fills=[r.createSolidFill({r:.9,g:.9,b:.9})],e.cornerRadius=10,o.safeAppendChild(u,e,"å¥–å“å ä½ç¬¦æ·»åŠ ")}else{const t=o.createFrame("å ä½ç¬¦",180,180);t.x=45,t.y=11,t.fills=[r.createSolidFill({r:.9,g:.9,b:.9})],t.cornerRadius=10,o.safeAppendChild(u,t,"å¥–å“é»˜è®¤å ä½ç¬¦æ·»åŠ ")}const t=(null==c?void 0:c.name)||h;if(t){const e=yield o.createText(t,26,"Medium");e.resize(this.CELL_SIZE,e.height),e.textAlignHorizontal="CENTER",e.x=0,e.y=190,e.fills=[r.createSolidFill({r:0,g:0,b:0})],o.safeAppendChild(u,e,"å¥–å“åç§°æ–‡æœ¬æ·»åŠ ")}}catch(t){console.error(`åˆ›å»ºå¥–å“æ ¼å­å¤±è´¥ ${l}:`,t)}return u})}getPrizeIndex(t,e){const i=3*t+e;return i<4?i:i-1}adjustFrameHeight(){this.frame.resize(e.H5_WIDTH,this.currentY+90)}}class I{constructor(t,e){this.TITLE_HEIGHT=120,this.CAROUSEL_AREA_HEIGHT=607,this.CAROUSEL_BG_WIDTH=1e3,this.CAROUSEL_BG_HEIGHT=540,this.CAROUSEL_IMAGE_WIDTH=960,this.CAROUSEL_IMAGE_HEIGHT=500,this.BUTTON_HEIGHT=20,this.frame=t,this.content=e}build(){return t(this,void 0,void 0,function*(){console.log("å¼€å§‹æ„å»ºå›¾ç‰‡è½®æ’­ï¼ˆæ¨ªç‰ˆï¼‰æ¨¡å— - æŒ‰Figmaè®¾è®¡å®ç°");try{this.setupFrameLayout(),yield this.addTitleContainer(),yield this.addCarouselPreview(),console.log("å›¾ç‰‡è½®æ’­ï¼ˆæ¨ªç‰ˆï¼‰æ¨¡å—æ„å»ºå®Œæˆ")}catch(t){throw console.error("å›¾ç‰‡è½®æ’­ï¼ˆæ¨ªç‰ˆï¼‰æ¨¡å—æ„å»ºè¿‡ç¨‹ä¸­å‡ºé”™ï¼š",t),t}})}setupFrameLayout(){o.setupAutoLayout(this.frame,"VERTICAL",30,90)}addTitleContainer(){return t(this,void 0,void 0,function*(){if(!this.content.title&&!this.content.titleBgImage)return;console.log("æ·»åŠ æ ‡é¢˜å®¹å™¨ - 1080x120px");const t=o.createFrame("æ ‡é¢˜å®¹å™¨",1080,this.TITLE_HEIGHT);if(t.fills=[],this.content.titleBgImage)try{const e=yield n.insertImage(this.content.titleBgImage,"æ ‡é¢˜èƒŒæ™¯å›¾ç‰‡",1080,120);e&&(e.x=0,e.y=0,o.safeAppendChild(t,e,"æ ‡é¢˜èƒŒæ™¯å›¾ç‰‡æ·»åŠ "))}catch(t){console.error("æ ‡é¢˜èƒŒæ™¯å›¾ç‰‡åˆ›å»ºå¤±è´¥:",t)}if(this.content.title){const e=yield o.createText(this.content.title,48,"Bold");e.fills=[r.createSolidFill({r:1,g:1,b:1})],e.resize(1080,e.height),e.textAlignHorizontal="CENTER",e.x=0,e.y=(120-e.height)/2,o.safeAppendChild(t,e,"æ ‡é¢˜æ–‡æœ¬æ·»åŠ ")}o.safeAppendChild(this.frame,t,"æ ‡é¢˜å®¹å™¨æ·»åŠ ")})}addCarouselPreview(){return t(this,void 0,void 0,function*(){console.log("æ·»åŠ è½®æ’­é¢„è§ˆåŒºåŸŸ");const t=o.createFrame("è½®æ’­å›¾é¢„è§ˆ",1080,this.CAROUSEL_AREA_HEIGHT);t.fills=[],o.setupAutoLayout(t,"VERTICAL",0,0),yield this.addCarouselArea(t),yield this.addCarouselButtons(t),o.safeAppendChild(this.frame,t,"è½®æ’­é¢„è§ˆåŒºåŸŸæ·»åŠ ")})}addCarouselArea(e){return t(this,void 0,void 0,function*(){console.log("æ·»åŠ è½®æ’­åŒºåŸŸ - 1080x607px");const t=o.createFrame("è½®æ’­åŒºåŸŸ",1080,this.CAROUSEL_AREA_HEIGHT);t.fills=[];const i=o.createFrame("è½®æ’­å›¾èƒŒæ™¯",this.CAROUSEL_BG_WIDTH,this.CAROUSEL_BG_HEIGHT);if(this.content.carouselBgImage)try{const t=yield n.insertImage(this.content.carouselBgImage,"è½®æ’­å›¾èƒŒæ™¯å›¾ç‰‡",this.CAROUSEL_BG_WIDTH,this.CAROUSEL_BG_HEIGHT);t&&(t.x=0,t.y=0,o.safeAppendChild(i,t,"è½®æ’­å›¾èƒŒæ™¯å›¾ç‰‡æ·»åŠ "))}catch(t){console.error("è½®æ’­å›¾èƒŒæ™¯å›¾ç‰‡åˆ›å»ºå¤±è´¥:",t),i.fills=[r.createSolidFill({r:1,g:1,b:1})]}else i.fills=[r.createSolidFill({r:1,g:1,b:1})];if(i.x=(1080-this.CAROUSEL_BG_WIDTH)/2,i.y=(this.CAROUSEL_AREA_HEIGHT-this.CAROUSEL_BG_HEIGHT)/2+.5,o.safeAppendChild(t,i,"è½®æ’­å›¾èƒŒæ™¯æ·»åŠ "),this.content.carouselImage)try{const e=yield n.insertImage(this.content.carouselImage,"è½®æ’­å›¾",this.CAROUSEL_IMAGE_WIDTH,this.CAROUSEL_IMAGE_HEIGHT);e&&(e.x=(1080-this.CAROUSEL_IMAGE_WIDTH)/2,e.y=(this.CAROUSEL_AREA_HEIGHT-this.CAROUSEL_IMAGE_HEIGHT)/2+.5,o.safeAppendChild(t,e,"è½®æ’­å›¾æ·»åŠ "))}catch(e){console.error("è½®æ’­å›¾åˆ›å»ºå¤±è´¥:",e);const i=figma.createRectangle();i.name="è½®æ’­å›¾",i.resize(this.CAROUSEL_IMAGE_WIDTH,this.CAROUSEL_IMAGE_HEIGHT),i.fills=[r.createSolidFill({r:1,g:.3,b:.3})],i.x=(1080-this.CAROUSEL_IMAGE_WIDTH)/2,i.y=(this.CAROUSEL_AREA_HEIGHT-this.CAROUSEL_IMAGE_HEIGHT)/2+.5,o.safeAppendChild(t,i,"è½®æ’­å›¾å ä½æ·»åŠ ")}o.safeAppendChild(e,t,"è½®æ’­åŒºåŸŸæ·»åŠ ")})}addCarouselButtons(e){return t(this,void 0,void 0,function*(){console.log("æ·»åŠ è½®æ’­æŒ‰é’®");const t=o.createFrame("è½®æ’­æŒ‰é’®",300,this.BUTTON_HEIGHT);t.fills=[],o.setupAutoLayout(t,"HORIZONTAL",24,0);const i=figma.createEllipse();i.name="æ´»è·ƒæŒ‰é’®",i.resize(60,this.BUTTON_HEIGHT),i.fills=[r.createSolidFill({r:1,g:1,b:1})],o.safeAppendChild(t,i,"æ´»è·ƒæŒ‰é’®æ·»åŠ ");for(let e=1;e<5;e++){const i=figma.createEllipse();i.name=`æŒ‰é’®${e+1}`,i.resize(this.BUTTON_HEIGHT,this.BUTTON_HEIGHT),i.fills=[],i.strokes=[r.createSolidFill({r:1,g:1,b:1})],i.strokeWeight=2,o.safeAppendChild(t,i,`æŒ‰é’®${e+1}æ·»åŠ `)}t.x=(1080-t.width)/2,o.safeAppendChild(e,t,"è½®æ’­æŒ‰é’®å®¹å™¨æ·»åŠ ")})}}class C{constructor(t,e){this.frame=t,this.content=e}build(){return t(this,void 0,void 0,function*(){console.log("å¼€å§‹æ„å»ºæ´»åŠ¨å†…å®¹æ¨¡å—ï¼ˆéé¡µé¢åº•éƒ¨è§„åˆ™æ¨¡å—ï¼‰");try{this.setupAutoLayout(),yield this.addMainTitle(),yield this.addSubTitle(),yield this.addTextContent(),yield this.addImage(),this.adjustFrameHeight(),console.log("æ´»åŠ¨å†…å®¹æ¨¡å—ï¼ˆéè§„åˆ™ï¼‰æ„å»ºå®Œæˆ")}catch(t){throw console.error("æ´»åŠ¨å†…å®¹æ¨¡å—ï¼ˆéè§„åˆ™ï¼‰æ„å»ºè¿‡ç¨‹ä¸­å‡ºé”™ï¼š",t),t}})}setupAutoLayout(){o.setupAutoLayout(this.frame,"VERTICAL",60,90)}addMainTitle(){return t(this,void 0,void 0,function*(){if(!this.content.mainTitleBg||!this.content.mainTitle)return;console.log("æ·»åŠ å¤§æ ‡é¢˜...");const t=o.createFrame("æ´»åŠ¨å†…å®¹å¤§æ ‡é¢˜å®¹å™¨",1080,120);t.fills=[];try{const e=yield n.insertImage(this.content.mainTitleBg,"å¤§æ ‡é¢˜èƒŒæ™¯å›¾ç‰‡",1080,120);e&&(e.x=0,e.y=0,o.safeAppendChild(t,e,"æ´»åŠ¨å†…å®¹æ ‡é¢˜èƒŒæ™¯å›¾ç‰‡æ·»åŠ "))}catch(t){console.error("å¤§æ ‡é¢˜èƒŒæ™¯å›¾ç‰‡åˆ›å»ºå¤±è´¥:",t)}const i=yield o.createText(this.content.mainTitle,48,"Bold");i.fills=[r.createSolidFill({r:1,g:1,b:1})],i.resize(e.H5_WIDTH,i.height),i.textAlignHorizontal="CENTER",i.x=0,i.y=(120-i.height)/2,o.safeAppendChild(t,i,"æ´»åŠ¨å†…å®¹æ ‡é¢˜æ–‡æœ¬æ·»åŠ "),o.safeAppendChild(this.frame,t,"æ´»åŠ¨å†…å®¹æ ‡é¢˜å®¹å™¨æ·»åŠ ")})}addSubTitle(){return t(this,void 0,void 0,function*(){if(!this.content.subTitleBg||!this.content.subTitle)return;console.log("æ·»åŠ å°æ ‡é¢˜...");const t=o.createFrame("æ´»åŠ¨å†…å®¹å°æ ‡é¢˜å®¹å™¨",1080,100);t.fills=[];try{const e=yield n.insertImage(this.content.subTitleBg,"å°æ ‡é¢˜èƒŒæ™¯å›¾ç‰‡",1080,100);e&&(e.x=0,e.y=0,o.safeAppendChild(t,e,"å°æ ‡é¢˜èƒŒæ™¯å›¾ç‰‡æ·»åŠ "))}catch(t){console.error("å°æ ‡é¢˜èƒŒæ™¯å›¾ç‰‡åˆ›å»ºå¤±è´¥:",t)}const i=yield o.createText(this.content.subTitle,44,"Medium");i.fills=[r.createSolidFill({r:1,g:1,b:1})],i.resize(e.H5_WIDTH,i.height),i.textAlignHorizontal="CENTER",i.x=0,i.y=(100-i.height)/2,o.safeAppendChild(t,i,"å°æ ‡é¢˜æ–‡æœ¬æ·»åŠ "),o.safeAppendChild(this.frame,t,"å°æ ‡é¢˜å®¹å™¨æ·»åŠ ")})}addTextContent(){return t(this,void 0,void 0,function*(){if(!this.content.text)return;console.log("æ·»åŠ æ­£æ–‡...");const t=yield o.createText(this.content.text,40,"Regular");t.resize(950,t.height),t.textAlignHorizontal="CENTER",t.lineHeight={unit:"AUTO"},t.fills=[r.createSolidFill({r:1,g:1,b:1})],o.safeAppendChild(this.frame,t,"æ´»åŠ¨å†…å®¹æ­£æ–‡æ·»åŠ ")})}addImage(){return t(this,void 0,void 0,function*(){if(this.content.image){console.log("æ·»åŠ æ’å›¾...");try{const t=yield n.insertImage(this.content.image,"æ´»åŠ¨å†…å®¹æ’å›¾",950,600);t&&o.safeAppendChild(this.frame,t,"æ´»åŠ¨å†…å®¹æ’å›¾æ·»åŠ ")}catch(t){console.error("æ’å›¾åˆ›å»ºå¤±è´¥:",t)}}})}adjustFrameHeight(){}}class T{constructor(t,e){this.frame=t,this.content=e}build(){return t(this,void 0,void 0,function*(){yield this.setupBackground(),yield this.addTitle(),yield this.addSignInDays(),yield this.addSignInButton()})}setupBackground(){return t(this,void 0,void 0,function*(){this.content.bgImage?yield n.setImageFill(this.frame,this.content.bgImage):this.frame.fills=[r.createSolidFill({r:.95,g:.95,b:1})]})}addTitle(){return t(this,void 0,void 0,function*(){const t=o.createFrame("ç­¾åˆ°æ ‡é¢˜",500,100);t.x=(e.H5_WIDTH-500)/2,t.y=20,this.content.titleImage?yield n.setImageFill(t,this.content.titleImage,"FIT"):yield this.addDefaultTitle(t),o.safeAppendChild(this.frame,t,"ç­¾åˆ°æ ‡é¢˜æ·»åŠ ")})}addDefaultTitle(e){return t(this,void 0,void 0,function*(){e.fills=[r.createSolidFill({r:.9,g:.5,b:.3})];const t=yield o.createText("æ¯æ—¥ç­¾åˆ°",28,"Bold");t.fills=[r.createSolidFill({r:1,g:1,b:1})],t.resize(500,t.height),t.textAlignHorizontal="CENTER",t.y=(100-t.height)/2,o.safeAppendChild(e,t,"ç­¾åˆ°é»˜è®¤æ ‡é¢˜æ–‡æœ¬æ·»åŠ ")})}addSignInDays(){return t(this,void 0,void 0,function*(){const t=o.createFrame("ç­¾åˆ°æ—¥æœŸå®¹å™¨",e.H5_WIDTH-40,240);t.x=20,t.y=140,t.fills=[r.createSolidFill({r:1,g:1,b:1},.8)],t.cornerRadius=10,o.setupAutoLayout(t,"HORIZONTAL",10,10);const i=this.content.daysCount||7;for(let e=0;e<i;e++){const i=yield this.createDayItem(e+1);o.safeAppendChild(t,i,`ç­¾åˆ°ç¬¬${e+1}å¤©æ·»åŠ `)}o.safeAppendChild(this.frame,t,"ç­¾åˆ°æ—¥æœŸå®¹å™¨æ·»åŠ ")})}createDayItem(e){return t(this,void 0,void 0,function*(){const t=o.createFrame(`ç¬¬${e}å¤©`,80,220);t.fills=[r.createSolidFill({r:.95,g:.95,b:.95})],t.cornerRadius=5,o.setupAutoLayout(t,"VERTICAL",10,10);const i=yield this.createDayIcon();o.safeAppendChild(t,i,"ç­¾åˆ°æ—¥æœŸå›¾æ ‡æ·»åŠ ");const n=yield o.createText(`ç¬¬${e}å¤©`,16,"Medium");n.resize(80,n.height),n.textAlignHorizontal="CENTER",o.safeAppendChild(t,n,"ç­¾åˆ°æ—¥æœŸæ–‡æœ¬æ·»åŠ ");const s=yield o.createText("é‡‘å¸ x 100",14);return s.fills=[r.createSolidFill({r:.5,g:.5,b:.5})],s.resize(80,s.height),s.textAlignHorizontal="CENTER",o.safeAppendChild(t,s,"ç­¾åˆ°å¥–åŠ±æè¿°æ·»åŠ "),t})}createDayIcon(){return t(this,void 0,void 0,function*(){const t=o.createFrame("æ—¥æœŸå›¾æ ‡",60,60);return this.content.dayIcon?yield n.setImageFill(t,this.content.dayIcon,"FILL"):(t.fills=[r.createSolidFill({r:1,g:.8,b:.2})],t.cornerRadius=30),t})}addSignInButton(){return t(this,void 0,void 0,function*(){const t=o.createFrame("ç­¾åˆ°æŒ‰é’®",200,60);t.x=(e.H5_WIDTH-200)/2,t.y=400,this.content.signButton?yield n.setImageFill(t,this.content.signButton,"FIT"):yield this.addDefaultButton(t),o.safeAppendChild(this.frame,t,"ç­¾åˆ°æŒ‰é’®æ¡†æ¶æ·»åŠ ")})}addDefaultButton(e){return t(this,void 0,void 0,function*(){e.fills=[r.createSolidFill({r:1,g:.4,b:.3})],e.cornerRadius=30;const t=yield o.createText("ç«‹å³ç­¾åˆ°",18,"Bold");t.fills=[r.createSolidFill({r:1,g:1,b:1})],t.resize(200,t.height),t.textAlignHorizontal="CENTER",t.y=(60-t.height)/2,o.safeAppendChild(e,t,"ç­¾åˆ°é»˜è®¤æŒ‰é’®æ–‡æœ¬æ·»åŠ ")})}}class p{constructor(t,e){this.frame=t,this.content=e}build(){return t(this,void 0,void 0,function*(){this.content.bgImage?yield n.setImageFill(this.frame,this.content.bgImage):this.frame.fills=[r.createSolidFill({r:.95,g:.9,b:1})];let t=20;if(this.content.titleImage){const i=o.createFrame("é›†å¡æ ‡é¢˜",400,80);i.x=(e.H5_WIDTH-400)/2,i.y=t,yield n.setImageFill(i,this.content.titleImage,"FIT"),o.safeAppendChild(this.frame,i,"é›†å¡æ ‡é¢˜æ·»åŠ "),t+=100}const i=o.createFrame("å¡ç‰‡å®¹å™¨",e.H5_WIDTH-40,200);i.x=20,i.y=t,i.fills=[r.createSolidFill({r:1,g:1,b:1},.9)],i.cornerRadius=10,o.setupAutoLayout(i,"HORIZONTAL",10,10);const s=this.content.cardsCount||5;for(let t=0;t<s;t++){const e=yield this.createCardItem(t+1);o.safeAppendChild(i,e,`é›†å¡å¡ç‰‡${t+1}æ·»åŠ `)}if(o.safeAppendChild(this.frame,i,"é›†å¡å¡ç‰‡å®¹å™¨æ·»åŠ "),t+=220,this.content.combineButton){const i=o.createFrame("åˆæˆæŒ‰é’®",200,60);i.x=(e.H5_WIDTH-200)/2,i.y=t,yield n.setImageFill(i,this.content.combineButton,"FIT"),o.safeAppendChild(this.frame,i,"åˆæˆæŒ‰é’®æ·»åŠ "),t+=80}this.frame.resize(e.H5_WIDTH,t)})}createCardItem(e){return t(this,void 0,void 0,function*(){const t=100,i=o.createFrame(`å¡ç‰‡${e}`,t,130);switch(this.content.cardBg?yield n.setImageFill(i,this.content.cardBg,"FILL"):i.fills=[r.createSolidFill({r:.9,g:.9,b:.9})],this.content.cardStyle){case"style1":i.cornerRadius=0;break;case"style2":i.cornerRadius=10;break;case"style3":i.cornerRadius=50;break;default:i.cornerRadius=5}const s=yield o.createText(`${e}`,16,"Bold");return s.resize(t,s.height),s.textAlignHorizontal="CENTER",s.y=105,o.safeAppendChild(i,s,"é›†å¡å¡ç‰‡ç¼–å·æ·»åŠ "),i})}}export{C as ActivityContentBuilder,I as CarouselModuleBuilder,p as CollectCardsModuleBuilder,m as NineGridModuleBuilder,T as SignInModuleBuilder,d as createCustomModule,f as createFooterModule,c as createGameInfoModule,l as createHeaderModule,u as createRulesModule};
//# sourceMappingURL=module-builders.js.map
