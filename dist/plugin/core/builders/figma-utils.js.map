{"version":3,"file":"figma-utils.js","sources":["../../../../../src/core/builders/figma-utils.ts"],"sourcesContent":[null],"names":["FontManager","loadAll","loadPromises","this","fonts","map","font","__awaiter","figma","loadFontAsync","success","error","failedFonts","Promise","all","filter","result","length","console","warn","loadSingle","fontName","family","style","loadInterFonts","ColorUtils","hexToRgb","hex","trim","r","g","b","cleanHex","slice","split","c","join","replace","test","parseInt","substring","createSolidFill","color","opacity","type","NodeUtils","createFrame","name","width","height","frame","resize","createText","text_1","fontSize_1","arguments","text","fontSize","fontWeight","textNode","characters","setupAutoLayout","direction","spacing","padding","layoutMode","primaryAxisSizingMode","counterAxisSizingMode","itemSpacing","paddingTop","paddingBottom","paddingLeft","paddingRight","primaryAxisAlignItems","counterAxisAlignItems","safeAppendChild","parent","child","operationName","appendChild","safeBatchAppendChildren","children","successCount","forEach","index","safeRemoveNode","node","remove","ImageNodeBuilder","createImage","bytes","createLargeImage","bytes_1","width_1","height_1","rect","createRectangle","fillTheSelection","image","fills","imageHash","hash","scaleMode","createImageFill","insertImage","imageData_1","name_1","imageData","defaultWidth","defaultHeight","uint8Array","data","Uint8Array","maxSize","ImageUtils","isOversized","handleOversizedImage","imageNode","createPlaceholderRect","resolve","timeout","setTimeout","sliceInfo","calculateSliceStrategy","sliceStrategy","sliceWidth","sliceHeight","slicesCount","description","ui","postMessage","Array","from","messageHandler","msg","imageName","clearTimeout","slices","assembleSlicedImage","off","on","_totalWidth","_totalHeight","strategy","notify","sliceNodes","i","sliceBytes","sliceNode","x","y","push","sliceError","Error","currentPage","group","groupError","reason","fillColor","includes","then","label","Math","min","max","textAlignHorizontal","textAlignVertical","catch","setImageFill","node_1","Utils","extractUint8Array","imageFill","createTitleContainer","title_1","bgImage_1","title","bgImage","container","titleText"],"mappings":"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"}